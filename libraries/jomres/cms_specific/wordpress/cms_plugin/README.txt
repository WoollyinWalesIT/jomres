=== Jomres Booking System ===
Contributors: jomres
Tags: Booking, booking calendar, events, hotel, hotels, calendar, motel, motels, booking system, booking portal, room booking, online booking software, booking engine, online reservation, online reservation system, reservation system, reservation widget, hotel booking, villa booking, villa rentals, accommodation, reservation, reserve room, availability, availability calendar, bed and breakfast, booking form, booking enquiry, web booking, reservation plugin, holiday apartments, holiday rentals, apartment rentals, cottage rental, b&b, tool hire, ecommerce, shop, store, ajax, gallery, slideshow, portal, twitter, online booking system, tours, api, json, REST, rest-api, webhooks
Donate link: https://www.jomres.net
Requires at least: 4.3.1
Tested up to: 5.1
Stable tag: trunk
License: GPLv2
License URI: http://www.gnu.org/licenses/gpl-2.0.html

== Description ==

= Complete Online Booking and Property Management Solution for Accommodation, Rentals and Tours =

Jomres is a commission-free, responsive, Open Source multi-vendor, multi-language, multi-property online booking plugin for accommodation, rentals and tours used by thousands of businesses worldwide to manage their properties and reservations. Fully-integrated into WordPress, you can create an unlimited number of booking websites, accessible to customers on any device, in any language.

<blockquote>
	<p>
		<a href="https://www.jomres.net">Plugin website</a> | <a href="https://www.jomres.net/manual/">Documentation</a> | <a href="https://www.jomres.net/pricing">Plugins and support</a>
	</p>
</blockquote>

= What's new? =

Property managers can now add and remove widgets in the Dashboard at the click of a button.

[youtube https://www.youtube.com/watch?v=KkomX9HVjro]


[See the Single Hotel Demo here](http://wordpress-hotel.jomres.net/)

[See the Portal Demo here - a variety of bookable items, multiple owners](http://wordpress-portal.jomres.net/)

Developer License holders have access to the theme used in the two demos above and two special "QuickStart" zip files that enable you to deploy a full installation of WordPress with everything already set up to exactly match either the Single Hotel Demo or the Portal Demos. You can be up-and-running, with a fully-featured booking website that looks terrific, within minutes.

The [Jomres Forum](https://www.jomres.net/support/forum) is completely free to everyone, we hope you will join our active and friendly community.

If you want the reassurance of fast support directly from the developers of Jomres, license holders have access to [the Support Ticket system](https://tickets.jomres.net/).

== Installation ==

1. In your WordPress dashboard, go to Plugins > Add New

2. Search for "Jomres"

3. Click Install and activate the plugin.

[Installation videos](https://www.jomres.net/download)

Jomres Core is free but its real power comes from its plugins.

== Frequently Asked Questions ==

= Is Jomres free? =

Yes. Jomres follows the [Open Core](https://en.wikipedia.org/wiki/Open_core) business model for Open Source projects. The Jomres Core itself is free to download and install. To help pay the bills some features of the system are delivered as plugins in the Jomres Plugin Manager, to download those you will need a license key saved in your Jomres installation's Site Configuration page.

= What do I get for free? =

	**Tried and tested** Jomres is a true bookings portal and has thousands of users who've helped us to fine-tune the system to make it the best in it's class.
	**Large and enthusiastic community forum** Before choosing a competitor, check out their forums, if they have one. In our experience a plugin's real value can be determined from a forum's activity, it is the heart and soul of the project. If the forum's dead, so is the project. Don't believe fake reviews, look for yourself.
	**Totally multilingual** 45 language files are included by default. Unique label editing feature allows each property to have their own labels, and our Language Context feature allows different property types to have completely different language files.
	**Supports both Bootstrap 2 and Bootstrap 3, another first** Completely responsive. We have adhered to the BS2 and BS3 coding standards religiously, so Jomres will work in any theme that uses Bootstrap. As always, where we lead other Booking systems will follow.
	**Works for just single property sites, or multiple properties** Equally suited to booking hotels, B&Bs and individual properties like apartments and villas, cars, boats and tools.
	**Intelligent, Ajax driven reservation system** Our goal is to make it as easy as possible for guests to make bookings. Two different room list styles, autodetect guest country, even disable the depature date input altogether. Each property can have different Required fields in the form. Property managers can enable/disable booking functionality on each property at the flick of a switch. For hotels, single person supplements can be applied in the event of under-occupancy. Each property chooses it's own currency and pricing output format. Create new Wordpress users when unregistered users book for the first time. Room locking means that if one person selects a room during booking, another person using the form at the same time can't book the same room.
	**Optimised for performance** our clients have successfully used it on websites with more than 30,000 properties listed. Guests, invoices and booking listings are all Ajax driven meaning that it deals with large data volumes very easily.
	**Bookings per night or per day** Deposits can be a percentage or flat rate, or the first day's booking cost. Variable depsosits based on the number days from today determine if the deposit paid should be a smaller fee, or the whole booking cost.
	**We listen to our users** The property manager's User Interface has been designed after consulting with real property managers to provide the most logical User eXperience possible.
	**Clear separation of Site and Property manager responsibilities** All property management is done via the front end of the site, no need to allow managers to access the administrator area.
	**Todo lists** They guide your property managers through setting up individual properties, from pricing through to property description and images.
	**Simple or extended property configuration** Site managers choose whether property managers should have few, or many settings to choose from.
	**Crisp, clean dashboard** Drag and click the calendar to create or modify a booking's room and dates, or drag away to easily cancel a booking.
	**Slick Media Centre** Images are exceptionally easy to upload, and you can upload images for the main asset image, property list slideshow, main property page slideshow and more. Small, medium and large images are created automatically and the slideshow for displaying images is fully responsive.
	**Calendars** Several different calendars for displaying occupancies and arrivals and departures. Whether it's a villa or hotel, you'll know at a glance how busy you are.
	**Amend bookings** After a booking has been created, add extras to bookings while the guest is on-site, or completely change the booking's dates and prices.
	**Email templates** Property managers can customise the email templates to suit their individual properties.
	**Detailed invoicing** Shows all line items, including tax. Additional items added to invoices can have their own tax rates.
	**Taxes** Accommodation and other services can each use their own tax codes.
	**Guests have their own accounts** Their details are remembered from visit to visit.
	**Guest dashboard** This allows them to easily see their bookings, invoices and favourite properties.
	**Contact form** If the guest's not ready to book right away, they can contact the hotel directly through a simple form instead.
	**Elegant Property List** Shows multiple views including List and Photo views, plus various sorting features and when a guest sets a budget then properties outside that budget are de-emphasised. Offers both infinite scrolling or paging to show search results.
	**Property comparison** page Guests can compare up to 3 properties at a time.
	**Property feature icons** Create by property managers, they can be defined for all property types, or just one property type.
	**Review functionality** Reviews can either be automatically approved or not, guests can input comments and other reviewers can score a review's helpfulness.
	**Fully automatic exchange rate conversion** No configuration required at all, just request a free API key from OpenExchangeRates and Jomres will download the current rates daily and use them as needed.
	**Plugins plugins plugins** Using our plugin philosophy, all areas of Jomres functionality can be modified. This has helped to breed a healthy and diverse plugin community.
	**Modular** It's designed to be third party plug-in friendly. See the extension specific plugins page here on the JED, or visit our Partners page.
	**Google maps well supported** Drag and drop pointers or type your address for the pointer to move. Choose to show POI's or not, and choose a map colour scheme that suits your site's theme. 30+ map styles so that the maps match your site's theme.
	**QR codes in both front and back end facing pages** Receptionists can scan a customer's booking printout and immediately book them in on arrival. Guests can scan QR codes to be taken to directions to the property.
	**Logging** Detailed logging for the data-nerds out there. Extensive log files that are cycled regularly, and logging can be sent to a remote syslog server.
	**Recaptcha** Uses the most modern No CAPTCHA reCAPTCHA in contact forms to reduce spam.

= If I purchase a license key what happens when the license expires? =

Nothing at all. You continue using the software, although you will not be able to download updates to the plugins.

= Is there a manual? =

Yup, the [manual](https://www.jomres.net/manual/) is available to all users. It's very well documented, and there are video tutorials if you prefer to learn that way.

= Is there a demo? =

[Yes, see here](http://wordpress-hotel.jomres.net/) This demo is built in Wordpress and uses our extremely popular Leohtian template. You can download a copy of this site as we offer all of our demos as Quickstart packages, which make it very simple and quick to deploy a new Jomres and Wordpress installation for your clients.

= Where can I get support? =

If you've got a download and support license you can raise a [ticket](http://tickets.jomres.net), and you can also join the [Community Forum](https://www.jomres.net/forum) and ask your questions there.



== Screenshots ==

1. Dashboard, clean and simple. Property managers can add their own widgets and drag and drop to change their position.
2. Search results, List view.
3. Search results, Photo view.
4. The Property Details page, which is the main source of information for the resources you're renting out, be it a hotel, villa or something like a toolhire business. Note, all screenshots are from a Jomres template running Bootstrap 3.
5. Menu options.
6. Quick Booking modal from the Dashboard. Receptionist/Manager only feature.
7. The Media Centre, allows easy uploading of JPG and PNG images.
8. More information on the Property Details page.
9. The Normal Tariff editing mode. This is the simple way to enter prices into the system, but the more powerful Micromanage mode offers more flexible pricing.
10. The Property Details editing page, with drag n' drop for the map.


== Changelog ==

You can not install this file through the Wordpress installer features.

Instead we recommend that you visit the [Downloads](https://www.jomres.net/download) page on our site to see the options available to you.

= Jomres 9.9.13 29/09/2017 =

* Fixed an issue when creating new Joomla users in J! 3.8  Thanks Rod.
* Solved a bug on fresh installs which prevented the proper creation of guest profiles table
* Solved a problem with default value of language_context on fresh installs
* Solved a problem in jomres settings table which prevented an index being created because the akey column length was higher than 1000 bytes, so changed the akey column length to varchar(100). Should be more than enough for any setting name.

= Jomres 9.9.12 27/09/2017 =

* Flight library moved to top level vendor directory
* manager_properties_none.html updated to produce output to advise user to use a different property manager for webhooks.
* Plugin images re-added to plugin list as they're now (mostly) on an ssl enabled server.
* Added an option to property types to set if this property type allows stars classification or not. Depending on this, the stars input will be shown/not shown in edit property page.
* Added BOOKING_LENGTH output to emails (number of days/nights)

* Modified api, a change to dependencies broke the api's ability to find the http_build_url function that was recently moved.
* When amending a booking from dashboard, check availability even if this is just a room switch. It may happen that the currently checked in guest with a departure overdue may not be in the current view. Thanks Jad Makhlouta for pointing this out.
* Return empty array if no custom fields are available for this property type id
* Removed output_filters function override because we use that function even before the 00001 trigger point


= Jomres 9.9.11 20/09/2017 =

* Changed where we trigger 00001
* Improved how we pass the selected number of guests from search modules to the first guest type dropdown on the booking form
* Added http_build_url class to dependencies
* Jomres cron jobs will also be triggered when needed on non jomres specific pages that have jomres plugins as modules/widgets.
* Improved how we get the property details url on Joomla when we have a specific Joomla menu item for a property.
* Price output function modified to use and display only 2 decimals
* Sort images by filename when getting their details from db
* Only show video tutorials in frontend if using bootstrap templates
* Modified how guest cancellations are performed so that they're using a standard class, and ensure that the webhook is triggered.

* Resolved an issue in Joomla 3.8 caused by changes to Joomla's version file that would prevent Jomres from working.
* Solved a problem with property details sef urls in emails (joomla only)
* Solved a problem with properties being displayed twice in list properties tables
* Solved a recaptcha problem on contact form. Removed recaptha v1 code as the lib was removed previously anyway.
* Solved a problem with html purifier stripping down all html in strong mode, including the allowed html tags
* Removed a blank space after user and pass in new user email
* Fixed an issue with description search returning wrong results due a missing property_ors in the 2nd query.
* Solved a problem with existing room descriptions not being updated for the currently active language.


= Jomres 9.9.10 31/08/2017 =

* Changed how we upload user profile images to make it consistent with media centre uploads, so we can use db image details, s3 and cloudfront integrations. Existing user images need to be reuploaded. Added support for adding hidden media centre resources that can be used internally and don`t show up in media centre dropdowns. First use for this is user images.
* Modified feedback message handling so that it also uses redirect messages.
* Changed position of the user feedback div in admin area
* Broke user initialisation into own method as we need a way to re-initialise a user programatically sometimes.
* Modified 99994 trigger so that all  99994 triggers are called after redirection not just one specific webhook trigger.
* Improved the jomres_properties class to ensure that created properties custom text always uses the newly created property uid.
* Fixed a bug in new category searching functionality

*  Solved a problem related to duplicate coupon discount on invoices
*  Solved a problem related to widget selector showing up on search results pages
*  Fixed a typo that was preventing some deferred tasks from running
*  Added missing property categories output in bootstrap 2 and jquery ui templates
*  Solved a problem in the installer related to language context default value

= Jomres 9.9.9 21/08/2017 = 

* Added support for property categories. This is a simple feature that allows managers to create property categories, which can then be added as both menu options to Joomla, or added as shortcodes to articles/pages in both Joomla and Wordpress.
* Added changes to allow us to have global coupon codes (created by site admins) that apply to all properties.
* Added a minimum deposit value setting to property configuration. If the deposit calculated is less than N figure, then the N figure is used to define the deposit.
* Added the language context feature to language file translation page in jomres admin cpanel. This way we can have property type specific language strings, without needing to have property type specific language files (which are mostly duplicate language strings, very few really different). Everything is stored in db, so it`s upgrade safe.
* Added support to save media centre image details in db to avoid scanning dirs each time a page loads to find all images.
* Added Amazon S3 and CloudFront integration for images.
 
* Invoice webhooks updated
* Added support to view only invoice line items and transactions, will be used later.
* Added a constant for jomres core-minicomponents dir
* Don`t show delete property menu item if this manager has access only to one property
* Added deposit ref to deposit line item on invoices
* Added a new administrator area video showing property creation, to help new users understand that they need to log into the frontend.
* Added support for composer and autoloading external libraries
* Removed adodb and used php date and mktime functions. Added monolog to dependencies
* Added a define for the updates path
* Added a jomres class that checks availability for dates and room uids
* Added a new generic black booking insert class
* Added a new ical import library
* Removed some unneeded cache files
* Tweaked sockets timeouts because we don`t need to wait too long for a response
* Removed a specific check for classes in custom_code dir, as that dir is already available in the classes registry
* Added cpanel task to excluded tasks in access control, as this is the cpanel default frontpage
* Removed property type specific language files. Now we can have property type specific language strings saved in db, so no need to duplicate an entire file for each property type.
* Added property categories tutorial video
* Added Armenian language file to system. Thanks Hamlet.
* Removed the unused bootstrap-tour js files
* Disabled image rotation based on exif meta data
* Added feature to allow devs to rerun the plugin installer script without needing to reinstall a plugin. Useful when creating plugins and you want to recreate database tables.
* Removed some unused options (component wrapped) and cleaned up code
* Added video tutorials to BS2 top.html.
* Updated css so that the video tutorials button would stand out more as even some of our more regular users had failed to see that it exists.
* Added an ioncube version test to plugin manager installer.

* Fixed an issue where the guest's cancel booking button text would not appear.
* Solved a problem that`s sometimes encountered with jintour properties and coupons
* Solved some bugs that prevented subscriptions being updated properly
* Fixed how coupons are displayed in price summary, tax was added on top of the discount.
* Solved a js error when we drag an event to cancel it and cancellation can`t be made
* Fixed an issue that prevented us from moving bookings to another property. Seems there was a bug in place in some code since before 2009 (!). Thanks Jad


= Jomres 9.9.8 31/07/2017 =

* Property Completion highlighting. Properties that have been completed ( IE prices updated, images uploaded etc ) are now highlighted to site administrations that they're now ready for approval ( if the feature is enabled ). Similar highlighting added to frontend property lists so that property managers can see those properties that are still awaiting completion.
* Context sensitive video tutorials added to system, both administrator area and frontend. Videos are done without voice-overs or text so that they are largely language agnostic, language file can be copied and edited by site admins if required for other languages.

* Repurposed an old setting to use it to disable avl calendars in property details
* Made property list default to paging instead of live scrolling
* Undone a previous change which makes label translations save the xx language shortcode instead of xx-XX language code, causing translated text not to be pulled from db when selecting by xx-XX language code.
* Sanity check messages will be displayed on all pages, without excepted tasks
* Removed some unimportant warnings from administrator area.
* Cleanup up some unneeded notices, clarified the license status messages and added action buttons
* If IPInfoDB api key is not set, we`ll not default to EUR anymore, instead we`ll default to the currency set in site configuration.
* Removed the simple/advanced config toggle, not very popular as folks seem to miss the advanced settings in property configuration. 
* Combined all map related settings in site config to one google map tab only.
* Made the fullscreen view available on small screens too and removed an unused setting
* Added shortlist/favourites shortcode.
* Made the FAQ a menu item in the jomres control panel help section and removed the button.

* Fixed a bug in how we prepare the rates and mindays arrays before creating the tariffs

= Jomres 9.9.7 20/07/2017 =

* Webhooks Core and API Core moved into main application. There are a lot of ways that we can use this functionality, however having these particular two features as plugins is more of a hinderance than a help, therefore they've been moved into the core.

* Modified the shortcode parser so that if a class exists, don't include the file. This doesn't address any bugs in Jomres, instead it addresses the possibility of triggering an error if a developer or designer should create a fatal error by copying a minicomponent, e.g. to create a backup of a file.
* Updated shortcodes instructions to make sure that feature uids information is correct.
* Updated how Jomres Pricing information is retrieved.
* Added a check for filesize being zero when installing the plugin manager.
* Tweaked menus to not show some options if upcoming property limitations are applied.

= Jomres 9.9.6 12/07/2017 =

* Our implementation of OAuth2 scripts updated to extend the lifetime of the tokens, and allow implicit token issuing.
* Changed property type class so that property types are retrieved in alphabetical order.
* Modified patErrorManager to record an error in the event of problems because it will provide us with backtracing information.
* Modified jomres_properties class so that new properties default room will get a basic room type, meaning that Micromanage editing mode can be used right off the bat.
* Tweaked an error message to clarify it's source.
* Added payment method as booking note.
* Monolog and OAuth2 libs updated.
* Tweaked rest api authorize controller so that if it returns an error about return urls, it tells you which url it's expecting, versus what was sent.
* Added support for auth free access to the REST API functionality. This feature allows us to offer additional REST API functionality that doesn't demand client id & secret keypairs, so that there are fewer barriers between your clients and your API.
* Made the search misc menu item visible to receptionists or above. No need for this menu to be visible to guests.
* Cancellation threashold now available for tour property bookings too.
* Removed Read More javascript functionality as it's not an elegant solution.
* Added Jomres price plans to main menu
* Renamed Upgrades to Updates. Upgrades has always been the wrong word to use in this context.
* Added license name to output content of Site Config license data.
* Exchange rates : Added a check for $json to see if it's false ( connection errors can cause this ).
* Updated a task in approval urls with the next task name
* Added a unique css class to each property that can be used to customize css for each property uid individually
* Updated show property map shortcode data to include map_zoom

* Fixed a notice in Show Plugins referring to third party plugins.
* Fixed notices that may appear in booking form and confirmation if an older tax rate has been deleted when building extras info.
* Fixed some bugs in new Norwegian language file.
* Solved a problem related to receptionists not being able to see the booking details
* Cart/booking number was being incorrectly reset to 0, so changed how it could be detected. Thanks Juan Antonio
* Small tweak to solve duplicate tour name in invoices
* Solved a problem when getting the gateways for commission and subscription invoices
* Solved a problem on booking page related to empty strings being handled as arrays
* Fixed an issue where log files might not appear in log list.
* Solved a property comparison problem which caused all checkboxes on the page to be checked if checked
* Solved a problem related to how coupon discounts are added to invoices
* Solved a geocoding related problem where country was always reset to DE

* Added ability for editinplace admin script to pass language to the updateCustomText function as get_showtime("lang") was reporting the wrong language.


= Jomres 9.9.5 19/06/2017 =

* Huge update to Norwegian language file. Thanks Edvin.
* Modified an error trigger so that double booking exceptions can only be triggered by the processpayment task.
* Added shortcode information about the new property task. ( Jomres ASAModule mambot has also been updated to support this ).

* Re-added the (previously obsoleted) jomres_formatBytes function as some older automatically generated language files need it. Without it they'll throw a fatal error when users upgrade from 9.9.3 to 9.9.4

= Jomres 9.9.4 13/06/2017 =

* Improved viewproperty so that if Show Only Availability calendar setting is used, then we properly use settings from Property Details configuration options.
* Improved edit property type script so that fallback markers are properly found and displayed.
* Installer modified because one of our client's firewalls 403'd when it saw >> in the POST data.
* Moved the town and marker uploaders to the core to simplify things
* Re-enabled the property type dropdown on the edit property page, folks seem to need it.
* Whenever the property type is changed, we`ll delete all rooms, tariffs and property settings. This also resets availability.
* Modified region related functionality so that if a property has an incorrect region id then the property is not returned in the search results, and it is unpublished. This is better than throwing a fatal error, and being unpublished highlights to the manager that it's not currently available. 
* Added a new trigger to allow plugins to add their own warnings to the Jomres Control Panel.
* Changed log cleanup frequency to hourly.
* Added functionality to allow 3rd party developers to offer links to documents that provide current version information. ( Plugin manager )
* Removed some very old unused functions
* Romanian VAT updated
* Improved agent details layout
* Timeline menu hidden for real estate properties
* We'll silently switch from mysql to mysqli if function doesn't exist instead of faithfully following Joomla's configuration.php file. It looks like that's what J is doing as of 3.7.x and it makes sense.
* Removed plugin images from plugin manager as they can point to http sites, resulting in mixed content warnings.

* Tweaked the initial set timeout function to be a little more friendly for shared hosting packages.
* Notice fixes
* Removed some redundant code which caused an error when paying for approved bookings
* Removed a slash which was breaking property feature tooltip images in basic search modules.
* Solved a booking form error by removing some redundant code.
* Guest types class updated to allow float values in the Variance field ( used to, new class was incorrect ).

= Jomres 9.9.3 01/06/2017 =

* We disabled the dropdown to choose property types in the previous version. In the past, regardless of whether or not the dropdown was disabled, the value of the dropdown would still be sent by the browser. It would appear that current versions of browsers no longer send the content of that dropdown, which triggers an error when saving any property.
* Fixed notices in weekly occupancy percentages script.
* Fixed an issue when manually creating new guests.

= Jomres 9.9.2 01/06/2017 =

* Solved a redirect problem when installing jomres
* Fixed an issue with property list paging.
* Fixed an issue where dashboard settings wouldn't be saved when a guest profile hasn't been created for a manager yet.
* Warn about the ipinfodb and openexchangerates api keys only if "use currency conversion" is enabled in site config.
* Removed a query that`s not needed.

= Jomres 9.9.1 30/05/2017 =

*  Added jomres frontend control panel widgets. The Jomres Dashboard ( now renamed to frontend Control Panel ) is now dynamic, meaning you can add/remove widgets to the Property Manager's control panel as well as use Drag and Drop to move them around.
*  Disabled option to change property type after a property has been created. 

*  Changed datatables scripts so they won`t interfere with mod security rules
*  tweaked the reinstall all plugins message when no license key set
*  Improved how and when we get all regions from db
*  Added region to property details sanity check and removed postcode and tel as they`re not used by everybody or on all properties
*  Replaced hardcoded /jomres/uploadedimages path with it`s defined constant
*  Replaced hardcoded /jomres/temp path with it`s defined constant
*  Removed usage reporting and tweaked the api keys warning colours in admin cpanel
*  Removed unused site config settings
*  Made the cms user register/login separate tasks that redirect to the cms registration/login form. This allows us to control the menu register/login jomres menu items access levels too
*  Added guest_uid index to contracts table
*  Improved jomres sessions handling
*  Tweaked edit guests page so that the blacklist option and text will show up only when editing existing guests.
*  Updated jquery ui
*  Slightly increased the delay value when searching in datatables
*  Updated chart js
*  Slovenian regions added to countries.php so that new installations will have regions installed.
*  Made the bookings chart the default chart selected on reports
*  Added chart fixed height support to be used later
*  Changed regions class so that when region id is 0 or blank, we`ll return an empty string instead of throwing an error.
*  Made sure that properties can be published/unpublished on user suspension only if the user has a manager/receptionist user role.
*  Modified frontend functionality so that dashboard ( to be renamed timeline ) is part of a subset of cpanel templates.
*  Menu option added to put weekly percentage view into reports menu option.
*  Creating the object using j05000 script to allow dobooking method override.
*  Added request_log call to jomres.php to be triggered if in development mode.
*  Changed a language definition for book now because SEF urls with different strings for the book now text wont work on different property types.
*  Tweak to make sure we also reset the logged in manager to non manager when it doesn`t have any properties assigned
*  Added some code that will remove orphan rooms for properties that have had their property types changed, and an extra sanity check. These will remain commented out as in 9.9.1 we are removing the ability to change property types, however the change will remain in case we reverse this decision.

*  Fixed a bug in access control and added the 00035 property details tabs/blocks to access control. This allows us to set property details blocks/tabs specific access levels.
*  Temp fix for php 7.1 session ids which have max 256 chars. Jomres sessions only allow 50 chars, so we`ll substr the first 50 chars of session id
*  Resolved an issue where wire transfer couldn't trigger 00605 to send emails.
*  Fixed a bug in DT ajax options
*  Made public a function that is called in j06002edit_tariffs_normal.class.php
*  Fixed a notice on jomres install related to jr user not being ready.
*  Fixed notices for when markers are not created for a property type.
*  Tweaked view agent to only show agent name in browser title if task is set to view_agent.
*  Fixed a bug in the normal tariff editing mode that tries to address an edge case created by switching property types.
*  Solved access control problem for viewproperty and dobooking menus and tasks.

*  Changed some variable names in datatables ajax request so they won`t conflict with WP public query vars

= Jomres 9.9.0 16/05/2017 =

*  Added new tariffs handling class. This brings several benefits for future development, with respect to the new booking engine and API development.
*  Refactored both front and backend menu systems. Plugin settings moved to Site Configuration and entire administrator area rebuilt to be more logical.
*  Session handling completely refactored to store data in the database, not files. Performance improvement.
*  Region name handling refactored. Performance improvement. 
*  Added country flags as css to lower the number of requests on pages that display the country flags (eg: top destinations)
*  Improved countries handling so they won`t all be loaded on each page, instead they`ll be loaded all only on demand.
*  Added Radial percentage bars added to Dashboard to easily see this week's occupancy levels.
*  Added room descriptions inputs and outputs.
*  Added Guest Blacklisting feature.
*  Added reviews details to admin cpanel overview
*  Added booking notes to dashboard popup.
*  Improved the admin cpanel frontpage. Layout adjusted.

*  Considerable language file update, old definitions removed.
*  Many minicomponents trigger numbers changed so that they are now 06000/06001/06002/06005 instead of their older numbers.
*  Made the crons run using async sockets so they won`t slow down the page
*  Moved cron job settings to site config. Updated to use logging only in development mode.
*  Removed mobile detect class as it`s not needed anymore
*  Modified how we scan for class files to greatly improve speed
*  Added a classes registry file
*  Improved languages handling so we won`t need to scan for languages on each page load
*  Improved how we clean up tmp js files, we were doing it twice when saving site config
*  Removed jomres array caching and done micro optimization to avoid unnecessary counting of arrays
*  Improved speed on how we call and check if a specific event exists, so we won`t go through each record in the registry, instead directly check if a specific key is set in the registry array.
*  Change how we handle minicomponents registry. The array key has been changed from [XXXXXminicomponent_name] to [XXXXX][minicomponent_name]. Now we can quickly find all minicomponents by trigger point instead of going through the entire minicomponent registry array all the time.
*  Modified functions related to checking Jomres version so that their return values have more scope.
*  Added coupon code classes
*  Removed the jomres admin dir and moved the last file in it to functions dir
*  Modified agent view script to change page title to their name.
*  Removed the unused site config cal_output setting
*  Moved sms clickatell classes from the core to their plugin
*  Renamed the Properties site config tab to Portal Functionality
*  Improved languages class so it won`t require scanning the languages dir anymore
*  Readme.md file added to minicomponents dir for developers, provides descriptions of what the different trigger numbers do.
*  Delete Business changed in lang files to Delete Property.
*  Removed product tour files from repo. tour_target divs will need to be removed from template files at a later time.
*  Show logfile removed as it's not used.
*  Cancel booking changed from manager to reception tasks.
*  Added some back tracing for when a class doesn't exist.
*  Removed the original price tooltip.
*  Removed the unused plugin check code
*  Added user agent to sockets
*  Modified plugin manager so that blue update button does not show if plugins do not need updating.
*  Modified invoices so that the mark as paid button will be available only if the booking is approved
*  Language. Changed Businesses to Properties in table header of control panel.
*  Removed the advanced site config option
*  Solved a layout problem when latest jomres version number can`t be obtained.
*  Added Armenian Dram to our currency codes list.
*  Language. Changed "Available logs" to "Log files" in language files.
*  Completely rebuilt the frontend menu. Changed how access control behaves: now tasks can be controlled and this will control the visible menu items too.
*  Removed an obsolete asamodule report file, as this functionality is now expanded on by the Shortcodes reporting feature.
*  Made access control feature a plugin

*  Updated the Arabic jquery-ui localization file to fix day names
*  Solved a fullscreen view problem in joomla that prevented the editor from working correctly.
*  Fixed how jintour tours tax is calculated when inserting the line items on invoices
*  Fixed an issue of multiple records being created for same invoice at invoice payments ref table
*  Fixed rounding problem when adding service to bill and prices are set to gross
*  Solved a typo that was causing an out of memory error
*  Fixed a bug in save guests where guest mos/cms id would get reset to zero when guest is saved by a property manager.
*  Solved a problem with guest existing id not being reset on a new quick booking made from the dashboard modal
*  Fixed a bug where room types for some other property uids couldn`t be loaded if we`re currently on the property details page
*  Modified the url that the file system integrity check points to, was old svn, now points to github.

*  Solved a problem with js running before document ready on wp, which has the jomres js files in the footer


= Jomres 9.8.29 29/03/2017 =

* Added new deferred task handling functionality.
* Added a new feature to allow each manager to set an external booking url if they want to use a 3rd party website for booking.

* Made the slideshow property details url to be a sef url
* Added backtracing to debug level logging.
* Added a number of changes that resolve hack warnings for users with no gateways installed.
* Added a booking management class to help us with various booking related tasks like guests checkin, checkout, etc.
* Added code to prevent calls to site being able to prevent further processing by dint of, for example, timing out. This allows us to implement deferred message handling functionality.
* Added code to show room uids in dashboard if set to development mode.
* Moved the Cancellation Threashold setting in a more appropriate position in property configuration
* Turkish language file updated.

* Solved some minor layout problems in Media Centre
* Solved some minor problems with some text when editing mode was enabled

* Solved a problem with the search on WP caused by a typo in the variable name when setting the jomres page_id

= Jomres 9.8.28 16/03/2017 = 

* Updated the insertbooking webhook booking_added to be triggered only if the booking is approved or doesn`t require approval.
* Reformatted the ajax response for dashboard events
* Improved speed in admin cpanel by caching the installed plugins list used by the j07020 file that counts plugin updates
* Small tweaks to custom text handling, added a few more checks to make sure we have the property custom text loaded even on non jomres pages
* Updated the get_booking_url and get_property_details_url functions to use additional url params

* Solved a problem with booking enquiries that caused a gateways error, because enquiries don`t use payment gateways.
* Solved a problem with the way room features are saved in db when no room feature was selected
* Solved a problem with the amend booking redirect url when sef enabled
* Solved a notice when saving normal mode tariffs

= Jomres 9.8.27 08/03/2017 = 

* Refactored gateway handling to, among other things, ensure that paypal override setting doesn't override all other gateways.
* Added support for overriding the property details url and improved the booking form url function. 
* Added support to create jomres joomla menus that point to property details page. This will allow us not to have duplicate urls when a joomla menu item is created for a property details page. In this case, the joomla url will be used, not the jomres default one. Also, allows us to have specific joomla modules assigned only to this property details page.
* Tweaked the media centre uploader to allow both jpg and png files to be uploaded. Previously png files would be converted to jpg files, now they're left as pngs, which preserves their transparency.

* Small tweak to allow single person supplement to be a negative value too.
* Improved sorting by room number on the dashboard.
* Made the google maps api load in async mode. Thanks Rod.
* Adjusted the occupancy percentages in the mrp calendar.
* Changed reviews agree/disagree buttons to be available for not logged in users too.
* Updated copyright year at the bottom of the admin cpanel.
* Changed how api handles exceptions ( makes development easier )
* Updated media centre to remove upload contexts and simplify things for 3rd party developers.
* Commented some obsolete js caching code that was causing a scandir on each page load.
* Added a new media centre feature that gets images uploaded by admins (site images) so plugins don`t need specific code to scan those dirs.
* Removed the map markers obsolete class.
* Moved the code that handles zipping logs bigger then 1M to the logs cleanup cron job, so it won`t run on each page load but only once per day.
* Made the geolocation files cleanup a cron job that runs daily and empties the geolocation dir.
* Changed how debug mode is set in Joomla/Wordpress API.
* Disabled a check in the installer for extraservices table name, it's been long enough now.
* Added RTL auto detection to dashboard
* Added a simple function to search for a contract uid based on the booking number.
* Added a function to get a map marker src
* Some aesthetics tweaks to dates on invoices
* Improved guest's view of bookings to cope with empty property uids.

* Fixed the dashboard trash broken layout in bootstrap 2 templates.
* Fixed a typo that was causing a fatal error in the srp calendar.
* Tweaked sanity check messages to not take region into account when warning the user about missing property data, because some countries don`t have regions.
* Solved a problem related to api language in WP.
* Changed how m0 enabled search options are handled on WP


= Jomres 9.8.26 14/02/2017 = 

* Change :  Removed some unused functions
* Change :  Modified the BS3 contact owner form so that name limit is increased to 50 characters.
* Change :  Updated the jomresMailer function to solve a problem when emails not being sent if ssl certificates are self signed by hosting providers.
* Change :  Added a column in list bookings to display who made the booking
* Change :  Added code to automatically enable searching on various options if search module is set to jomSearch_m0. This is because they can only be enabled through editing configuration.php, as the settings in site config no longer exist.
* Change :  Modified dashboard to improve layout of the drag to trash sliding panel.
* Change :  Modified tooltip functionality so that urls can be passed to the output templates. Allows setting of search urls for room types and property features.
* Change :  Added search urls to non-categorised property features.
* Change :  Added joomla router functionality for room types and property features search urls
* Change :  Added ajax countries/regions dropdowns for real estate edit property pages
* Change :  Added bitcoin to exchange rates conversions that can be offered.
* Change :  Added a define for jomres temp dir
* Change :  Tweaked media centre so that some popups show to the left of the button instead of the right, better for smaller screens.
* Change :  Modified the webhook position on saving new guest type
* Change :  Added a new function that, in the core of Jomres, simply returns the booking link page. It does, however, allow us to override the url to the booking page programmatically through plugins if desired.
* Change :  Completely rewritten the guest handling functionality
* Change :  Made the cancellation threshold option available to jintour properties too
* Change :  Tweaked the default visible columns in list bookings to have the "booking made by" hidden by default and the "approved" column visible by default
* Change :  Changed the way we use JInput to filter request vars when sef enabled
* Change :  Added support for overriding the set_booking_number function
* Change :  Partners page updated in Jomres admin area.
* Change :  Moved the guest firstname and surname to the guest details tab in registered users view booking page
* Change :  Removed the int casting of the booking number, to allow custom booking numbers to use chars too.
* Change :  Updated the currency code for Ugandan Schilling

* Fix :  Spanish language file updated to resolve a javascript issues that a carriage return can cause.
* Fix :  Discovered that guest details passed through the form which contained an apostrophe are getting mangled, so we unmangle them then sanitise them properly before passing them to the booking engine.
* Fix :  Fixed duplicate images showing in old BS2 tooltips.
* Fix :  Solved a problem with modals on the booking form being behind backdrop on specific room-tariff configurations
* Fix :  Solved a mailer problem on WP when class SMTP already exists

= Jomres 9.8.25 09/01/2017 = 

* Change :  Modified a variety of webhook names for consistency.
* Change :  Added a tweak to logging to ensure that browser console notification messages aren't attempted if the call is an API call.
* Change :  Removed a duplicate definition
* Change :  Added some ( disabled ) checks for ssl. Strictly speaking the site admin should force api access to go via ssl, I'll leave this in place for now while I consider whether it should be added.
* Change :  Added a note to basic invoice details for use by remote services that might need an aide-memoire for what each invoice status means.
* Change :  Improved patTemplate dump to show the override path when a cms template override is used
* Change :  Reviews class. Improved webhook calls to include property uid.
* Change :  Reviews class. Added note regarding "fields" and their meaning which can then be passed back by API scripts.

* Fix :  Fixed an issue in property access class for api as new user role changes broke it :(
* Fix :  Solved a problem related to room type in the verbose tariff details
* Fix :  Solved a js error on the dashboard
* Fix :  Changed phpmailer to use jomres_phpmailerException class

= Jomres 9.8.24 27/12/2016 = 

* Fix :  PHPMailer 5.2.19 was found to have it's own vulnerability, eventually resulting in PHPMailer 5.2.21, so Jomres has been updated with this version.

= Jomres 9.8.23 27/12/2016 = 

* Fix :  Fixed a bug in the installer.

= Jomres 9.8.22 27/12/2016 = 


* Feature :  Added webhook functionality, specifically code to generate webhooks, that the Webhook Core would fire.
* Feature :  Updated the dashboard js to have proper built in touch devices support.
* Feature :  PHP Mailer library updated to 5.2.19 from 5.2.9 due to critical remote code execution bug in previous versions
* Feature :  Improved logging, logs now sent to browser console and modified logging class so that further information can be sent to an extra field, which offers cleaner log views.

* Change :  Properly format the date in the booking notes tab
* Change :  Some small changes to make some js run only on document ready
* Change :  Removed a setting not used in wp, saves an unneeded query
* Change :  Added a new tab in Plugin Manager for webhooks plugins
* Change :  Disabled a log in input filtering
* Change :  Added support for changing the jomres language (from the jomres language switcher)in the frontend even if the cms language remains the same.

* Fix :  Changed where jomres_decode is done in jr_gettext.php to solve a problem in label translations.
* Fix :  Fixed a js error on dashboard in fullscreen view
* Fix :  Fixed a potential cause of notices if none of the properties chosen for comparison have property features assigned to them.
* Fix :  Solved a js error related to regions dropdown on bootstrap 2, on the property registration page
* Fix :  Solved a bug in generic booking amend class that affected the rooms^tariffs pairs when a booking was amended by drag&drop from the dashboard. Thanks Rod
* Fix :  Further changes to solve decimal problems on invoices.
* Fix :  Fixed a bug where property types could be unpublished even if still used by properties in the system

= Jomres 9.8.21 Version skipped = 

= Jomres 9.8.20 01/12/2016 = 

* Change :  Writability check panel removed as it`s not useful anymore 
* Change :  Added a link next to the username input on the edit profiles page to edit the cms user profile
* Change :  Improved managers listing so deleted users from the cms that still have access rights to jomres will be marked with an orange label
* Change :  Removed some very old obsolete files 

* Fix :  Fixed a bug where registered users can't create a new property because their access level was set to the wrong value.

= Jomres 9.8.19 28/11/2016 = 

* Feature :  Added Markdown handling functionality to Jomres. 
This allows non-super property managers to format text in a simple way without being able to add html to the page. Allowing property managers to enter html in property decriptions is fraught with danger ( Cross site scripting being the main worry), which is why we've always defaulted to the most stringent settings on a default installation. This isn't very friendly for new users, however, or property managers that want to apply some formatting but the site has left the Input Filtering setting to Paranoid. Markdown handling allows non-super managers to add basic formatting to text inputs ( for example Property Details, Checkin times ) without sacrificing security. Two new libraries have been added, one to display a Markdown editor in the Edit Property page ( relevant inputs ) called SimpleMDE and a second ( Parsedown )to parse text before it's output to the page. 
* Feature :  Improved the Media Centre.
Made media centre drop down buttons larger and gave the primary and secondary dropdowns their own classes to make them stand out more.
Rooms list added "room" text next to number.
Removed old image link from the images list, instead resource types are able to offer a "Preview" link, which, if available will show an example of the resource in property page inside a modal.
Added additional instructions to give clarity for the usage of the buttons.
* Feature :  Added functionality to allow us to show the main menu in selected locations. 
This allows us to show the Jomres main menu in other places ( See Shortcodes info page ). It doesn't disable the menu from displaying in the Jomres content area, however.

* Change :  Jomres Core files updated to use PSR2 coding standards.
* Change :  Show plugins, Upgrade button renamed to Update.
* Change :  Modified input filtering to preserve line breaks in text that's saved to the database. Related to Markdown.
* Change :  API updated to log an error instead of output it.
* Change :  Added cms specific function to get username by id.
* Change :  Modified the license message position in plugin manager.
* Change :  Minor language file tweak for th-TH.
* Change :  Added new property features classes.
* Change :  Completely rebuilt Jomres user roles. Receptionist access level changed from 1 -> 50, manager 2->70, super property manager was having access level 2 and pu set to 1, now it`s 90. Provides scope for future improvements.

* Fix :  Fixed a typo that prevented us from adding new users in Joomla when making a booking.
* Fix :  Resolved an issue with users being unable to add new property types.
* Fix :  Modified call to Mobile_Detect class, to check that the class doesn't already exist ( other extensions use the same class, so this could cause conflicts ).
* Fix :  Modified contact owner so that the template has it's own version of placeholders that don't have javascript that will cause confusion if the editing mode is enabled.
* Fix :  Fixed a query that was failing in some cases, thanks Rod ( Invoices class ).
* Fix :  Solved resource/room cloning problem.
* Fix :  Fixed a notice for users that deleted all tax rates.

= Jomres 9.8.18 11/11/2016 = 

* Change :  Resolved an issue where cron jobs were throwing notices on installation/upgrade.
* Change :  Modified the registry class to remove javascript caches whenever the registry is rebuilt.
* Change :  Added performance improvements to list reviews script in admin area.
* Change :  Added functionality that detects the type of device, if device is not a desktop then drag and dropping of bookings isn't allowed. Fat fingered souls rejoice!
* Change :  Tourist tax plugin code added to the core of the system.
* Change :  Added tweaks to WP url handling to avoid some wp redirectsion from non-sef to sef urls
* Change :  Added minor tweaks to cron class for layout and checking if a variable is empty.
* Change :  Fixed a couple of notices that can show in the dashboard if a booking is moved into a room where there are no tariffs for said room's type.
* Change :  Modified property header to use the property description in the meta data if meta data isn't set. 
* Change :  Added a couple of tweaks to new marker related functionality that allows for how handling of deleted markers is handled.
* Change :  Updated control panel welcome language strings.
* Change :  Show Profiles page renamed to Property Managers ( Administrator area page ).
* Change :  Minor layout tweak to control panel message output.
* Change :  Updated the key check to correctly return false if a key's state can't always be determined.
* Change :  Added a license status message to the plugin manager.
* Change :  Removed plugin check from sys info script.
* Change :  Added an option to have a blank commission rate to the commission rate dropdown.


= Jomres 9.8.17 04/11/2016 = 

* Feature :  Added functionality to allow different map markers. Allows us to assign different map markers for different property types and for them to show ( naturally ) on the extended maps map.
* Feature :  Added a longtext class and appropriate javascript so that tab contents can be limited to N characters.
* Feature :  Updated the ajax notification loader. Previously it was configured to change the cursor on ajax activity, however mobile devices don't have cursors, so swapped it out for a nice font awesome spinner instead. Now users can see the the ajax search is doing something. Likewise, property managers can see the activity notification.


* Change :  Added full Jomres version to relevant files.
* Change :  Reverted a recent change to an API script vis directory scanning as API doesn't always have access to Jomres framework so the custom scandir function will not be available.
* Change :  Removed some trailing ?> from files.
* Change :  Polish changed to be without BOM
* Change :  Modified a setting description in site config to be more CMS agnostic.
* Change :  Fixed a typo linking to deligence.

* Fix :  Amended the new user creation function as J changes mean that in some mysql modes the insert user query will fail.
* Fix :  Improved how meta data is returned to Wordpress.

* Wordpress :  Improved minicomponent registry to allow Jomres to search child templates for minicomponents.
* Wordpress :  Updated a CMS specific script to correctly pull wordpress module settings.

= Jomres 9.8.16 25/10/2016 = 

* Change :  Removed exchange rates cron script as it's no longer required.
* Change :  Made the exchange rates class a singleton.
* Change :  Modified list guests ajax script to account for mysql strict ONLY_FULL_GROUP_BY settings.
* Change :  Tweaked a query in list invoices ajax script to resolve some mysql notices.
* Change :  Added a tweak to decode apostrophes to their proper form in email subjects.
* Change :  Tweaked tabletools handling so that when clicking on xls link the page name is used when naming the file.
* Change :  Booking confirmation page updated, amend booking element changed from a submit button to a link. It doesn't need to be a submit form, and it's recently stopped redirecting back to the booking form.
* Change :  Tweaked a search query that sorts properties in descending order. Removed that ordering.
* Change :  Added trimming to property names in photo view only to preserve photo view page layout.

* Fix :  Fixed an issue with Leohtian templates not showing modules on front page. It was caused by an incorrectly merged PR in Joomla breaking B/C
* Fix :  Modified how new CMS users are created, fixes a problem with WP.
* Fix :  Removed caching from property uids, solves a language switcher problem in admin cpanel
* Fix :  Testing a tweak to jomresURL function. Joomla 3.6.3 routing has changed how urls are returned, causing issues with various forms being built incorrectly.

= Jomres 9.8.15 18/10/2016 = 

* Feature :  Added filesystem integrity check feature.

* Change :  Improved caching of geolocation caching, seems our performance problems were caused by throttling by the remote service.
* Change :  Added a new input filter results cache for testing. 
* Change :  Added further speed improvements to registry. Also made the registry readable. We just include_once, no more unserialize on each page load.
* Change :  Added small change to get property names multi so that even without caching the query won`t be executed more times on the same page for the same property uids
* Change :  Modified how property names are found. Performance improvement.
* Change :  Modified functionality so that on redirect we explicitly close database connections. All the documentation says we shouldn't need to, but this is a test to see if we can reduce the number of connections left open.
* Change :  Replaced scandir with more efficient home-rolled function.
* Change :  Improved an estimate generation method in the booking engine, major speed improvement for properties with many tariffs.
Changed how we checked to see if an array is empty, instead of counting. Minor performance boost.

* Change :  Added phone number to Contact Owner form.
* Change :  Added alert-danger for BS3 users in edit booking script.
* Change :  Updated add service to bill function so that if the prices are set to gross option is set, then the price is initially figured to nett before being added.
* Change :  Added a change to the invoice class to see if it helps resolve some rounding issues.
* Change :  Added colours to invoice labels status.
* Change :  Improved English language API key directions to provide urls to servers.
* Change :  Improved layout of log file information.
* Change :  Modified exchange rate handling functionality so that if we can't d/l data, we still build a partial file. This prevents various parts of the system re-trying to rebuild this data, we'll just have to accept that for today, we can't convert prices. When the system tries again the next day, more complete data should be available.
* Change :  Added code to die if the call is a heartbeat call from the booking engine then just die, further processing is pointless.


* Fix :  Changed booking engine so that if deposit required is first night then tax is properly included in the price.
* Fix :  Resolved a problem with editing properties in WP
* Fix :  Added a change to how property features are saved in the db as it was affecting property cloning.

* Wordpress :  Added Wordpress functionality that creates a new page with jomres:xx-XX if it doesn't already exist. Negates the need for managers to add pages manually.
* Wordpress :  Added calls to jomres/classes/jomres_database.class.php so that we can monitor WP DB usage.
* Wordpress :  Check if we are in admin area...so that in wp it won`t happen that the framework.php is loaded (because of wp plugins which use actions like 'init' which are available also in admin area - this doesn`t happen on joomla) and does the queries/stuff instead of admin.php.

= Jomres 9.8.14 05/10/2016 = 

* Fix :  Improved how we access some singletons to resolve some people's intermittent performance problems.

= Jomres 9.8.13 03/10/2016 = 

* Feature :  Added functionality that allows us to dynamically add shortcode data to the system, passed directly from minicomponents. 
* Feature :  Repurposed ASAModule report to output information about shortcodes. 
* Feature :  Added a shortcode parser that can return shortcode data.


* Change :  Updated help pages in admin area. New security protocols on jomres.net pages were preventing help pages from showing in iframes.
* Change :  Improved plugin manager to only show the reinstall button when the key is valid.
* Change :  Removed some redundant help scripts as they're no longer needed.
* Change :  Added a number of changes to get around the Mysql 5.7 Strict NO_ZERO_DATES limitation.
* Change :  Removed Joomla3.x specific versions of library files, which were created back in 2012 in anticipation of more significant version changes given Joomla's past history of significant backward compatability changes. As J3.x is now much more B/C friendly these are no longer required. The downside is that anybody running a very old version of J3.x might have problems running Jomres, but in this day and age it's trivially easy to upgrade Joomla.
* Change :  Added changes relating to how we cleanup sessions.
* Change :  Improved and simplified the media centre class.
* Change :  Tweaked how directories are built on recursive directory scans.

* Fix :  Fix intermittent 404 error in wp when submitting a booking.
* Fix :  Fixed a bug where the media centre could find the wrong images for a property, consolidated how directories are scanned ( modest performance improvement ).
* Fix :  Changed how two columns are modified during upgrade so that they don't throw mysql errors.


= Jomres 9.8.12 20/09/2016 = 

* Feature :  Added permit number to Property Details fields for users in those countries that must show a permit/registration number.

* Change :  Added a Reinstall all plugins button for users upgrading from Trial to Full versions.
* Change :  Tweaked API routing allowing clients to send the token in the url.
* Change :  Changed the manage properties icon to a building.
* Change :  Tweaked addplugin to ensure php version is sent when requesting plugins.
* Change :  Tweaked a path used when installing mambots.
* Change :  Added a new javascript function that allows printing of individual divs.
* Change :  Added API key checks.

* Fix :  Fixed an issue in API where a request for a function could throw a fatal error.
* Fix :  Made some API changes so that if a variable isn't empty it doesn't fire a notice.
* Fix :  Fixed an issue where Black bookings weren't labelled in black in the dashboard.

= Jomres 9.8.11 09/09/2016 = 

* Change :  At Rod's request, added componentArgs to optional trigger at the end of show_property_header script.
* Change :  Modified which variable is checked in j00030search.class.php to help Rod out.
* Change :  Updated log file viewing to use table tools.
* Change :  15 char limit in contact owner form upped to 150 characters.
* Change :  Added translatable Jintour descriptions
* Change :  Updated log file viewing to use table tools.
* Change :  Updated Russian language file, thanks Dmitry.
* Change :  Added info class to plugin description text
* Change :  Updated Turkish Lira currency to TRY from TRL
* Change :  Refactored a new function that didn't work when array keys were not consecutive.
* Change :  Improved modal display behaviour in BS2.
* Change :  Updated cron log to clean up old log files > 30 days old.
* Change :  Changed the order in which users are created on new installations.
* Change :  Modified list booking ajax script so that Black Bookings aren't included in the list.
* Change :  Small tweak to ensure sites with just one language type don't try to render the language context dropdown like switches.
* Change :  Improved sanity checks so that rooms are always set as todo if required.
* Change :  Ensured all if statements are wrapped in curly braces in jomres.js
* Change :  Added logging to mailer and a quick check to warn that the To address hasn't been set to test email sending script.
* Change :  Modified mailer to send log messsages to Mailer context in logging.
* Change :  Added a check to see if a definition has already been set in Wordpress jomres.php
* Change :  Improved a query in show confirmation regarding how it finds gateways.

* Fix :  Fixed a notice that appears when shortcodes are used in templates and there's no second argument.
* Fix :  Modified how tabs are shown (property config) so that they use random ids instead of language strings. The tab id must be unique otherwise the tab contents will not show.
* Fix :  Fixed issues where wrong table prefix was used in the installer to create sample data.

= Jomres 9.8.10 11/08/2016 = 

* Feature :  Added a FAQ to the administrator area.
* Feature :  Added manager area FAQ.
* Feature :  Modified Wordpress updating so that using the WP system to upgrade Jomres will trigger the web installer at the appropriate time.

* Change :  Improved sample property data and logic to ensure that the Trash Tables feature can be used in the installer.
* Change :  Modified error reporting level in installer.
* Change :  Ensured calls to 07020 ( menu badges ) are done only once.
* Change :  Resolved a duplicate call problem in cpanel.
* Change :  Modified logging class to reduce the number of queries.
* Change :  Added logging to admin.php
* Change :  Changed the point that logging is starts so that we can include the username where available.
* Change :  Added a new implode function that gives us more control over input validation.
* Change :  Improved contact owner script to use new validation js.
* Change :  Improved booking form input validation responses.
* Change :  Set the minimum_deposit_percentage default to 0. Thanks Ally.
* Change :  Removed and disabled pattemplate caching feature settings, as they don't play nicely with template overrides, specifically property type or property uid specific templates.

* Fix :  Fixed a notice in insert booking script.
* Fix :  Fixed a notice in editguest script.
* Fix :  Resolved an issue where third party extras could show tax twice.
* Fix :  Fixed an issue where wrong date set in booking form when availability calendar links clicked.
* Fix :  Updated router.php to resolve an issue when JCH installed.
* Fix :  Fixed a problem with the Wordpress trigger script that requires a new version.

= Jomres 9.8.9 05/08/2016 = 

* Feature :  Updated Jomres to offer Joomla installer updating.

* Change :  Added booking balance output to emails.
* Change :  Added a default setting for minimum deposit.
* Change :  Added a default option to set currency code if it can't be found when trying to detect a user's country.
* Change :  Modified how extra names are saved so that they can be translated.

* Fix :  Fixed some notices in basic property details caused by a property not having rooms or accommodation tax set.
* Fix :  Resolved an issue with js not being loaded if only jomres shortcodes is installed (and not jomres search widget too).
* Fix :  Resolved a number of notices.


= Jomres 9.8.8 01/08/2016 = 

* Feature :  Added an option to disable sending emails to managers on errors, expanded notes regarding logging.
* Feature :  Added the ability for Jomres to send logging information to a remote syslog server.
* Feature :  Added functionality to list log files.

* Change :  Turkish language file added to system, many thanks Sarper
* Change :  Spanish, Italian and German language files updated.
* Change :  Tweaked the new user language string sent when a user is created on booking to be function agnostic. Allows us to use the feature for other things.
* Change :  User creation process, typically used when non-registered users create bookings, changed to use email addresses instead of trying to create usernames based on the guest's names. This is because the regex used to determine the username fails to work properly on non-latin alphabets.
* Change :  Previous database audit messages are now saved to logs.
* Change :  Added some friendly notes to property creation.
* Change :  Modified how gateway plugins are validated to allow another plugin to work differently while still maintaining security.
* Change :  Added a new Site Configuration setting that allows a site manager to configure a Minimum Deposit amount. This is required because if commission is charged by you and a third party, then the deposit cannot be less than your commission + third party's commission.
* Change :  Commented a "throw" because spiders are causing error emails to be sent.
* Change :  Removed some redundant data from a call to process payments.
* Change :  Improved installer to test for dirs before attempting to create them.
* Change :  Modified the installer so that failure to create jomres_root.php isn't fatal. It's a silly thing, created to satisfy the Wordpress directory managers, but many servers don't like you to create files in the root for whatever reasons. 
* Change :  Added old-style router file for users who prefer the pre-9.8.0 urls ( Google love ).
* Change :  Modified gateway configuration functionality to allow custom code.
* Change :  Jomres Extras removed from list of our partners as we are integrating their plugins into our own library.
* Change :  Added a check to ensure that a gateway hasn't been uninstalled before attempting to show it in the booking confirmation page.
* Change :  Added property uid to data returned by the payment reference class.
* Change :  Added logging for common curl functionality.
* Change :  Updated the booking engine to store arrival/departure dates for further use by modules etc.

* Fix :  Fixed front and backend Bookings charts.
* Fix :  Fixed a notice when generating log files.
* Fix :  Fixed a bug in property type specific templating.
* Fix :  Improved booking engine, some arrival dates from calendar links were being set incorrectly due to a notice fix in the 9.8.
* Fix :  Resolved a notice in j06005list_gateways_for_invoice.class.php
* Fix :  Modified how guest details are saved from the booking form to work around an issue where if polylang and permalinks were in use, guest details might not be saved to the temp booking data.


[Changelog](https://www.jomres.net/support/changelog)

== Translations ==

* Jomres includes 31 language files in varying states of translation as we rely on members to feed back their versions of the language files. It includes a [variety of methods for translation](http://www.jomres.net/manual/developers-guide/53-customising-jomres/editing-labels-languages) allowing you to have different labels for different property types, and even individual properties.

*Note:* If you would like to contribute a language file back to the project please email us at sales@jomres.net, typically an update to a language file will earn you between 1-6 months added to your license, depending on the amount of translation that was required to bring the language file up-to-date.

== Additional Info ==

Upgrades are best performed through the Jomres Updates menu option in the administrator area.
For the full Jomres changelog please see https://www.jomres.net/support/changelog

== Changelog link ==
For the full Jomres changelog [please click here](https://www.jomres.net/support/changelog).

== Post Installation recommendations ==

The Jomres developers are big fans of Bootstrap 3. It's a responsive CSS and Javascript framework that's easy to learn yet offers a great deal of flexibility, flexibility that you will appreciate as you customise the site for your clients or yourselves.

We recommend that the first thing you do is find a Bootstrap 2 or 3 Wordpress template that you like and install that on your site. Next, go to Jomres' Site Configuration area and set "Use Jomres Bootstrap templates in the frontend?" to Yes and set "Bootstrap version" to Bootstrap 2 or 3.

This will ensure that your WP template and the Jomres templates play nicely together.

== Credits ==
* Many thanks to [Aladar Barthi](http://www.jomres-extras.com/) for your support of Jomres users, and [Rodrigo Rocco](http://jomres-plugins.com) for your continuing efforts in supporting Jomres users on the forum!