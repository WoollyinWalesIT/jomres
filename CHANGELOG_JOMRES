Jomres 7.5

Added a new feature that offers integrated help on many of the top level pages in the frontend of Jomres. As this more suitable for property managers we will be retiring the old Manual plugin as that had too much information which wasn't relevant to property managers.


Removed an important hard coded maptab id by mistake, by overwriting an array index. Restored that now.
Fixed an odd bug where some, valid, VAT numbers wouldn't be validated.
Removed some code from the integration script that prevented caching, as the issue it's trying to fix is negligible.
Fixed a bug new to 7.4 where the profiles list was empty.
Property area activities added to a query in the basic property details class.
Modified the custom field handler to cope if the appropriate xreference field is empty.
Moved review and growl messaging javascript into the consolidated minified javascript files.
Disabled a growl popup that has been left in a depreciated javascript function because it causes errors when popups are disabled.
Combined two dynamically generated files into one.
Added new language translations to Polish lang file. Many thanks Patryk.


Jomres 7.4.0

Added a new feature called array cache, which significantly speeds up Jomres performance.
Added the new Jomres Media Centre, which improves the image uploading process. This is available to the frontend for uploading images to properties, and in the backend for uploading room type and property feature images.
Added a complete new global rooms feature that works like business features. This will alow managers to select room features when editing the room, without the need to create them first in the room features tab. The room features tab and functionality is still kept, so managers can still add their own room features too.

Fixed a bug where new user's bookings weren't always being associated with their user ids.
Modified the input filtering functions so that ampersands aren't double encoded.
Removed some unnecessary stripslashes calls.
Removed a couple of no_html hidden inputs that were causing black bookings to give white pages on step 2.
Fixed a bug where language choice selection wasn't being saved, as a result of code hardening.
Added bootstrap multiselect to Jomres.
Changed how the exchange rate dropdown is rendered to fix markup.
Removed a no-longer needed style from Jomres bootstrap css file.
Business features feature has been changed, so now we can assign more property types to one feature instead of duplicating it for each property type where we want to show it.
Added a cms specific change to ensure we're getting the SEF setting correctly.
For Joomla 3.1 installations we've removed Jomres native IDN, as J3.1 has this feature now.
In database.php, we've added query caching. It`s not visible when one guest is visiting the website, but when more are doing it at the same time, queries will be executed once and results provided to all, instead of executing the queries for each guest.
Found and resolved an issue on the booking form when rooms list style is enabled. When deselecting rooms, they were not unlocked.
Added Superior as image, same size as stars. This will make it display better. Also add S to property list list with maps, module popup and ngm module output.
Fixed a minor issue where featured listings css class was not added to the next results displayed when live scrolling.
j16000save_custom_field.class.php moved into the Custom Field plugin, where it belongs.
Modified several default language files so that instead of referring to "Room features" we're using language more appropriate to the situation.
Added a JSON library to adapt to the situation where CERTAIN linux builds do not include JSON in PHP 5.5. It's a pre-emptive strike against silliness.
Tweaked the installer to adapt to the new property type changes, tricked an older upgrade function to not trigger if a new column already exists. 
Added room abbv to showroomdetails output
Modified the tool tip room type template.
Updated the Polish language file, many thanks Patryk.
Added a variety of changes that reduce the amount of calls to gmaps, updated galleria slideshow, and some layout changes for empty tables to improve how they look.
Improved how the immediate pay plugin shows the paypal icon/link.
Removed the hr from the tooltip popups. (Bootstrap)


Jomres 7.3.2

Modified user booking page to ensure that correct prices are shown.
Fixed a counting error in the view invoice script, ensuring that the Amount Already Paid var is set correctly. Thanks Marinhio.
Removed references to no longer used Jomres token functionality.
Resolved an issue where no bookings could be taken. 
Removed contents of $_SERVER magic var from the session file. 


Jomres 7.3.1

Modified the jomres_decode function (the output filter) as it was allowing users to inject javascript into certain pages.
Modified the input filtering script. Ensured that the default value that's passed to the jomresGetParam function is used to set the type of variable that's passed, this is used later on to decide how we'll filter the entered value.
Modified the Edit Profiles function to do nothing if the profile id = 0
Modified the input filtering script. Ensured that the default value that's passed to the jomresGetParam function is used to set the type of variable that's passed, this is used later on to decide how we'll filter the entered value.

Modified show plugins script so that if the license isn't valid or entered, they buttons show but in their disabled state. Makes it more obvious to new users how plugins are obtained.
Fixed a bug in the confirmation letter where qr codes wouldn't show because of image sizes in the html.
Tweaked the confirmation form printout so that quote marks are included where appropriate.
Modified the Jomres mailer functionality to set the image name in the email body, rather than a generic name.
Modified the subscribe script so that only a specific set of circumstances will allow it to proceed, otherwise there's a chance that the script will go into an eternal loop.
Tweaked the layout of the jq ui frontend_view_invoice.html template file.
Fixed a typo that prevented switching from C to F in google map weather layer.
Modified the Approvals menu script to only show the option if automatic approvals are disabled (IE site managers have to manually approve properties).
Simplified the backend a little more so that if Advanced Site Config is set to No then fewer options are viewable.
Removed a recommendation from the Getting Started text that referred to adding a login option. It is redundant now as we've got a link in the Jomres main menu that goes to that form (because people didn't read the getting started and didn't add the module).
Added a new option to site config to set the site into production or development mode. Setting it to development allows us to enable error reporting.
Renamed idna_convert class to jomres_idna_convert because several other Joomla components use this class, and we want to prevent fatal errors because they also include the same class.
Modified invoice output to ensure that the correct outstanding amount is shown.
Tweaked QR code generation and display to ensure that it images in emails work in all devices.
Property name added to module popup.
Changed how Gmaps is called, added gmaps to head of the page and instead of calling it "as needed", we're calling it right at the beginning of the run. When called "as needed" it was loading the gmaps source multiple times which prevented the maps from loading properly.
Solved a problem that's created when all layers are disabled in gmaps.
Modified the printable_invoice.html template to include arrival/departure dates snippets.
Replaced references to html_entities_decode, instead sending the strings to jomres_decode function, which parses strings before output.
Removed some string replace quotes code that's no longer needed.
Modified show property header so that meta data is passed through jomres decode before display.
Modified edit property so that output data is NOT passed through jomres decode.
Modified the call to the layout variable to ensure that it's sanitised properly.
Modified generate control panel script to use the showtime variable.
Worked through the code to ensure that all inputs have been properly sanitised, where appropriate.
Removed several usages of the jomres_decode function that we believe are no longer necessary.
Fixed a bug where bookings from gateways wouldn't be associated with existing users, if they hadn't booked before.
Modified booking insert stage so that if the user isn't an existing guest then the first/surname they entered is used as a reference to who made the booking.



Jomres 7.3.0

Added new functionality that allows Jomres to communicate with the VIES webservice and validate VAT numbers saved when a user enters their account details. (Euro properties only)

Added the qr code library to the core system, and associated code to the email functionality to allow us to include images in emails. 
Added "office use" qr code, which prints a qr code to the edit booking page, and "gmap directions" qr code for users to get directions to their property, to the confirmation email and confirmation letter pages. The QR code in the email is intended to give receptionists a quick way of accessing the booking information page in Jomres, allowing them to book guests in/out while on the move.
Added the ability for the booking form to receive a coupon code via the url. The Coupon code plugin has been updated to allow managers to show lists of coupons with QR codes. These can then be handed out to guests who'd scan the code into their phone and immediately benefit from the discount code in the booking form.
Added gmap qr code to property header for users who want to get directions.

Edit my account form changed, now the region input is a dropdown, not a freeform input.
Modified the booking engine so that the guest region is now a dropdown, rather than the free-form'd input used previously.
Added region dropdowns to the guest admin page(s).

Added new functionality that allows us to offer to import tax rates for all of the EU.

Added a number of changes that allow property managers to store the vat number associated with the property, and managers/receptionists to add a VAT number to a guest's details. (note : guests cannot currently be offered VAT free invoices for bookings, that's specifically disabled, but the code is in-situ to achieve that if desired).
Added functionality to add VAT numbers to the invoice printouts in the frontend.
Added code to help us to determine if a guest should or should not be charged VAT.
Added a new tab to the property configuration area where the property's business details can be added, making them distinct from the property's location. Changed Site Config so that the site business address details country and region are chosen through a dropdown.
Added some changes that allow us to associate a tax code with a commission rate.

Modified the subscription functionality so that it doesn't need the manager to re-enter their details again, fixed an issue where invoices wouldn't be saved (due to our new changes).

Modified functionality of the og code so that it's added to the head of the page instead of the body.
Modified the invoice view to have rows relating to recurring prices added to the template as a snippet from another template.


Added a tweak to allow redirection directly to urls when the active property is changed
Improved a new change that saves space at the top of the page depending on whether timezone/language dropdowns are enabled in Site Config.
Modified the grand total figuring to exclude init totals that're < 0, because they're payment line items which will cause the grand total to show incorrectly.
Added no cache headers to integration.php to prevent IE's developer tools causing problems.
Tweaked some autocomplete = off in inputs to lowercase. 
Changed how a new line in the invoice has the grant total of tax calculated.
Improved the invoice output a little. Commented a couple of columns in the list invoices page to make it fit better, and made the view invoice page only show recurring items if the recurring total is > 0.00
Updated phpmailer to mailer 5.2.6. Made older mailer class obsolete.
Changed how the add your property link is shown in the main menu, so that non-managers can also see that option without the site manger needing to add a module, if they don't want to.
Added some new changes to the printable invoice so that they also show the new grand total outputs.
Removed BOM from a number of files.
Corrected a language string that incorrectly referred to an older implementation of Jomres that no longer exists.
Added nusoap library to Jomres.
Added a new minicomponent that'll return the region dropdown, intended for use via ajax.
Changed the show guest details script to find the region name using the find_region_name function.
Disabled the Jomres caching switch in Site Config. Given the dynamic nature of the system, there's too many things that can change so it's better not to use it atm.
Renamed the Venezuelan region Dependencias Federales to Territorio Insular Francisco de Miranda
Added a number of changes to fix an issue where sometimes the global editing mode wouldn't work in the frontend.
Prevented pathway script from calling basic property details class when it doesn't need to.
Modified pathway functionality so that the urls are sef'd.
Updated the de-authorisation procedure to ensure that manager ids are also removed from the manager/property xref table.
Tweaked the jrportal functionality that calls 07010 (which is mainly used to insert orphan commission line items) so that if the booker is a super manager, then their details aren't used for raising commisssion items.
Added a check to see if the manager trying to log in hasn't got any properties. If they don't, then we back out gracefully.
Added arrival/departure date output to the invoice.
Changed how external urls are filtered before they're shown in the property header.
Changed the point where the shopping cart is emptied after bookings are created.
Ensured that the javascript inclusion plugin imports the IDN conversion script as in some edge cases it wasn't being included beforehand.
Improved the cron invoice logging so that the email address is readable.
Added some changes that (again) prevent double clicking when making payments to prevent the blank emails that some people get.
Added a check to the manager's first run script to ensure that only super property managers see the Wizzard.



Jomres 7.2.19

Reversed the previous change that prevents double clicking as it does not work on Chrome. Special release for this as it's a fairly major issue.

Jomres 7.2.18

Added a new site configuration tab that allows you to enable/disable Google map layers. The choices are Weather/Traffic/Transit/Bicycle & Panoramio. You can also use the same tab to enable/disable the default POIs.
Modified Jomres to add an S after the property header and property list stars, to indicate Superior properties. Added code to make this distinction when editing the property details page.
Added some tweaks to the booking confirmation form to prevent users double clicking the submit button.
Added lines that clarify grand total tax, and grand total ex and inc tax, and the booking number, to the frontend invoice output.
Added options to gmaps to disable the POI layer (so that potential guests can't see your competition on the map).
Added custom language strings to the recaptcha contact_owner.html templates, lang files and minicomponent.
Added metakeywords option to edit property details.
Added noindex,nofollow to the contact owner and booking form pages to prevent spidering on specific pages. Also added code that allows more meta tags if we wish.
Added a function that allows us to get invoices for multiple properties.
Added the Catalan language to the system.
Added a warning RE max input vars to the control panel.

Added new language definitions to Polish language file, many thanks Patryk.
Tweaked how the cron log is shown. dd was actually the week number, now it's the date.
Replaced calls for the function that calls mrConfig with a reference to this->mrConfig. (Booking engine).
Fixed a path to some images in the ratings css.
Added a check to see if JRAJAX is already defined before defining it.
Added some code to check and see if the input filter class already exists.
Modified the basic property details class so that we can pass the property type to the property list.
Tweaked the room type list in Normal editing mode so that SRP and MRP room types are only shown when appropriate.
Added a change to the basic_property_details class so that only room types for this MRP/SRP are pulled out. Makes listing room types when editing tariffs clearer.
Updated our star image to be a larger, golden star.
Improved the exchange rate class file so that it doesn't try to download exchange rates so often.
Modified some code to reduce the amount of times a tariff's periods are called to speed up generation of the rooms list.
Modified sanity check code to see if it's an ajax call. If it is, there's no point in running the check.
Removed a superfluous semi-colon that IE10 has taken a dislike to in the booking engine.
Fixed a bug where if max people in a room was > 10, the single person suppliment wouldn't be set correctly.
Modified edit_my_account.html template to improve responsive layout.
Changed Ukrainian currency code from UAG to UAH
Tweaked handlereq so that the address fades in once, not twice, when a room has been selected.
Tweaked jomres_cron to take into account new IDN related changes, specifically in relation to non-IDN domains.
Added thead/tbody to list_bookings.html to resolve a javascript issue with tableTools javascript.
Modified top template generation so that if lang/timezone/editing mode dropdowns are not available then space at the top isn't used up.
Resized the star image and introduced a small css change to make the S in superior match it's related star in property header.
Fixed recaptcha configuration tab information text.
Fixed an issue where Cron jobs weren't always being triggered correctly.
Improved the backend list invoices script to show guest names, even if the bookers are not registered users.
Improved the growl javascript popup, fixed an issue where the css gradient for jq ui wasn't showing properly, giving a two tone look to the popup if it takes up more than a couple of lines.


Jomres 7.2.17

Added a new switch to allow users to swap between jq 1.8 and jq 2.x
Updated jgrowl and jquery rating javascript libraries. On at least one customer the older libs are triggering js errors due to $.browser not being available in jquery 1.9 and greater, and we're using jq 2.0.

Added <meta property="og:image" content="{IMAGETHUMB}" /> to property header templates.
Updated the Montenegro regions.

Jomres 7.2.16

Updated jQuery library to jQuery 2 as it's faster. Downside of this is that older versions of IE (6/7/8) and v old versions of Firefox etc are no longer supported. We will watch the tickets to see if we need to add jQ 1.9 and an administrator area switch that'll allow those older browsers to work.
Modified save review and save report so that admin emails are sent when a review or report is entered. 
Added a tap to call button to the (bootstrap) property header template, which is viewable when on a phone. Allows phone users to call hotels directly.
Updated the plugin manager so that the "update all plugins" button will only show if the license key is valid.
Added guest address information to the hotel booking email. This has been added only to the output array, it hasn't been added to the template itself, it's for designers to use if they wish.

Added country/region/town to the jomresHTML class to prevent Bootstrapped pages from trying to make them into Yes/No buttons.
Passed region through cms specific string safe function to aid searching translated region names.
Added a new helper function genericLike.
Added a new find region id function to the installer, specifically for the installer. The functions.php version of this function has recently had a call to a Joomla function added. This creates a problem during installation. Rather than making the find_region_id ALWAYS check for the existence of the CMS specific function every time it's run, we'll duplicate the function here instead. find_region_id has the potential to be called many times, so the fewer calls we can make to check if a function exists when 99.99999% if the time it does, the less load we're creating.
Added a flag to the send admin emails function that switches off the contents of $_POST.
Updated Swedish language files.
Tweaked language for the System log name, the security scanner I use to check the safety of language files throws a false positive on it's old name of System log. Changed to Misc now.
Tweaked the Booking Rooms tab to hide the rooms list style if the property is an SRP.
Tweaked the booking engine slightly. When amending a booking, SRPs with fixed period bookings and fixed arrival dates were finding that the stay day period wasn't set, forcing users to reselect the appropriate number of days for the booking before they could proceed. Used some built in variables to reset the stay days in the event that this happens.
Fixed a minor bug with the Add Review label for input set 4.
Changed how session ids are used. These are used to build our own session data, and we've added a cms specific function so that we can reuse J2.5+ session ids instead of the PHP session.
Added old Jomres SA files to the obsolete files list. Nothing's been done to this in quite some time, as everybody uses Joomla.
Improved how the booker's username is added to the database when a booking is created.


Jomres 7.2.15

Fixed the breadcrumb repeating problem. Thanks Raphael Vilela.
Changed the name of the administrator menu used in installation into the administrator area.
Improved a condition that prevents Jomres from loading the jquery core js files if we're running J3.0 or J3.1
Fixed a typo that checks for region or country table existence in the installer.
Added a page-header class definition to booking form template (bootstrap).
Changed an initialising option that defines minimum interval as an intentionally abnormally high figure, to 1.
Changed how jr_gettext figures out if we're in the administrator area.
Updated German, Italian and Hungarian lang files with some new improvements.
Tweaked property list to ensure that the featured listing class is used properly.
Added new code to help users who're upgrading from J2.5 to J3.x. Modified the installer to remove admin.jomres.php and install jomres.php to the administrator/components/com_jomres directory. If you upgrade from J2.5, you will find that you cannot access jomres.php until you run the 7.2.15 version of install_jomres.php
Tidied up a line in the javascript minicomponent that no longer makes sense within the context of J2.5/3.0.
Removed a redundant check that was causing the price summary to sometimes not show due to the order that the minimum interval is calculated.
Tweaked the booking class to show the price in the allocation popup only if a price variable is set and the tariff mode is Average.
Added a caveat in the show confirmation script so that the email address is only updated if the user isn't registered.
Tweaked output so that booking form summary "number of days/weeks" etc is updated correctly. Previously, if Advanced tariff editing is used, and prices stored weekly option is set to yes, the "weekly" price would in fact show the nightly price. A little confusing so this will clarify that output.
Tweaked a method so that pricing output figuring is done by an already existing method.


Jomres 7.2.14

Fixed a bug introduced in the last version that was introduced by some new functionality that helps us deal with IDNs.
Tweaked the position of a patTemplate tag in the plugin manager.

Jomres 7.2.13

Added Joomla 3.1 specific changes. Jomres now works on Joomla 3.1 (beta1, as that's what's available right now).
Added a new button to allow upgrading of all Core plugins on one button click.
Small fix for room names in confirmation page, room were displayed concatenated like name1, name1name2, name1name2name3 and so on instead of name1, name2, name3.
Template fixes, missing / in printable_invoice.html and a /td that shouldn't be in frontend_view_invoice.html in bootstrap.
Tweaked the property list so that if an array's index is null, we find the tariff name through another route.
Changed a url in the cron class to ensure curl calls are sent to the frontend, not the backend.
Fixed a typo that incorrectly set a variable (popup).
Used new simple_tariff_to_date_map variable to provide feedback on properties that use Advanced tariff editing mode, to tell people that they need to select a longer booking.
Disabled the minimum interval input, as it's no longer appropriate due to changes in how the booking engine figures out minimum intervals.
Further tweaks to IDN handling code to ensure that curl calls for cron jobs work as expected.
Changed how the External Link is constructed in the property header, and how it's displayed in the header template(s).
Added a random id to the js date picker so that jquery can use that id to reset the checkbox.
Cleaned up a couple of inputs in edit/register property types to change an input type (templates)
Modified idna url functionality to allow us to choose which method of encoding a url we use (stringURLUnicodeSlug), depending on Joomla's settings.


French lang files updated, many thanks Vincent.
Added Arabic language file to Jomres core.


Jomres 7.2.12

Fixed an incorrect file path in the obsolete file handler.
Fixed filters in show invoices scripts.
Tweaked a new condition that causes some prices to be set to POA if arrival/departure dates are never shown in search module inputs.
Made a small change to the booking engine so that if tariffChargesStoredWeeklyYesNo is to yes, and tariff mode is set to Advanced, then prices will be output correctly. Adds a distinction for those users who've swapped from tariff charges stored weekly/advanced to Micromanage mode. The option is not valid for micromanage users.
Added some part-translated Swedish language files to the Jomres Core system. Many thanks Marinhio, hopefully this will save you hassle when you next upgrade :)
Added functionality to allow Jomres to detect if we're on a punycode (IDN) url, and to convert urls internally to adapt. Without that adaptation ajax will not work in IE because IE thinks that you're attempting cross browser scripting.
Added a space before a string in discount output.
Tweaked output of property details main tab so that Tour properties show the property type text instead of the non-existent room type icons.
Removed not required text from the show tariffs templates.
Improved code that adds property type names to property details main tab so that the property type is translated.
Tweaked list properties. If the installation is set to be a single property installation then as before we will redirect straight to the booking form, however we'll append arrivalDate if it's in the $_REQUEST global variable.
Tweaked edit property page so that the change country warning isn't shown when the site is configured to limit registrations to just one property.
Added a missing <tr> to jq ui dobooking_srp.html
Changed how filter properties works. A couple of users have reported that their installations are reporting that PHP5.3 specific functionality is triggering a fatal error on their installations. PHP5.3 should support anonymous functions, however it appears that some installations don't and report a fatal error so we've tweaked some new sorting code to resolve that.
Fixed a faulty link in list guests invoices script.
Layout tweak to list commission invoices script.
Replaced an icon in the bootstrap toolbar class.
Added jomresDecode to guest's names to allow apostrophes to show properly.
Added a few more tweaks regarding region name translations.
New functionality to render safe urls has broken searching for All regions/towns in the built-in search feature, so we've added a clause to resolve that.
Jquery ui badges mis-behave when using gradient backgrounds, so we've removed the gradients.
Tweaked a javascript void in the cookies.html template so that it doesn't report an error.


Jomres 7.2.11

Added new functionality to disallow re-use of email addresses if the system is configured to create new users when bookings are made.

Improved how some tariff type filtering is done in the booking form.
Filter properties script updated to work with translatable region names.
Tweaks to guest list invoices minicomponent.
Prettified validation in jq ui booking templates.
Updated the version of jquery validate we use
Added itemid to sitepage no sef url.
Backend confirmation letter moved from backend to frontend, so that the Template Editing feature can be used to style it.
Modified show tariffs 01025 script. Allows us to differentiate between Normal and Micromanage modes to tweak the layout slightly.
Fixed the path to the large image in the module popup script.
Tweaked the get_property_price_for_display_in_lists function so that it also checks the temp booking details variable for an arrival date. Ensures that prices shown in properties loaded by live scrolling feature show the correct price based on the date of the previous search.


Jomres 7.2.10

Added queries and html to templates to ensure that the property's fax number is captured in the edit property pages.
Modified the booking engine to ensure prices are output in the price estimate according to the day/week/month settings.
Improved the new tooltips popups by using a new css class. Also removed month picker dropdown if property is an SRP
Fixed a bug where agent details weren't showing correctly.
Added a new language string to language files.
Improved dashboard tooltip classes.
Modified some popup output to ensure that they obey the "Use Jomres Messaging" switch.
Fixed some incorrect definition names in the reg link and search class menu options.
Fixed a typo that prevented property type names being translated in list properties.
Updated some missing strings for touch templating.
Modified sent emails. Added the guest's email address to email text so that those users who's system setup will not allow guest emails to be set as the return email address will still see the guest's email in the body of the message, and use that.
Updated the version of datatables used by Jomres.
Changed the Madagascan currency symbol.
Modified how chains of tariffs are found, fixes a case where tariff counts for days weren't done correctly internally. This part of the code is used to determine if the tariff map has dates for all days in the booking's date range.
Tweaked the BS Cookie template.
Changed how some routing is done, changed our code to ensure it uses the same code that Joomla uses (j2.5 & j3) to aid string comparisons. Improves searching on translated region names.
Improved edit property templates, added inputs for fax numbers.
Corrected a lang definition name used in touch templates.
Removed Joomla 1.6 and 1.7 cms specific functionality. These versions of Joomla are no longer supported and Jomres will not run in them.
Tweaked some new functions to ensure we check to see which script is running first. If we're running the installer some Joomla functions will not be available.
Resolved an issue where regions were showing as region ids in confirmation letters.
Changed how search form submission urls are generated, helping to make Jomres even more SEF friendly.
Changed the template array index for the submission url to SUBMITURL
Changed the confirmation email to the hotel to set the From name to be the guest's name, not the hotel's.
Added some changes to allow Jintour to insert a tab into the edit booking page, for both managers views, and guest's views.




Jomres 7.2.9

Modified a previously removed switch. Put it back in, but changed how it works. Previously we'd removed the "Enable currency conversion" option, because for the shopping cart to work the conversion functionality ALWAYS has to be enabled. Some people didn't like this as they only wanted prices output in one currency, nnn.nn instead of nnn.nn (nnn.nn). To get around this user conflict we've re-added the switch, but changed what it effects. Instead of using it to switch off the conversion functionality internally, we'll leave the functionality enabled, instead we're simply using it to tell the "output_price" function to not output the price in the nnn.nn (nnn.nn) format.
Added some code to ensure that tooltips show correctly in module popups in bootstrap.
Fixed a css class bug in the srp calendar. Thanks David!
Tweaked the UI availability calendar so that Jintour can block out dates.
Added default tooltip popup code for new tooltip class.
Modified flat rate functionality, ensured that the tariff map is always created when calculating prices.
Tweaked list properties script to add telephone number to output.
Added functionality to support having a cms specific output date class that'll use the Joomla language file's settings instead of property configuration settings.
Updated microdata in show_property_reviews.html
Tweaked a path to a loading gif.
Tweaked a few urls in the Jomres code to ensure they're parsed through jomresURL function.
Updated the Spanish language files, many thanks David.


Jomres 7.2.8

Set the default tariff model to Average.
Tweaked flat rate pricing to ensure that the correct tariff uid is selected internally if the property uses Flat rates but micromanage tariff editing.
Modified the booking engine so that the add room and remove room buttons have different icons and colours. (Bootstrap only)
Tweaked the booking engine to deal with an obscure minimum interval issue.
Modified the non-verbose tariff script to show less data, makes the tariff list more readable in the property details/tariffs tab.
Fixed a missing span in the show reviews template.
Added a change that removes Joomla's "base" tag from the page's output. We've updated jquery ui to 1.9.2 and it's tab generation code has changed. The base url is used and if the base url is wrong then the tabs will reload the entire site's content. This tweak gives us forward compatability for when J3's jq ui library is updated to 1.9.x, so that's nice.
Added some wells around the rooms list to improve the output in bootstrap, and we now hide the available rooms div if there aren't any available rooms.
Removed some input filtering that was duplicating some filtering that'd already been done and causing apostrophe's to not be entered properly into the db.
Removed a condition that prevented the availability calendar from showing in the booking page.
Changed the tooltip class as the older beauty tips no longer work in Jq ui 1.9.x
Moved tooltip trigger code into jomres.js
Improved layout of list templates, and tweaked the show reviews page so that google will render the microformat data.


Jomres 7.2.7

Updated jquery ui javascript and css libraries to 1.9.2 as that's required by the new edit in place functionality.


Jomres 7.2.6

Modified booking engine so that the duplicate tariff id check is only done for micromanage tariffs, so that Advanced tariffs, duplicates are returned to the booking form.
Tweaked the price calculation so that the estimate is only performed on micromanaged tariffs in average mode. 
Minor changes to logging to make the booking form log more readable.
Modified output of booking details to reflect a paid invoice's status.
Small tweak to rooms list normal mode tariff editing page.
Added commented out code to show how to add that availability calendar to the property list.
Removed the option to enable/disable currency conversion
Added new code that looks at all tariffs for a property. If ALL tariffs have a specific arrival day of the week set, then the booking calendar popup will only allow those days of the week to be chosen.
Added x-editable to Jomres, which will replace the older editable jquery plugin, as it works with both jq ui and bootstrap.
Removed a defunct call to jrportal.js from fe_stats.
A raft of changes to support new inline text editing functionality. Reduces the number of items that can be changed through the editing mode, to make the feature more user friendly (and less error prone due to mis-use).
Edit show room details so that room name isn't translatable in tabs.
Tweaked the performance monitor to use multiple points with the same name.
Tweaked the pathway to not show if editing mode is enabled.
Tweaked the basic_property_details property details queries to provide a small performance improvement.
Modified the jr_gettext function to call the jr_get_defined function less often.
Added a feature to allow us to switch off region name translation functionality. Due to there being something like 4,000 region names in the db, translation of regions can take up a great deal of memory. Slower machines may suffer so we'll offer people the option to forgo this feature,and it's switched off by default.
Tweaked the J1.5 router.php to ensure that it uses jr_gettext when building urls.
Modified the booking engine, improved how pricing is calculated by making use of the room allocations and tariff map arrays, which are new. Makes the te_setAverageRate method much more readable.
Added some js to the booking form's javascript to close old growl popups before new ones are shown.
Tweaked the new editing mode scripts to ensure .js and .css files are only added to head if editing mode is on (cos the .css file borks the jq ui calendar css, among other reasons).
Added property type to srp's property type tab.
Tweaked bootstrap editable to remove datepicker related css.
Modified the reviews template to include microdata.
Tweaked the tariff estimation code to let it use new functionality to provide pricing estimates.
Improved the booking engine and how tariff types are filtered out to ensure that only the appropriate tariff types are filtered out on room prices being zero.
Added CURL agent to CURL calls.
Modified the search button so that it will use a bootstrapped button when bootstrap enabled. (Search modules).
Updated copyright information.


Jomres 7.2.5

Modified the new badge generation script, stop it from showing on the add plugin page as that script already uses plugin info scripts and an error will be generated and the plugin will not install.


Jomres 7.2.4

Added a new feature that property managers can use to manually approve newly created properties. Until a property has been approved a manager/super manager cannot publish/unpublish a property.
Added new functionality to add badges to administrator menu, and three new scripts to generate items requiring attention badge numbers.
Added a feature to the booking engine that allows Jintour to set the "fully booked dates" javascript array, effectively allowing Jintour to block off calendar dates in the booking form calendar for those dates that don't have a tour available.
Created two new js files, a consolidation js file and an minified version of that file. Many of our .js files have been static for a long time so it makes sense to consolidate those files into one, smaller file.
Added commented out code to contact owner template to show you how you can theme the captcha code.
Modified the booking engine, if using micromanage, then any tariff where zero appears as one of the prices, then the entire tariff type (micromanage tariff) is excluded as a possible choice.

Added a clearfix to the bootstrap basic module output so that the module layout works properly.
Added a super secret, never to be mentioned option to the get_property_module_data so that a calling script can define template paths and template names.
Modified the method that builds the language dropdown so that it can also be used as a configuration option.
Added a configuration option to property config - misc to allow us to set the default language for the property. Not used as yet, but there are plans to use it later.
Added a new 05100 optional minicomponent trigger to the end run of jr_gettext. Currently disabled.
Disabled some joomfish cookie settings as they're N/A in J3.
Modified how the session file is detected.
Modified the slideshow script. If the slideshow images haven't been uploaded, but the main property image exists, then use that instead.
Fixed a bug where new users couldn't be created in J3 when creating bookings.
jrportal's js file consolidated into jomres.js
ui_availability_calendar modified slightly to take into account the possibility of room numbers being changed.
Modified jomres/jomres_config.php to add a new option "property language" and set the default to en-GB.
Modified how regions are constructed as dropdowns, changes the region stored in the DB from the region name to it's ID. Makes cross/language functionality work in the edit property page.
Tweaked the GifCreator to ensure that we're not throwing exceptions to the global scope as we're not using the namespacing.
Updated the prepGeographicSearch function to use translated numeric ids in regions.
Added a missing definition's jr_gettext call to the editpfeature admin script.
Updated ui availability calendar so that it uses random ids, meaning that more than one ui calendar can be used on a page at a time.
Added a clearfix to improve the basic module wrapper display.
Added a missing jr_gettext to the published property feedback message.
Updated the Polish lang files, many thanks Patryk.
Modified the search functionality to search for both region ids and region names in the propertys  table.
Added a new "migrate region names to region ids" function, but will leave it disabled for now. New Jomres functionality forces us to store region names as the database region ids, however we don't want this new functionality to negatively impact users with existing data so search functionality has been updated to search both region names and region ids in the jomres_propertys table. For now we BELIEVE that this will be sufficient to provide a painless upgrade, however we'll keep this migration function in our back pockets in case we find that users benefit from migrating their properties to region ids.
Added room name and number information to confirmation page.
Modified the add plugin functionality. While testing plugin updates it's occasionally necessary to install them through the third party installer to test table update functionality, however previous to this change it wasn't possible to do.
Modified showplugins to use include_once instead of include, as new functionality might end up with scripts including the plugin info scripts several times.
Modified the mailer to change email body's to html so that urls can be linked properly, but only if the email doesn't already content http-equiv code.
Added a change to geocoder to limit the number of decimals used to define the property's location. Without this some properties generate long strings which are too long for the lat/long columns in #__jomres_propertys



Jomres 7.2.3

Added a new feature where property list images are shown as gifs if configuration set to show them, and there are slideshow images. There is also an option to only show featured properties as gifs.
Modified edit my account functionality to allow uploading of images for users.
Added a feature where users can list properties for specific property managers (task is called view_agent). A new image in the property list quick info (taken from the image uploaded via the Edit my Account feature) links to a list of all of the manager's properties.


Removed the loading animation for bootstrap modal popups. Ugly.
A small fix for the dashboard to show the half images when clicking the dashboard menu also otherwise it shows the half images only when logged in and going to the default jomres page.
Modified property list so that if property description is shorter than the description limit, then ... is not shown.
Tweaked a module popup js function to ensure it only triggers if the property uid is set.


Jomres 7.2.2

Added functionality to the database handler that'll allow us to cope with 1and1's socket settings.
Added functionality to allow editing of css files through the template editing feature. Was disabled in the last version due to new template editing functionality, but has now been reworked.

Jomres 7.2.1

Removed a private class definition that was causing errors.
Tweaked the dashboard minicomponent to ensure that the date dropdown is shown if we're actually running the dashboard task.
Fixed an issue where Advanced tariff editing mode tariffs are showing that the min interval needs to be 1000 days.
Tweaked the currency format class so that the integer only price shows correctly on all server configurations.

Jomres 7.2

Modified the booking engine to make use of greater flexability offered by upcoming changes to the advanced/micromanage plugin when configuring minimum day settings. The new micromanage functionality allows you to set minimum days for individual days, in the same way that you set individual day's prices.
Added functionality that allows us to have Property Type specific templates.
Added a work-in-progress Thai language file to the Core system.

Changed a call to strtolower to jr_strtolower. Affects categories of the administrator area main menu, ensuring that non-latin characters are lowered correctly.
Tweak to ensure that users clicking on the dashboard link actually see the dashboard.
Added icons and minor layout tweaks to property details buttons.
Adding an experimental php parser function to patTemplate lib.
Updated codemirror lib to v2.34
Added old codemirror scripts to obsolete file list.
Modified obsolete_files_wrapper.html so that obsolete files list is collapsed by default. BS only.
Modified delete template to delete by id instead of template name.
Modified the getPropertyTypeDropdown function to allow blanks in the dropdown list.
Added a property type column to the custom templates table on installation/upgrade.
Modified how the custom template handler works, so that it's able to support property type specific templates.
Modified the getThisMonthName function. Solved a problem where month names are not displayed in the default dashboard
Improved feedback from booking engine to ensure that if the minimum interval isn't reached, then a message is shown. Provided popups to give users hints to how many days they should book for to get certain prices.
Improved list templates page to clarify new functionality's instructions.
Commented out two lines in the router that're causing J3 to throw an error when clicking on dashboard dates. Works around a minor-ish bug in J3.
Modified the Weak input filtering process slightly, apostrophes are changed to Right Acutes.
Added an mb_ucwords and jr_ucwords pair of functions.
Modified the administrator area generate control panel script to us jr_ucwords.

Jomres 7.1.4

Added a new feature so that site managers can configure the default property list view through the site config - search options tab.
Adding some experimental changes that'll allow us to switch languages in the administrator area.

Occasionally it's normal for the session file name to have not been created, added a check to temp booking handler to take that into account.
Added an option to reset the custom text class on the fly.
Changed how administrator editinplace functionality accepts languages. Instead of using showtime 'lang' it now accepts whatever's in the url.
Added a missing div to edit customer type jquery ui template.
Improved the bootstrap html in the plugin manager RE popups.
Modified how the logo is called in the management view.
Language dropdown removed from translation pages, as it's now added to the administrator backend as a whole.
Changed bc_is_even method, probably don't even need it now, and it lowers the bar for installation slightly.
Fixed a typo that was preventing the save to cart text from showing in the booking confirmation page
Removed header declaration from handlereq.php as it's no longer required.
Updated Polish lang files, many thanks for that Patryk


Jomres 7.1.3

Fixed a bug in the region import script which meant that the regions table was being populated with duplicate regions when install_jomres.php was run.
Fixed a small issue where SRP property type selection showed a definition instead of a string when tariff editing mode was advanced/micromanage.


Jomres 7.1.2

Added JOOMLA30 to the list of CMSs that allow us to use JFactory::getLanguage to detect the current language.
Changed the point that we trigger jomres_language to detect the current language in the administrator area.
Broke translation functionality into two new pages, translate locales and translate lang file strings. Added a new feature to check whether the user's a super property manager before attempting to use the translation features, and added the language dropdown to the three translation pages.
Discovered that new language file translation feature doesn't like the < symbol in language file definitions. Forced to modify those definitions to remove the <.

Jomres 7.1.1

Added more strings to be parsed through the jr_gettext function.
Fixed another bootstrap bug where changelog and warning popups weren't showing.

Jomres 7.1.0

Fundamentally changed how language strings are used in Jomres. We no longer use "define"d strings, instead strings are added through a new Jomres function jr_define. This allows us much more flexibility in how languages are used within the system. 
Added new countries and region functionality, allows users to add/edit/remove countries and regions without editing the countries.php file, as old countries/regions are now imported into the db.
Improved Language Translations feature, using newly created language handling functionality. Language Translations now allows you to customise ALL language strings from language files, for the current language context.
Added a new feature that allows you to export definitions created using the Language Translations page as a new file.

Tweaked custom template handler so that it works with bootstrap.
Modified countries.php to update the status of Netherland Antilles (now defunct). Added CW, AW and BQ, but will leave AN in-situ for now as existing customers will be using that.
Removed a check for tmpl in the url that stops the Availability link from being shown.
Some bootstrap tweaks that fix issues with BS 2.1 and hidden-phone definitions. Fixes table layout problems caused by J3B2 going to BS2.1
Changed how property name is found when generating property list in guest's list bookings.
Improved the new auto-detect the guest's country in the booking form feature, by allowing the property manager to define if this option should be used, or if the property manager should set the default country manually.
Modified common scripts in patTemplate, added a new variable COMMON_SOURCE_SCRIPT, which a user can add to a template file to help them figure out which script is calling that template.
Commented out some redundant code from the plugin manager templates.
Undid a previous change that was designed to allow free searching without setting module search options, as it was causing module output to be changed in undesired ways.
Full access control switch hidden in site config. People don't read what it does before enabling it. Basic access control still available.
Modified the composite property details notabs template to make it more obvious how data can be constructed.
Changed how urls are detected at startup, as Joomla's SEF plugins will mangle some urls.
Added list_normalmode_roomtariffs.html in the frontend dirs to the obsolete files list.
Added trim() to save property name 
Updated Polish lang files and countries.php to reflect Poland's 16 regions.
Fixed an issue where live scrolling was only scrolling once, due to a bug introduced in a v6.6.6 change.
Added a hidden input to site config that will automatically change the chosen mainmenu layout to "alternate" so that upgraders will be forced to use the new bootstrap main menu.
Re-enabled management view now that J3 has been released.
Updated jquery and jquery ui to 1.8.2 and 1.8.23 respectively to allow them to work alongside Joomla 3's jquery functionality.
Fixed some incorrect paths to template dirs for obsolete file checking, and removed some older .js files that are no longer used.
Added some changes so that plugin descriptions work on click in plugin manager.
Added radio button js to management bottom.
Updated basic_property_details to include property type string.
Updated a variety of output strings to ensure they're passed through jr_gettext
Small tweak to ensure that Jomres doesn't try to apply radio buttons to commission rate dropdown.
Added j00501editingmode.class.php to the obsolete file list.
Added a space between subject and hotel name in contact owner page.


Jomres 7.0.2

Added a couple of small changes to ensure that Jomres will install on Joomla 3, Beta 1.
Added img src to default html purifier options.
Fixed a bug where the invoices table wasn't being created due to a new feature added in the last version.
Added warning to administrator area if Beez3 is the default site template, and a few minor tweaks to other template files (Joomla 3)
Split dashboard functionality out into it's own 06000 script.
Added a ; to stop falang from throwing a wobbly.
Tweaked new dashboard functionality to allow switching on and off of legend and month dropdown.
Modified a file's name to ensure it includes the country in the file's name.
Default language context set back to Nothing.
Changed how the default bootstrap/non-bootstrap settings are chosen in site config.
Removed a defunct settings that was only used during beta development from site config setting array.
Disabled plugin shop in the plugin manager.
Improved the domain determining function.
Brought admin's first run instructions up to date.
Fixed an issue in rooms list caused by BS 2.1 changes.
Added guest types to BS radio exceptions.
Single person suppliment data isn't output in the booking form if it's disabled in configuration.
Added some changes to use the geo_located country instead of the old mrConfig country.
Fixed some edit guest inputs that were incorrectly labelled. (Bootstrap)


Jomres 7.0.1

Added a new feature where plugins which are required by other plugins are installed automagically.
Removed some depreciated "split"s and replaced with explode. Other changes to resolve JCE's strict error level settings causing problems.
Added a timed redirect to the bootstrapped plugin installation advisory page.
Added a space that would appear between "price" and "poa" for properties that don't have prices set.
Added a missing template to the jquery ui library.
Bootstrapped the installer.
Fixed issue where wrong query was resulting in the wrong property type in the pathway script. As the pathway is run pretty early on this was then setting the property type wrong in lots of other places due to caching of output text in the jr_gettext function.
Changed the install plugin link, removed no_html as it's no longer appropriate now that we've added the installation feedback output.
Corrected some url generation.
Removed the ability for users to enable bootstrapped Jomres templates in the administrator area if they're not using Joomla 3+
Added a couple of images to our image library.
css and html for photo view to make it more responsive and fit properly ...the last version had problems when clicking on modal...also made it use the bootstrap modal instead of jui one.
Added functionality to provide output in the event of an error finding paths in patTemplate.



Jomres 7.0.0

Changed the REQUEST element checked before outputting hotel details to property_uid from id.
Added some more bootstrap specific labels to the my commission invoices script.
Added a new no image thumbnail image
Added two new common lang strings, Edit and Copy, to lang files.
Added bootstrap code to the Back to property details and open booking form links shown when the booking form is coded to show as a popup.
Modified the show reviews template to use bootstrap's blockquote styling.
Corrected a price input into a number type in edit extra
Changed normal mode tariffs so that the price input is a html5 number type.
Modified a number of templates & scripts to use a more aesthetically pleasing dropdown & edit icon in various lists.
List extras and list customer types modified so that publish button is more obvious (and coloured).
Added a new data tables function and removed an experimental .js script that was used in the plugin manager.
Improved the bootstrap plugin manager layout further.
Changed how data sent from the plugin manager is sanitised (not that we expect this data to be suspicious, but it never hurts to be careful).
Temporarily disabled management view in J3 until at least Joomla 3's formal release.
Added site config switches to decide if we should use bootstrap or not.


Jomres 7.-1.0

Disabled the Jomres text editor in J2.5 More trouble than it is worth atm, if somebody enters something that creates a javascript error the editor crashes and burns
Added slideshow to pathway
Various list invoices tweaks.
Moved jomres_alternate_menu_position outside jomres_content_area so that we retain the menu if ajax search composite is used.
Disabled a new js function's bells as it doesn't whistle on the ipad.



Jomres 7.0.-2

Tweaked show hotel details page so that it can be viewed via a direct url, as well as called from another plugin.
Updated asamodule report functionality to output more information.
Changed some wording in lang files, replaced Book now and Book a room with Book now! and More Info with Read more (as that's more in tune with Joomla's UI)
Featured listings has a new feature where featured properties can have a class applied to them so they shop up emphasised in the property list, added changes to Jomres property list functionality to support this feature. 
Changed how powered by is added to bottom of the page, and changed how radio button rendering code in frontend is built so that if using  bootstrap on j2.5, then the radio buttons will still work.
Tweaks to some J3 BS templates, including how the map is rendered so that it's width is responsive.
Re-enabled the function getbookingguestdata, thought to be depreciated, but the paypal gateway plugin uses it.
Fixed a bug where IE wouldn't disable the cookies pane.
Added property name to reviews dialogue.
Added order by property name to property list in Show Profiles.
Added radio button group styles to Jomres bootstrap css script, as they're likely to be missing in some J3 BS templates.
Added code to disable magic quotes if it's enabled, due to one funny server (I'm looking at you, exploretravel!)
Tooltip tweaks to allow tooltips to work in module popups.
Removed dialog alert class from image popup function.
Various bootstrap template improvements to account for using BS 2.1.
contact form tweaked to have a page title and sub-text
Invoices changed to display page even if no invoices, when using the filtering
Added a new method to count the number of guests, and added a count that says if there's only one guest type then don't offer 0 as an option in the guest number dropdown.
Added guest id to invoices list, ensured that it's added to the invoice table when a new booking is made and when the guest list is viewed invoice buttons are associated with guest ids.
Added jquery easing and a new slide and toggle jquery function.
Disabled the Jomres text editor in J2.5 
More trouble than it is worth atm, if somebody enters something that creates a javascript error the editor crashes and burns
Pathway functionality updated to work with J2.5 & 3, and search functionality modified so that a setting doesn't need to be enabled in a module for the setting to kick in during searching.
Layout and css tweaks to new bootstrap templates.


Jomres 7.0.-3

***
* Summary 
*
* The main changes in Jomres 7 refer to using Jomres in Joomla 3, adapting it's templates to work seamlessly through Twitter's Bootstrap CSS framework.
*
***
Added microdata ( http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035 ) to property header.
Updated composite property details to resolve issues of the gmap not rendering in old style templates.
Fixed a bug where the currency wasn't always being shown in property lists.
Solved an issue where property addresses weren't being shown correctly in favourites list.
Changed a minicomponent to be touch templatable so that the Invoices word can be translated.
Fixed a bug where the shopping cart's price was set to twice the deposit actually required, when the price is sent to paypal.
Tweaked currency code dropdown creation method so that if global currencies is off, and currency conversion is disabled, the dropdown will still be shown in the tariffs and currencies tab of Property Config.
Added cache enabled warning to admin area control panel for j2.5
Made a lot of preliminary changes to simplify the defined urls used in Jomres, ensuring that there are dedicated ajax urls for both site and administrator areas, and that they're used in favour of other, older urls.
Fixed paths for manager selection
Implemented a new cms specific file that allows us to do some "post run" stuff. Joomla 3 insists on outputting html despite tmpl=component being set, which basically blows everybody's ajax out of the water. The new endrun file includes JFactory::getApplication()->close(); if it's an ajax call, which effectively tells Joomla to stop what it's doing and behave.
Added common Action and View language strings.
Improved the plugin reporting on the control panel.
Modified plugin manager to use a template for most (not all) of it's information generation. 
Changed which variable is used in the classic rooms list, means that price is output inc tax, if the property prices are configured to be gross.
Tidied up the tax calculation method in the booking engine, removed some obsolete stuff.
Changed wording in English lang files to clarify Gross and Nett setting in tariffs and currencies.
Blank option in Tariffs and Currencies tax code dropdown removed. This had been left in-situ when we first adapted Jomres to calculate ex-tax prices in the booking engine. Now that proper tax breakdowns are used everywhere it makes sense to remove the blank option from the tax codes dropdown, thereby forcing all new users to select a tax code when configuring.
Modified property switcher to ensure that nofollowtmpl is used.
Added an extra check for curl init to one control panel function.
Re-organised when the Jomres main menu is triggered.
Rewrote admin.php and obsolete file handling to allow us to "templateise" the administrator control panel.
Deleted some scripts, images and templates that are no longer part of Jomres, added them to the obsolete files list.
Inserted a space between terms and conditions text and it's associated link.
Made "propertyrental" the default language context.
Modified showplugins so that if the server was unable to communicate with the Jomres server to get a price, then a comms error is reported, rather than erroneously reporting the price of a plugin as 0 (free).
Tweaked how the mailer works, solves a problem where emails passed as array were not found correctly, the code was missing if the "use jomres email checker" is set to no. 
Modified show confirmation so that "Guests" output isn't shown if get_showtime('include_room_booking_functionality') is false.
Moved functions out of integration.php, and into function files of their own, or into functions.php
Identified and disabled (commented out) a host of depreciated functions.
Updated html purifier to 4.4, modified input filtering to offer a number of different ways that inputs can be filtered (new tab in site config).
Disabled Jomres editor (for now) as it's not very robust.
Added input filtering defaults to site config panels.
Input filtering rejigged slightly, now the allowed html inputs are defined in 00003, before the first jomresGetParam call is made. If we don't do this, the allowed inputs will never be set.
Added a recursive directory scanning function.
Removed htmlpurifier-4.3.0-standalone directory from repository.
Added htmlpurifier-4.3.0-standalone to obsolete file list.
Modified the scan dir function to also filter on extensions as an option.
Modified control panel to silently remove .js files from /jomres/temp, keeps temporary javascript files fresh.
Added compare url to misc defines temp js file.
Added a no search results minicomponent, outputs a styled template with message.
Updated jeditable, improved it's functionality.
Added djris's dashboard colour changes.

Generally, these are bootstrap specific changes :

Rooms list configuration options disabled in property config as the rooms list is now templatised. It is more logical than having these options in the property config area.
Integrated Bootstrap templates into Jomres. Joomla 3 cms specific functionality included, but not yet tested against Joomla 3, so will need revisiting.
CSS and layout tweaks for Jomres 7
Tweaked the rooms list in the booking form
Moved a button's position so that it's inside the form elements.
Added an option to enable programatically disabling Joomla's cache feature for certain pages.
Implemented changes to allow Jomres to switch the date input's class depending on whether or not we're running bootstrap.
Added a new switch to enable/disable bootstrap templates in J2.5. This is a temporary option to be used during development.
Added a BR to the js_calendar_input.html template to allow a line break after the departure date input.
Corrected a template error where the wrong data was shown in property details.
Fixed a bug where prices weren't being shown for mrps/srps.
Bootstrap dobooking tweaks to make the booking estimate warning smaller.
Tweaked new functionality to ensure that max people in room number is shown in rooms lists in the booking form.
Added a minwidth setting to the booking form.
Numerous changes to facilitate Bootstrap in the administrator area of Jomres.
Made a variety to changes to ensure that Jomres will install and run in Joomla 3 alpha 1.
Renamed joomla 3 cms specific files dir from joomla3 to joomla 30
Removed some stray code from the edit_SRP_propertytype.html template. Cheers David.
Added a feature that allows us to use bootstrap radio buttons if an option (ie dropdown) has only two choices.
Added tweaks and notes to main menu wrapper alternate. This is fast becoming the "default" main menu wrapper, the accordion is likely to go the way of the dodo. As a result, it's worth considering renaming these menu templates altogether before Jr7 is released, removing obsolete ones and making this template's name more self explanatory.
Added a Back to top button that appears bottom right when a user scrolls down.
Tweaked new functionality to ensure that the bootstrap Yes/No buttons javascript isn't output if the call is via ajax.
Some url tweaks to ensure that ajax continues to work successfully in J2.5.
Various tweaks to allow modules to install and work in Joomla 3.0
Added a missing line to Jomres J1.5 url generation script. This was as a result of previous, post 6.6.7 url tweaks that provide more concise url definitions.
Setting a default, development option to No.
Modified javascript initialisation minicomponent to no longer include scripts that are not needed when using bootstrap.
Modified how dropdowns are generated to take advantage of joomla's new radio button selection functionality. 
Tweaked control panel's layout.
Modified partners templates to use new urls defined in patTemplates.
Added code to create global scope javascript variables for Jomres javascripts to decide if we're using bootstrap or not and make decisions based on that.
Changed the mobile device wrapped setting to off by default, pointless now that we've got bootstrap, may well remove those settings altogether.
Tweaks to how Jomres News is output in the control panel.
Modified cms_specific/joomla30/cms_specific_installation.php to remove "ordering" column from menu installation query, as it's no longer in J3.
Tweaked the obsolete files delete link so that it's a button, not just a link. Makes it more visible.
Removed "property_management" from the list of possible dropdowns that can have spiffy Yes/No themes applied.
Removed some javascript variables from templates as they're no longer appropriate.
Modified the booking form's calendar popup, if we're using bootstrap we'll let the number of months = 1, otherwise the popup doesn't look good on phones.
Tweaked the booking forms, the /form element was in the wrong place for modal popup booking forms.
Modified sanity check to add a br after the warning.
Added some js to bottom.html that makes radio buttons in the frontend render properly, as J3 pre-alpha 2 is currently missing this. Might need to/be able to remove this at a later date.
Added a slash to ensure that the paypal logo shows in view invoice page.
Removed the booking panel summary as slider option from J3 site config as it's no longer applicable.
Added a toggle button state js function
Fixed editing mode not switching.


Jomres 6.6.7

Fixed an issue where users could not choose managers in Show Profiles.


Jomres 6.6.6.

Contact owner captcha replaced with reCaptcha (remember to set the public and private keys in Site Config)
Added a new feature to lock rooms in the booking form. To prevent the danger of rooms being double booked when they're added to a shopping cart a room lock will prevent a room from being added to another user's booking form (rather, from being shown in the available rooms list) if the dates of their booking coincide with the dates of another user's booking being made at the same time.
Added a new editor to Jomres.
Modified the functionality that generates the module popup .js file to include the domain, prevents issues where users are using multiple domains from having cross domain problems.
Modified currency codes class to exclude those code which cannot be converted. If we don't a property can choose an unconvertable code then the cart stops showing the correct figures.
Modified the insert booking function to copy over guest details, allows a property manager to put two bookings into the cart against two different guests.
Shopping cart modified to show prices converted to the global currency code. Without this change, if two bookings are saved to the cart, if they're using different currencies then the wrong prices will be shown on the cart.
Tweaked module installer so that modules that already exist shouldn't require uninstalling before they're upgraded.
A variety of changes to separate the rooms lists in the booking form's html from the booking engine.
Modified singleton abstract class so that plugin dirs can be scanned for abstract classes.
Added new code that allows us to have some language strings available to all templates.
Modified various templates to further standardise layout in templates, and finally, after 7 years, template-ified the list properties page. 
Changed how the edit booking page is rendered, finally moved various output data into their own templates.
Added a new feature that tells a user they've clicked on a link for a task where the plugin has not yet been installed, and gives them a link to that plugin in the plugin manager.
Made plugin names human readable in the plugin manager.
A variety of changes to improve consistency with input and output filtering. Resolves an issue where guests with cities with an apostrophe weren't being encoded then decoded properly. For legacy reasons elements of the booking engine used older escaping functionality, by changing the filtering to filter_input we can easily decode the sanitised strings. Not security related, just aesthetics related.
The Google map has been moved out of it's own tab and into the first, Property Description tab instead.

Image path fixes for paypal in invoices.
Small tweak to make the deposit the entire booking's price if the deposit is set to be the first night's price, and the booking's only for one night.
Tweak to the drop image function to ensure that medium thumbs are also deleted when other images are deleted.
Improved multibyte handling.
Tweak to ensure SEF'd urls don't bork form action search urls.
Improved how the booking engine finds free slots when the booking form is first generated.
Added an updated Polish language file to the system.
Solved a problem with the reviews average rating and number of reviews not being shown in property list.
Added a new language definition POA to language files. Modified the price output function to output POA if price isn't otherwise set. Got sick of seeing $0.00 when tariffs were not available for a property.
Further improvements to the code added to speed up generation of the booking form if the property is using fixed arrival days.
Removed some spans from dropdown creation functions.
Improved new code in output_price which allows 0.00 to be output in certain circumstances.
Modified how links to invoices in different states are constructed in templates.
Changed the validation js file called, as the minified version is no longer shipped with Jomres.
Added a cancel word to addreview script.
toptemplate functionality tweaked to enable menu generator to use the various top template dropdowns.
Modified switch property feature to use template when generating buttons.
Modified sanity check functionality to remove html out of code and into it's corresponding template.
Tweaked how report bug information is built.
Updated list guests invoices script to account for new links.
Tweaked editproperty to provide further output for url/text separation in templates.
Modifed saveproperty so that if the property name is blank, the old property name is reused.
Edited new black booking template so that new text separation functionality is used.
Further layout separation tweaks to the rooms list and edit room and edit room feature pages.
Layout tweaks to list_property_bookings.html
Tweaked edit booking related pages, made it so that add/edit notes doesn't try to close the page, and that cancel booking/edit deposit pages return to the edit booking page when cancel clicked.
Modified the add header code in cms_specific/joomla25/cms_specific_functions.php so that if the filename isn't set, then the add to header functionality for that file is abandoned (allows us to disable some .js or .css scripts programatically)
Added loading animation to bottom of live scrolling feature so that user can tell if a new property is being loaded.
Show property reviews code and html separation changes
Modified geocoder script so that if mobile detected, then show a halfsize map instead of the originally defined size.
Modified dobooking to ensure estimate warning is available to the booking form template.
A number of changes made to jomres.js to allow the system to resize modal popups depending on the client device's resolution. These sizes are arbitrary currently and will need to be reviewed.
Modified input select functionality to automatically add class="input-medium", this will probably need to change in the future, but it'll do for now.
Modified the property header script to add the default thumb if the property doesn't have an image uploaded.
Removed some redundant code from dobooking.php
Removed span classes from countries.php dropdowns.
Added odd/even rows to list properties for use in templates.
Modified temp booking handler and booking engine to ensure that the property's currency code is stored along with the rest of the booking information. This allows us to build the cart later with the correct converted prices.
Confirmation form updated to correctly show new template changes.
Updated galleria slideshow to the responsive 1.2.7
Added a new class to the composite property details that'll help activate bootstrap'd tabs.
Added a strip tags and removed parse by bots from list properties. Breaks too much css if left in.
Added a display errors off to init_config_vars.php for Joomla 2.5
Modified show profiles, it'll be seen in the administrator's menu regardless of the advanced config option setting.
Changed temp booking handler so that administrator's sessions go into their own directories.
Changed file write functionality to use file get and file put instead of fopen.
Added some new classes for use in bootstrapped template booking forms. (dobooking.class.php)
Recent changes to the patTemplate livesite variable necessitate changing the name of one of the urls passed to the dobooking templates to ensure that the form can be submitted.
Updated the version of jquery validate
LIVESITE in booking completed script renamed to RETURN_URL to prevent conflicts with new LIVESITE patTemplate variable.
Javascript changes to support bootstrap dialog popups.
Added some extra data to booking form elements so that we can use control groups properly.

Tracked and chased down an error where logged in user's bookings weren't getting inserted when being paid through a payment gateway.
Problem was caused by changeset 2215 ( https://jomres.trac.cvsdude.com/Jomres_core_v4/changeset/2215 ) the addition of the userid to the salt which helps make the filename difficult to find. The idea of the change was resolve an issue where a user could log out, however their address details would still be in the temp guest data if they'd visited the confirm booking stage, so even after logging out a user could go to the booking form and retrieve those details. 
Whilst the fix changed that, unbenownst to us the payment gateways now could not insert a booking because the wrong session file was being found.

The fix involves removing that user id so that gateways can pass payment information back and bookings can be inserted, and adding a new logout task to the Jomres toolbar. When this is used the user is one-click logged out of Joomla, and their temporary data is destroyed.



Jomres 6.6.5

Tweaked the booking engine to only output discount information if the "task" is set to "handlereq". This allows us to use the booking class outside of just the booking form. Add the ability to completely suppress any output that the booking engine would normally generate (and cleaned up a couple of superfluous lines).
Added a check to see if the booking class exists before trying to create it.
Further improvements to the exchange rate selector. I don't know what the heck Yahoo's doing, but hopefully these changes resolve the issues.
Moved a definition of module popup url to the javascript initialisation minicomp.
Removed a line that was preventing the correct language from showing in the module popup.
Disabling some output if departure date not to be shown option is set to Yes.
Added a flag to tell the patTemplate library to output variables as json encoded instead of rendered template output.
Permanently disabled caching feature, it creates more problems than it solves.
Changed the live scrolling number of properties from 1 to 3.
Fixed a bug where intermittently stars wouldn't show in the dashboard calendar to indicate an arrival.

Jomres 6.6.4

Slideshow image handling modified. Images are now copied to uploadedimages/N/joomla/large,medium,small on upload. Existing images are also copied to those directories when install_jomres.php is run. This facilitates the possibility of using Joomla gallery/slideshow mambots.
Added code to set defaults for mrConfig 'booking_form_daily_weekly_monthly' if it hasn't already been set elsewhere.
Added per day/week/month output to show tariff pages too.
Added a default setting for the price multiplier.
Removed a multiplier that was incorrectly added for Jintour based properties.
Ensured that multiplier's not used if the tariff charges are already stored weekly, and that the correct pppn/pn text is used.
Changed how mambots (Joomla plugins) are called in J2.5.
Modified how we check when to show the pay now button. In the event that a user doesn't choose to pay for the subscription immediately, the button will now show next to the invoice.
Added some image sizing to dashboard star image, as it can't be seen on some J templates.
Some further improvements to how the paypal button is shown in the list invoices page.
Allowed super property managers to see their commission invoices in the frontend.
Fixed an issue where the minimum days before arrival option wasn't being used in the booking form, due to a change in the last version.
Modified how maps are generated in list properties, enabled the ability for layout plugins to set map sizes and if the map should be shown at all.
Timezone setting tweaks.
Fix : Address and Tel in module popup are translatable.
Rewrote currency conversion functionality to be more robust.
Fix : paypal button is shown on the commission invoices list.
Changed how javascript/css is implemented, files are now added through a minicomponent.
Made a change to ensure that add_gmaps_source(); is used regardless of other map settings in list properties. Without this, the module popup map will not show.
Moved template path definitions. Paths are now defined in a 00004 minicomponent, allowing us to use 00003 minicomps to set our own paths.
Tweaked patTemplates to output the path to the template if an error is triggered.
Added a "safe mode" feature that can disable all plugins. Useful for debugging client sites.
Changed how the mobile detection minicomp works. Doesn't return if the Jomres javascript files have already been called.
Added a check for the existence of the exchange rate temporary file.


Jomres 6.6.3

Added a new trigger 00004 which allows us to set up JavaScript and css files via a minicomp. This makes it possible to programatically replace, among other things, the jquery core, ui and ui themes via a plugin.
Improved Jomres' mobile device detection, added a simulation option and a new define _JOMRES_MOBILE which mobile sensitive plugins would be expected to use.
Modified the live site url to ensure that the current language is always passed in the urls.
Fixed a not defined error message in Jomres SA.
Moved some jquery binding from list properties javascript file into a template. Reason being, if list properties.js is on the same page as the property details template, the book a room etc buttons have the binding applied twice, doubling their size. With the advent of the parse_ajax_returned_scripts js function, this isn't required, we can put the binding into the list properties header script so that it's only applied if the property list is returned.
Plugin manager updated to use anchors to make it a little more user friendly.
Moved rebuild registry code to ensure that the registry is rebuilt after a plugin is installed.
Modified templates to stop register property step two from checking data has been entered into the property description field, because it's not possible to check if a field has been populated when the editor is used.
Modified the get_property_price_for_display_in_lists function to use per day/night/week/month texts in property lists, modules etc.
Added some "true" options to redirects to see if this resolves an obscure 500 somebody on fastCGI is seeing.

Jomres 6.6.2

Modified jomresRedirect function, replaced &amp; with & when redirecting, otherwise the correct url isn't used.
Removed some commenting that prevents javascript in the body being ignored by validators, as it causes the DOM to not see the globally scoped compare_url var.
Added a new javascript function that allows us to parse js returned by ajax functionality to find and trigger any javascript in the returned data.
Credit : http://www.developersnippets.com/2009/05/20/evaluate-scripts-while-working-on-ajax-requests/


Jomres 6.6.1

Set review popup width/height to 800/500 respectively (swapped from 500/800)
Modified list properties default layout to show images as thumbs, not the medium images.
Fixed a parse error in SA's cms_specific_urls.php
Added a "no items in shortlist" lang definition for when no items have been selected.
Tweaked how the property list is generated, added an option that effectively allows calling scripts to disable the live scrolling effect.
Jomres SA. Modified warning so that if your password is still "welcome" then it will not show up when ajax queries are done.
Small tweak to the booking engine. If the property is configured to show dropdowns in the booking form for date selection, then subtract 1 from the staydays.
Modified the limit where a mostly booked property's availability calendar changes from orange to red.
Fixed a bug where the default sort order wasn't being used.
Added the user's userid to add an extra layer of ambiguity to the session file name.
Modified the get singleton abstract to optimise server load.
Optimised a variety of methods in the dobooking class to reduce cpu load.
Tweaked how some singletons are called, calling them directly instead of through a function.
Changed how singletons are accessed. Instead of using functions, we're going straight to the source. Functions left in situ for BC.
Disabled jomres_make_image_popup function call in the property list. We're not using it now we're using the newer "module popup" js, and it's chewing up a second for each property image. Horrendous.
Modified the random string generator, it is often used to name forms, and you can't have form names that start with a number.
Wide ranging improvements to help with html validation.
Improved how the itemid is found to help multi language sites.
Removed the language selection dropdown from the administrator area, as we've changed our recommendations on how this should be used.
Added translatable submit buttons to reg property 1/2 templates.
Modified the jr_import function, by adding a new function that searches all core-plugins and remote_plugins sub directories for class files. 
Added lat/long instructions to edit property page.
Added functionality that allows description searches to also search the custom text table.


Jomres 6.6.0

Added a new feature to the property list where people perusing properties can add chosen properties to a "shortlist". This is a temporary list, but unlike the "favourites" list users do not need to be logged in to add properties to that list. When their session has ended, the shortlist is lost.
Also added a cookie warning feature, for those who want to abide by new EU cookie legislation. The legislation is badly written, and I personally wouldn't use this feature but the option is there for you. If you enable the feature and somebody doesn't agree to Jomres using cookies to make the system work, then users are limited to the property list and property details pages.
Modified the property list template, broken the buttons out into their own template so that buttons don't have to be duplicated through different property list layout templates.
Added an option in Tariffs and Currencies where the deposit can be set to the cost of the first night's stay. Tariffs and Currencies tab has been reorganised slightly, moved tax setting further up, verbose tariffs input into the property details page tab and removed some old code.
A variety of performance enhancements designed to reduce the number of queries performed when viewing the property list page.
Modified property list script so that it takes into account if the ajax search feature has been used and the headers will still show.


Jomres 6.5.3

Fixed a major bug where auto increment ids weren't being passed back correctly from the database class.
Minor change of a path to an image for consistency's sake.

Jomres 6.5.2

A quick template tweak to the admin area control panel
A variety of changes to remove a depreciated mysql function call that I missed on the last run through, that affects php 5.3 and greater.


Jomres 6.5.1

Fixed an issue experienced by mysql users. mysqli users were unaffected.

Jomres 6.5

Adding a new feature to allow users to compare properties.
Added a new news feed to the Jomres administrator area, to advise users of updates to the system, new plugins etc.

Optimised cron class to perform one less query per run.
Modified the custom text class to perform one (or more, if it's used elsewhere) less query during a run.
Modified the Jomres database handling to include mysqli if available.
Removed a check that is now defunct, which was stopping the full daily/weekly price from showing in the booking summary.
Removed some unneeded slashes that escape double quotes.
Removed a spurious semicolon.

Jomres 6.4.1

Fixed an issue where the marker wasn't dragable in 6.4
Removed some un-needed brs
Added a couple of classes to improve the layout of the photos property list view.
Modified how administrator Manual and Tickets buttons work, both are now available in iframes.
Added a change to layout that traps issues where the layout isn't available (Because somebody's disabled all layouts?)
Small change to ensure that when finding prices for properties, if the arrivalDate option is set, to check that it's set to something other than "".
Added a feature so that gmaps are set to the currently active language.
Minor tweak to list subscriptions to include username in the subscriptions list.
Modified property config so that title is h2
Marker drag'n'drop tweaks.
Modified list properties to set a default layout other than the standard list, if only one list is available in the layouts array.
Fixed a bug where the room feature wasn't being translated in the booking form.
Fixed an issue where Cyrillic text doesn't show correctly in the jomres mainmenu.
Improved how the ui availability calendar calculates room occupancies.
Modified confirmation form to use a different variable for outputting room types.
Temp disabled css and js caching.
Added a little error trapping to prevent badly written minicomponents from triggering an error in the Label Editing feature.
Tweak for inclusion by asamodule. (ui-availability-calendar)
Changed the property list trigger from filterproperties to a_filterproperties and changed how the filter results are stored.
Datatables and tabletools javascript libraries upgraded.
Rewrote some booking form javascript to integrate the property uid check into the main ajax query that's sent on particular change. Halves the number of ajax queries sent.
Modified booking engine so that "per week" prices are output in the pricing summary.

Jomres 6.4

Added a new feature that allows us to have different "layouts" in the list property page. By default Jomres offers the standard property list plus a photos layout, plus a new plugin that's like the standard property list but with a google map. Different layouts can be disabled by using the Access Control feature in it's standard configuration and using it to disable j01004 scripts.

Added a new feature to allow users to enable/disable the "I have no dates" checkbox. To facilitate this we have also added a js_calendar_input template that's called by the generateDateInput function.

CSS caching disabled by default, should only be enabled once all plugins have been installed and configured.
Fixed issue of a duplicated define for smtp password in site config.
Added some fallback images if the image thumbnails aren't found in list properties.
Improved the new availability calendar so that no matter what date format is set by site admin, the correct arrival date is set in the booking form.

Jomres 6.3.3

Made further changes to map functionality in Jomres. Rewrote the drag/drop system to use v3 of Gmaps API, much simpler and cleaner. Changes have been added to the x_geocoder minicomponent, meaning that these changes are all self-contained in one script and template now, easier to make changes across the board.
Removed an un-needed call to a .css and .js file from the alternate main menu wrapper.
Implemented a new css and javascript caching feature (to be strict, it's not really caching, more consolidation).
Minor tweak to css file to put a call to an image path into the template, otherwise css caching causes the image to not be found.
Fixed a bug where real estate property prices weren't showing in the property list.
Updated Latvian regions.
Small modification to how days are output at the top of the price summary for SRPs.
Fixed some broken urls for logging in/out in cms_specific_functions.php in Jomres SA.
Added a couple of new url defines to Jomres SA.


Jomres 6.3.2

Removed a depreciated split function call
Implemented a variety of changes to prevent depreciation warnings.
Fixed missing publish/unpublish icons in list property types page.
Added some checks for CURL to curl using functions.
Modified booking form, if tmpl=component then the modal popup is disabled.
Added a checkbox to clear date input fields in search calendars.
Added some spaces in confirmation letter.
Modified mambot installation functionality slightly, restored older J1.5 installation to the plugins table code, and added a "copy" line to copy the plugin info script back to the plugin's dir that the Jomres plugin manager uses.
Modified the add plugin functionality to only redirect to Joomla's discover feature only if J1.6/1.7/2.5
Modified where the relative url for the logo in the management view is pulled from, as management view is now available to non-managers.
Added a new option that enables/disables the mobile redirect feature.
Added property town to the confirmation letter template.
Added new functionality to show information about properties in modules in a popup.
Figured out a way to change the cursor to the waiting cursor whenever Jomres does something ajaxy.
Modified how "prices from" information is constructed, created a new function get_property_price_for_display_in_lists which passes back an array of the pre text/price/post text so that both Jomres and plugins can use a standardised way of passing information to templates.
Modified the show image popup function so that clicking away from the image will close the dialog popup.
Upgraded jquery to jquery 1.7.1
Fixed a bug where extras without quantity boxes were triggering javascript errors.
Updated the Portuguese regions.
Upgraded Jomres google mapping, implemented some new functionality to improve mapping output and use v3 of Gmaps.
Removed email from basic module output.
Added an option to set a custom "from" email address.

Jomres 6.3.1

Modified built in mambot/plg installation functionality to work with J2.5. Allows installation of new jomres_ajax_search_contentwrapper joomla plugin that removes the need to modify templates to run the ajax asamodule plugin.
Modified the jomres language class. The Joomla 2.5 language filter will set GET 'lang', which will override the new jomres language switcher bot that allows users to switch their joomla language with the jomres language switcher. Changing the order that input data is queried to find the current language allows us to skip Joomla's functionality whilst still making the option available to non-joomla installations.
Added Latvian language file.

Removed the clause that stops the new javascript availability calendar in property details from showing if the booking form's in the property details page. Whether or not it's there is a personal preference, has no impact and it's a "nice to have".
Some css tweaks for property list to allow the text to fit better when using exchange rates.
Added some default output for reviews when they're disabled.
Added a change to allow site managers set a default startpoint for the Gmap, if one isn't already set.
Bugfix for getting all commisson invoices function.


Jomres 6.3.0

Implemented new functionality that colours the new booking form calendar according to availability, making the old MRP/SRP calendars redundant. Output from those calendars has been disabled via the viewproperty script but they haven't been removed as other functionality will use them. Disabled calling of older calendars in viewproperty script.
Layout improvements to the property list, makes the price from a lot bigger, moved a couple of things around. The "prices from", "price" and "per day/night/person" text has been broken up so that the different elements can be individually styled.

Changed (almost) all references to index2.php to index.php. Some people were, for unexplained reasons, setting the Wrapped option to yes. Normally this would simply show the site with no modules, however it also changed index.php to index2.php. index2.php is of course no longer used, so I've replaced references to it with index.php.
Modified search to set meta name to country name, not country code.
Fixed issue where accordion sidebar was creating javascript errors. Turns out that the new cookie lib used for remembering chosen tabs doesn't play nicely with the cookie stuff used with the accordion, so we've needed to include two cookie libraries, not one.


Jomres 6.2.0

New cart functionality, completemented by new plugins to support this which are added via jomres_asamodule.
Added a jquery inline calendar to composite property details, with an overlaying arrow. Easily removed by editing the composite property details template if you don't want to see them.


Small improvements to guest user's add/view favourites functionality.
Added a switch property link to list your properties script.
Modified booking form to ensure that it uses the same jquery ui button.
Fixed a missing / in cms_specific/joomla15/cms_specific_functions.php 
Added a loading animation to the property details to show that the slideshow and tabs are building.
Added a few definitions to Label Editing for buttons in administrator area.
Committed a variety of "silent upgrade" changes to installer that'll be used in the future. Feature not currently in place, and when it's built it will be optional.
Added some new language files, tweaked installer to add property types.
Changed the header for property type lang files in edit property type so that it makes sense.
Updated cookee.js so that it works with jquery tabs.
Changed the integrated search's default settings. This is because various search plugins use the integrated search settings, it's easier if they're enabled from the off. To make the front page less ugly, this means setting by default the integrated search's output itself to off.
Commented out body{font-size:12px !important;} in dobooking templates as some J templates use ems and percentages, and this setting uncommented breaks those fonts.
Layout improvements for module output.
Tweaked viewproperty to ensure that it doesn't show the rooms list when on an SRP.
Changed Contact Hotel to Contact agent in "car" language file.


Jomres 6.1.0

Added Joomla 2.5 specific files and changes required to work on J2.5. That was painless!

Minor tidy up of lang class file.
Small change to ensure that the "amend booking" link in the jomres mainmenu points to the correct url.
Implemented functionality to allow Jomres to include language files via plugins. 
Changed how arrays passed into scripts are sanitized.
Changed link in show plugins shop popup to go to new jomres.net registration url.
Added an auto upgrade option to install_jomres.php. This is intended to be used by a yet to be developed plugin that will allow silent and automatic upgrades.

Jomres 6.0.2

Fixed an issue where optional extras quantities weren't being displayed in the booking form (they were still being calculated) due to upgrading to jquery 1.6.4.
Small change to the functionality that builds the popover image title.
Small change to ensure that cryllic initials are found when listing properties in the administrator area.
Removed some hard coded titles from list properties.
Improved the router.
Added a new flag to disable the top template ( "topoff=1" )
Added a flag that specifically disables the menu through the url. Flag is called "menuoff" and would be used like "menuoff=1"
A few changes to the gateway handler to ensure that callbacks are validated properly by paypal.
Added an alternative method of listing all manager's properties.

Jomres 6.0.1

Changed wording of site preview and management views to Normal and Fullscreen.
Added a remote url link to list properties property_details array.
Small modification to custom text class, sets up the global strings array if it's empty, with some dummy data so that installations that haven't yet used Edit Language in the backend will still show individual property translations.
Small change to list customer types template to fix some td stuff.
Commented out some intentional duplicates in the search.html template that's used by integrated search.
Modified the Live Scrolling threshold to be twice as much, should mean that properties are added to the list virtually invisibly.
Changed plugin shop button "Purchase" to "Order", which is a little more accurate.
Improved listproperties, now that we're using Live Scrolling, much of the redundant Paging stuff can be removed.
Pathway modified to not be triggered if we're in an ajax call.
Height setting added to css for the Horizontal menu.
Added a fallback for finding the modal image width size in case security settings still refuse to allow finding an image's size.
Modified access control to log refusals to the system log, not the error log.
Tweaked a recent change to ensure that 30 pixels are added to a fallback setting when getting image sizes.
Yet more tweaks to how Itemid is detected in j1.7.
css tweak to vertically align images.
Small change to ensure that properties listed in property switcher are ordered by property name.
Changed jomSearch class so that it'll output that there are no results if indeed there are not. This code has been placed here because the listproperties functionality has become purely that now. It shouldn't output a "no properties" string if it was passed an empty array.
Added some code to see if we can detect the current language in J1.7.
Implemented some changes to availability search functionality to reduce the number queries performed when trying to see if a property is free.
Fixed issues where note saving wasn't working.
Implemented a fix to changing sort order sometimes resulting in a 404 page.
Modified currency codes to put lei after the currency for RON.
Re-added {AMENDBOOKING_SELECTEDROOMSDIV} which appears to have been removed during the template refactoring, to dobooking.html
Modified dobooking so that price override also shows when amending a booking.
Modified edit profile so that checkbox toggles all profile check boxes.
Added some functionality to deal with substr issues when dealing with cryllic.


Jomres 6.0.0


tweak for list properties, we've ensured that booking buttons etc are hidden until after the button js is applied to them.
fixed an issue where already checked features in edit property weren't being shown when the details are being re-edited. Modified jomres tooltips to unmake a previous change RE tooltips positions as it's not always effective.
Commented out the "no search results" output from the end of listproperties. Given the greater usage of ajax for generating output, list properties becomes more about simply listing output, rather than showing search results (it's an important distinction) and sometimes no results is correct. Therefore it becomes illogical that this script should output that there are no results to show.
Small tweak to ensure that country codes without country names are excluded from the select combo dropdowns.
Modified the new jomres_make_image_popup function. getimagesize requires allow_url_fopen to be enabled, however some hosts have it disabled, therefore if our initial attempt to get an image's size fails we'll fall back to CURL to get a resource stream and work out the size from that.
Resolved an issue where (booking) invoices weren't being marked as paid when paid in full.
Layout change for editextra template.
Added a cms specific function for finding registration urls.
Added "Found properties" output to switch active property class for output in the template.
Modified defaults, set "jomres" ui theme and Alternative menu to be the default


Jomres 6.-1.1

jquery inclusion options moved into advanced control panel.
Moved javaascript cache setting into advanced control panel.
Modified switch active property to ensure that it carries the tmpl setting.
Improved property switching feature to allow the browser to stay in either site preview view, or management view, depending on the original condition.
Added a variable to ensure that the copy/csv/etc swf is called properly in frontend list invoices.
Modified switch active property so that the returned property names are buttons, makes them more obvious.
Set preference for tooltips to go to left first.
Fixed a bug where tax output wasn't being removed from the price summary when the site config switch is configured to remove it.
Room type rooms list updated to offer headers to make things clearer (booking form, when rooms list is set to "Room types).
Alternate mainmenu updated to make the menu bar slicker.
Modified management top to show the active property's name.
Added button hover/click logic to jomres.js
Some css changes to ensure that buttons carry the correct button styles from jquery ui.
Modification to router.php, if we're in a live scroll situation then we'll query each property name individually.
dobooking width="70%" removed as it was causing problems in Opera.
Improved access control for receptionist users.
Further improvements to ajax list properties, finding of uids, plus implemented livequery in list properties so that we could ensure that button effects are added to new buttons added to the DOM.
fixed save plugin function to ensure it uses the correct template file.
Modified jomres_make_image_popup to strip all non-alphanumeric characters from the title.
Added property name as title to list properties reviews modal popup.



Jomres 6.-1.0

Added an exception for the frontend menus for when the dashboard hasn't been set.
Renamed Developer and Perpetual to Silver and Gold respectively in the Manager's first run function.
Corrected the form name in edit_property.html
Modified 99995 to not set the mainmenu already run flag, instead that's done by 99997
Some css changes to improve how things look in J1.7 Beez template (an awful, awful template to work with).
Identified and deleted some old, no longer used templates.
The real-estate composite property details has been ditched, we're now using the normal property details template for same.
Applying our last set of major changes, the templates are generally ready now, subject to any tweaking required before v6's final release.



Jomres 6.-2.0

Fixed some confused language strings.
Undid some hardened php changes, suhosin be damned. Those changes will affect current users of Jomres much more than it will the probably fewer people running suhosin, it's unfair to ask them to edit jomres.php and admin.php every time they want to upgrade.
Small layout change to edit booking's email link and title.
Disabled template touchable in 06000mainmenu.
Disabled template touchable in 06000search
Modified the plugin version check on the plugin installer, previously it would consider 6.-3.0 to be higher than 5.6.0
Added inclusion of management_mainmenu_options.html to be used when Jomres is showing, sans joomla template output.
Moved quick info javascript function into jomres.js.
Menu template layout tweaks.
Tweaked the management view to ensure that the management view link shows when NOT mobile browser.
Modified system so that 99995 is only triggered once, allows third party menu options to be added. Re-instated the jomres toolbar icons in edit booking so that they're now in the main menu AND in the page itself.
"bStateSave": true, added to all applicable templates.
Tweaked how the manager view template is shown, ensures that the 99995 task is called at the end of Jomres' run.
Fixing a new bug introducted in -3 where it grumbles about Fatal error: Call to a member function addItem() 
Fixed a bug where booking a guest out resulted in a mainly empty page.
Modified the editing mode warning, and added some new definitions.
Modified how sanity checks are output to the top templates.
Changed jquery cookie plugin, added cookie handling to mainmenu, modified mainmenu accordion's name to make it more unique.
Added a new function to pull email styles from /css/email.css which can be inserted directly into an email, and new email templates added.
menus modified to ensure that dashboard categories are moved to the beginning of the menus.
Template fix for cron to ensure settings save, and css tweak.


Jomres 6.-3.0

Frontend structure completely rewritten to use a jquery based menu instead of our older toolbars.
Virtually all templates viewable by property managers have been updated to provide a consistent theme throughout Jomres, and mission critical templates such as List Properties and Property Details have been hugely improved to provide a more pleasing layout.
Added a basic access control system to modify which menu options are viewable by which users. 

Added a virtumart like "fullscreen view" feature to the administrator area.
Added Joseph's contributed icons, thanks.
Made some changes that allow us to set Jomres' "is wrapped" status via the url, allowing various functionality to be triggered while in an iframe.
Added a new "changelog" column to the plugin list.
Added a new tooltip option "warning". Updated plugin list to show more information and tweaked layout of the list, changing the location of the legend.
Added option to enter license server login details to Site Config.
Added Joseph's newly contributed router.php for J1.7.
Modified the file upload feature so that if we're running Joomla, and the image comes from the batch upload feature, then duplicate images, for the use of joomla galleries, are put into /uploadedimages/N/joomla/big,medium,small
Added an option to use alternate SMTP settings, not Joomla's settings.
Added a feature to detect if the Joomla cache is enabled and advises to switch it off.
Further changes to mainmenu generation, simplified it's generation and set them to be triggered at the end of jomres.php running, not the beginning. This allows us to add buttons to the main menu through scripts.
jGrowl updated to discard jquery ui colours (because it doesn't always work well on all templates) and the main menu modified to work as a hiding, scrolling accordion menu.
Added login, registration link, search options to jomres mainmenu. Stripped javascript from list properties and put into it's own javascript file. Renamed new runEffect function in list properties to prevent conflicts with the mainmenu's function of the same name. Added a new find icon.
Modified the new login/logout menu options so that they would use a new cms specific function that generates the login/logout urls.
Added a new task called mainmenu, allowing us to use jomres asamodule to output the Jomres mainmenu without being on a jomres page.
Added an Alternate Main Menu, which can be used by the site manager as a backup if they don't like the default one.

Updated a word in the French Lang files.
Modified css to hide the J1.5 toolbars in the administrator area when viewing Jomres.
Modified layout of language selector dropdown in administrator area.
Modified admin.php to trigger the obsolete file handling AFTER 00005 is called, and obsolete file handling to check a showtime variable called "obsolete_plugin_files" for any obsolete files and offer to delete them in the administrator area.
Modified the jomres mobile redirect to append is_wrapped to the end of the url, so that the Jomres login module will come into play.
Further changes to the cms_specific_urls.php script for finding the itemid.
Couple of layout tweaks for the control panel area for lower resolutions.
Modified editproperty to ensure translated meta data is output.
Removed a defunct growl message.
Copied the J1.7 installion code into the J1.7 upgrade code, as it's the easiest way to get Jomres to register itself in a site that's been upgraded from J1.5 to J1.7.
Upgraded j1.7 cms_specific_urls.php to ensure that it doesn't bomb out with an error on installation.
Modified the version check information in the control panel, given highlight when a new version is available.
Added product information to the control panel.
Couple of changes to the administrator url in joomla 1.5/1.7 to ensure that the fullscreen view is carried over to successive pages.
Added some, apparently nonsense, error suppression.
Added slideshow option to plugins, and removed from core system.
Modified new modal image popup function to use titles.
CSS file updated. If you've used the template editing feature to edit the css in Jomres we recommend that you remove your changes completely and use the changes in this file instead.
Pathway changes to ensure that pathway is switchable depending on if Jomres is running in SA mode or not.
Modified new modal image popup feature to automatically resize the popup's width.
Added j10002new_property.class.php to obsolete files. Superceded by the frontend_to_backend feature instead.
A variety of further changes, old buttons added as disabled buttons, obsolete scripts class adapted to suit. Display of disabled buttons catered for in their appropriate files. Removed manager's buttons as images option because it's no longer appropriate.
Updated output to show the correct plugin server domain.
Commented out booking form width/location settings as this has been figured out now in the template.
Changed how some stuff is called onload. Ditched the old generic onload stuff that we'd been using since before jquery was adopted.
depreciated minicomponents removed as part of new mainmenu restructuring.
Edit booking modified to use the new menu options instead of the older Jomres toolbar functionality. Menu and wrapper modified to take an image to indicate that a menu category's been created for that particular page. Jomres.php modified to not show the menu if we're in a popup.
Mass rename of Jomres Developer and Perpetual to their new names, in the language files.
Restored a previous version of the exchange rates class as yahoo seem now to be passing back the anticipated headers again.
Updated jquery libraries.
Disable the slider if shown in the property details page.
Added login, registration link, search options to jomres mainmenu. Stripped javascript from list properties and put into it's own javascript file. Renamed new runEffect function in list properties to prevent conflicts with the mainmenu's function of the same name. Added a new find icon.
Modified the new login/logout menu options so that they would use a new cms specific function that generates the login/logout urls.
Changed how the show search feature is called.
Added a new task called mainmenu, allowing us to use jomres asamodule to output the Jomres mainmenu without being on a jomres page.
Modified new jquery tables functionality so that it's included when the user is a registered user, not just a manager.
Modified how optional extras are selected in the booking form. We needed to change how we do it because we've upgraded jquery, and the older method is no longer supported.
Modified the menuwrapper so that the accordion isn't hidden when it first opens.
Changed how the charset is defined in the jomres db object.
listlivebookings function updated to use the new jquery table functionality.
Tweaked the accordion menu's options to allow long areas to scroll.
Added some error checking to the custom text class.
Modified property config singleton so that it doesn't throw warnings if a property's settings haven't been saved (because we're not looking at a property's pages, or the property list).
Implemented a new and improved Management View for property config. 
Modified management view class. If we're on a mobile browser there's no point in offering the site view/management view switcher.
Tweaked the new version warning, now will not alert if any revision char < 0, and modified layout.

Modified view invoice to ensure that if the invoice is a commission invoice, then the paypal payment link is shown.
Set correct url in immediatepay.
Modified immediatepay to ensure that it pulls the property's paypal settings instead of the site settings when appropriate.
Fixed a troublesome little bug that'd appear when trying to show "days" or "nights" in the edit booking page.
Modified jomres.php so that it calls the pathway after the property type is defined. The pathway tries to set up urls to pathway items, jomresUrl uses the router.php in /components/com_jomres and if the language file hasn't already been defined the default language file will be used instead, so the property specific lang file never gets loaded.
Modified jomres.php to show property header on the rooms list and tariffs list page.
Removed automatic setting of php memory as this causes errors on hardened php servers.
Fix for property type translation in List Properties.
Applied changes contributed by Josip that fix the redirect functionality in the save subscriber script.
Fixed a blonde moment and got the Save Override price in the booking form working again.
fixed list old bookings script to show correct page title.
Corrected a call to room_class_full_desc in basic property details.
Changed the exchange rates again, looks like we need to adopt the "no null headers" code as yahoo's data is being sent inconsistently.

Jomres 5.6

Control panel completely reworked so that options are now in an accordion menu on the left, with the page's content to the right.
Implemented a new live scrolling feature for the property list.

Added a function for str_getcsv php systems that are < 5.3
added an experimental new feature for new Jomres users, to guide them through setting up their first property. Only works if the user's id = 42 (admin) and there's only on property on the system.
Reverted router.php to a version that works.
Modified 404sef's functionality so that if the user is a manager, then sef isn't attempted. 
Approved a part translated translated hungarian language file.
Language clarified RE licenses in Site Config
Modification to jomSearch.class.php to resolve issue where searches on JUST room types can fail.
New "jomres" jquery ui theme added.
list_usersinvoices modified to show line items


Jomres 5.5.6.4

Reverted to the older J1.7 router.php

Jomres 5.5.6.3

Fixed a bug I introduced earlier today when sorting out paths to images in the booking form.

Jomres 5.5.6.2

Exchange rate download class rewritten to perform fewer web queries.
Added a printable option to property details, if the flag jr_printable is set then the composite_property_details_printable.html template is used in place of the normal template.
Modified how images paths are set in the booking form as it wasn't working for SA, enabled some logging variables to be set only if another var is set first, fixes a notice level warning.
Made some css changes to SA, added a module table to the installer. (For future stuff).
Added support for free plugins to the plugin manager.
Commented out some override stuff that's incomplete and untested.


Jomres 5.5.6.1

Fixed a bug in the detect cms script.

Jomres 5.5.6

Added new functionality that will help new users find information about Jomres when they first start using the system.
Added an About Jomres page to the control panel.
A variety of layout changes to improve the look of the plugin manager.
Plugin warning layout and minor wording changes.

Added a small tweak that prevents users from _thinking_ that they're changing the details of another property that they don't have access rights to. They never did, safeguards prevented it, but this change ensures that they're not even given the _impression_ that they're changing another property's details.
Added fix that stops some template's reset.css from over-riding the totals panel's margins and forcing the totals figures down, making them look pants. 
Added missing key plugin messaging to the control panel.
Removed a redundant call from admin.php that's no longer applicable in Joomla.
Reverted some previous changes to the Jomres J1.7 url functionality. With the previous code, when searching from a module which is for example on homepage, the itemid doesn`t change on the next page to the jomres one, but it keeps the homepage itemid. This results in unwanted modules from frontpage being published on jomres pages too, even if not selected.
Floated the remove link to the right to make it more obvious. (Plugin shop).
Tweaked ngm module template layout slightly so that modules will sit as a row in a large enough module position, and columns if the module position forces it.
Added stars images to ngm module template.
Adding a new wrapping template for ngm modules to allow use of the class suffix.
Removed a superfluous title.
Changed how jomres_cmsspecific_getCMS_users_admin_getalladmins_ids finds admin ids, old method for J1.5 doesn't work so we're now going to use the sendEmail flag, as this function is used to find who to send emails to after doing something.
Added text align left to totals slider.
Resized default size of totals panel slightly.
Fixed issue where guest type names were not being correctly found (and translated).
Modified list properties function to use the _JOMRES_MR_AUDIT_LISTING_FILTER_DATE define.
Changed the order that detect_cms.php finds Joomla's version files. In the previous version 1.6 was checked for before 1.7, however if users use the Joomla upgrade tool the Joomla 1.6 version file is left in-situ (not really good, as you should tidy up as you go, but anyway) so we've swapped the order that the two are checked for, which should mean that Jomres will pick up the correct Joomla version file now.


Jomres 5.5.5

Added new Jomres Plugin Shop to the plugin manager.

Jomres 5.5.4

Disabled filtering that inserts <x> to sanitise data. We're already using PHP's intput filtering to prevent sql injection, and the <x> functionality creates more problems than it solves so for now it is disabled.
The old sort by order functionality has stopped working, so we've implemented a new, simpler method of triggering the page reload.
Improved new sorting funcs to remember previously selected sort order.
Modified save invoice so that depending on if the invoice is a standard invoice or a commission invoice, the user is redirected to either list invoices or list commission invoices.
A small change that adds the content of the tabs back into the $output array of composite property details.
Fixed a faulty config option for the slider setting.


Jomres 5.5.3


Added a new option to define the booking form's width through the site config area.
Added a new feature where the slider functionality that slides the totals panel in the booking form can be switched off, either via site config, or if the browser's a mobile device then it's disabled automatically.
Added version checking to addplugin functionality.
Added an option to disable emailing guests when a new user is created.
Added an option to disable tax output in the booking form totals summary.
Implemented a cancellation threashold that prevents a booking from being cancelled by the guest, if the booking is within N days.

Added tabs jquery code to composite property details.
Added ajax url to the property urls passed to list property's template.
Added JOMRES_SITEPAGE_URL_AJAX to cms_specific_urls J1.7
(Gmaps) Added some code to geo coder to prevent it trying to render if called via ajax (cos it wont).
Fixed a bug where tariff details aren't showing in terse tariff list, introduced by the wholeday changes.
Modified the auto-jump to module-less Joomla if the browser's found to be a mobile browser, not just iphone.
Modified the SRP and norooms booking forms to remove some totals panel elements that are not applicable to them, and removed the override totals input fields from norooms as the override totals feature only applies to accommodation (e.g. room) based bookings.
fixed the jomres decode function that was incorrectly removing a t when it shouldn't.
Small change to ensure that when a property type's language specific file's directory is created, that the directory name's changed to all lowercase.
Updated plugin server to pass data via json instead of ^ separated data if json_decode is available, and added code to show plugins to show minimum Jomres versions required to run a plugin.
Changed where jomresItemid is set to 0 to prevent triggering trivial errors on installation. (J1.7)
Small change to list properties to ensure that wholeday wording is used if configured, when referring to a property's price per night/day.
Modified how J1.5 version of router.php finds property names.
Modified dobooking, disabled feature that automatically switches off the departure date if the "property" is a no-rooms property, because Jintour has an option now to enable/disable this input.
Some changes to allow us to translate meta title and descriptions.


Jomres 5.5.2

Added a new feature to allow rooms to be filtered according to their room features, in the booking form.
Added functionality and lang definitions to find the last date the property last had a booking made against it.
Implemented a new feature that makes it possible to do wholeday bookings, as opposed to overnight bookings. When the arrival and departure dates are set in the booking form the number of days of the booking include both the arrival and departure dates, rather than just the days between. Most changes pertain to changing wording from per night to per day, but they do add a lot of new strings. Provisionally the wording addresses the hypothetical situation that Jomres is being used for a tool hire and renamed "arrival" and "departure" to "pickup" and "return" dates.
Added a feature to allow managers to override the price of a booking's accommodation at booking time.

set lat long defaults to Buck palace if it's not set, prevents a js error in edit property.
Precautionary changes to edit property to add API key, I can't replicate a reported issue but this change should forestall it.
Found I hadn't updated the add property reg prop2 templates with the appropriate code for generating a map.
Blooming tab jump to top of page problem is back again. Added a fixed height to the tabs div to prevent the jumping.
Added a check to ensure that property uid is > 0 when generating module property output.
Small modification to jr_gettext to ensure it uses jomresJquery not jQuery.
Changed how the latitude is detected when editing a property, the older method wouldn't allow negative numbers (oops).
Moved the image location abs path definitions into integration.php.
Undid a change made in the previous version that scuppered editors in edit property details.
Fixed a bug where wiseprice discount was being set to 0 in list properties.
Tweaked j1.7's itemid finding query to resolve issues that some people have been getting.


Jomres 5.5.1

Fixed an issue where J1.7 couldn't install as the jfactory isn't available during installation
Disabled the sh404sef panel in j1.7

Jomres 5.5

Added a feature where an optional extra can be set to be automatically selected in the booking form.
Modified gmaps buttons to use new style ui.
Modified edit property functionality to allow users to scroll around a gmap and drag a pointer to set their lat and long. If lat is not set, then Jomres will query google to get a rough approximation of their location to get the ball rolling.
Implemented a feature to configure the property type order as it appears in the property type selection dropdown.
Added a delete multiple black bookings feature to Jomres, will require the v5.5 version of the black bookings plugin.
Added balance after deposit paid row to booking form price summary panel.

Renamed Kenya shilling.
Swapped a global call to $mainframe =& JFactory::getApplication(); to generate pathways.
Modified pathway code to be called in 1.6/1.7
Renamed extras tax to services tax in English lang files.
Added Joseph's suggestion for finding the correct item id to J1.7 specific code. Many thanks.
Added a back to property details button to the booking form page if the form's in the modal popup.
Modified how the wysiwyg editor is called. Bally thing works now!
Modified how the reg prop 2 page is rendered to allow wysiwyg editor if enabled.
Small modification from $langs'pt'='pt-BR'; to $langs'br'='pt-BR';
Small tweak to ensure that the discount shown is output inclusive of vat where appropriate.
Commented out spinner code in bottom.html as I'm getting sick of seeing it now. You can restore it if you wish, by un-commenting the appropriate lines.
Small change to list properties to add the max guests from the tariffs to the property deets (eg the output) array.
Modified the new property module utility function to include the lang files if they haven't already been included.
Added a check for joomla1.7 so that Jomres will show sh404sef config options for both J1.5 and J1.7.
Added changes to the old Jomres sh404sef plugin as contributed by Joseph. 
Slightly larger panel image uploaded.


Jomres 5.4.1

Added z-index to the totals panel slider.
Removed span class from the output_price function as it was creating issues when saving bookings.

Jomres 5.4

The booking form has been rebuilt with a view to UI improvements.
Added a new sliding panel that scrolls with the user through the booking form, containing the totals, including new output of the room totals inc and excl tax.
The booking form, if not showen in the property details page, will now open up in a modal popup, allowing us much more space to present to the user the booking form without overwhelming them (the areas behind are hidden). This can be disabled in Site Config.
New Site config tab that holds booking form relevant options (some new, some moved from the Misc tab).
Added a button to enable re-opening the booking form in the event that it (the modal panel) was closed.

Added new functionality to auto-detect a user's location based on their IP number, and use that setting to automatically set the currency code and the currency code dropdown.
Re-organised the Site Config to make a little more sense, moved some elements out from the Misc tab into their own tabs.
Re-organised the country code dropdown to make it alphabetical

Register property and countries scripts modified to rename the "country" tag to xyz (I was bored and couldn't think of anything else) to prevent other module's "country" inputs from interfering with the country selection when a new country is chosen.
Changed the memory limit in admin.php to prevent issues with large numbers of Jintour tours causing out of memory errors.
Added a line to jomres_decode that'll strip ascii line seperators from text, as this can break javascript.
A couple of changes to encourage Jomres to pick up the appropriate language file when the ptype is set in a search option.

Small change to css and list properties template to ensure that the property name is shown in white, therefore it works well with the jquery ui headers.
Small modification to change what we measure in the psuedocron backend functionality to prevent duplicate jobs from showing.
Minor tweak to database class to correctly log the source of a db query's calling script.
Added improved code for filtering out mootools (?) added function names to json returned data. Again, thanks David.
Added a missing div to bookguestout.html
Modified the return url in the save subscriber script to ensure that when a user chooses to not subscribe, they're sent to the correct page when SEF is enabled.
Modified the booking data archive script to not include "bookings" that don't have a property uid set.
Small change to prevent older Advanced weekly prices setting impacting prices once the manager's changed to micromanage mode.
Removed a reference to the tariff description, which was only ever intended for reception use, from the verbose tariff output that shows on the property details page.
Modified scripts so that translated tariffs that are created under micromanage mode can be shown in the property details.
Modified how the remainder to pay is figured out in the edit booking page to ensure that we're using the most appropriate method.

Modified list properties and router.php to allow router.php to use existing property names found by the basic property details class, means fewer queries are performed when pulling property names for url generation.
Modified list properties and discounts minicomponents to reduce the number of queries performed, and modified the template to show :- only if review data included.
Modified the getPropertyAddressForPrint function to use the basic_property_details data wherever possible.
Optimised the taxrates_getalltaxrates function to only perform the query once by storing the results in showtime.
Optimised the property type name finding functionality of list properties.
Optimised the custom field handler to make fewer queries.


Jomres 5.3


Added Joomla 1.7 compatability to Jomres.

Adding exit; after the redirection's been done to see if that fixes http://www.jomres.net/index.php?option=com_kunena&func=view&catid=10&id=1239&Itemid=290#8837
Added a change to the chained select javascript to exclude mootools keys that are somehow being inserted into the "data" json object when the list of regions/towns is being returned.
Deleted the old wordpress files, I'm never going to finish the job, might as well bin it.
Removed offsetParent: \'body\', from the tooltip javascript in jomres_tooltips.class.php. Doesn't seem to impact jomres on j1.5, but in j1.7 it causes the tooltip to display incorrectly, presumably due to something in j1.7's default css.


Jomres 5.2.1

Added a feature that by default filters out non-active guests from the guest list. A dropdown allows the manager to view all guests if required.
Changed name of id in selectCombo's town dropdown as it was preventing the booking form from validating.
Fixed issue where combo searching on properties with apostrophe's in town/region might not work. Good find Aladar.
Fix for module xml files not being installed so module configuration parameters were not being shown.
Modified (again) our redirect function.
Modified the router to reduce the number of queries it generates, brought my test installation when viewing property details down from circa 400 to 70.
Modified publish guest type script, stops it from throwing an error even if the publish activity worked fine.
Resized the ajax activity div to make it look better in IE (losing the scroll bars).
Modified how guest price variations are taken into account. If the variance is not a percentage then we'll determine the nett value of the variance before adjusting the rate per night.
Modified the new searchCombo to include the 'all' option.

Jomres 5.2stable 

Small change to allow bookings with shorter periods in fixed period bookings.
Modified the register property 2 template to include lat/long details. Will need the appropriate register property version to work.
Removed ex tax figuring from calcExtras's third party extras handling. As extras are already assumed to be ex tax before the price is output, this means that 1. the extras are all output in the same way and 2. the invoice now makes sense for third party extras.
Added a new utility function intended for a new set of modules are in the works.
Tweaked the output_price function to optionally disable conversion output (might be used elsewhere).
Modified the frontend invoice template to make it fit better on the page.
Fixed a bug introduced in v5 where third party plug-in modules could no longer be installed. Removed a reference to old "component installer" code that's never been used (since at least v3-ish).

Jomres 5.2rc1

Small modification to the output_price function to ensure that if the foreign currency code isn't set, to not attempt a conversion.
As our new jomresJquery code has broken the old, ugly jquery combo plugin, we've replaced that old functionality with a newer, nicer jquery combo plugin.
Modified the guest confirmation email to use output_price
Added initial total inc vat column to printable invoice's template.
Fixed a bug where there were some missing td's in the Guest's toolbar.
Removed an old reference to index2.php in the clickatell settings template.
Added an option to disable javascript packing in site config, because on some servers the packer script doesn't appear to run correctly. By default, the packing feature is off, it needs to be enabled in site config for it to kick in.
Added ignore user abort functionality, once the exchange rate update has started, we want to finish the job. (exchange rate updating functionality).
Added a cron job for triggering exchange rate updating.
Moved the call to the chain select jquery plugin from j00030search.class.php into the init_javascript function in funtions.php.
Removed an obsolete javascript file.

Jomres 5.2beta2

Significant changes to all Jomres code to try to resolve javascript conflict issues with modules, templates and plugins that also use jQuery. Whilst strictly speaking this isn't a bug in Jomres (rather, it's people not being aware that different plugins all using the same type of library will cause a conflict), this change should, nevertheless (hopefully) overcome those problems. Initial tests are very encouraging. 
Found and fixed an issue where the optimisation cronjob wasn't triggering correctly.
Small modification to php mailer class to prevent echoing of email addresses that failed.
Added a check for error code 6 in the image uploading class to indicate that a temp dir doesn't exist (or isn't writable).
Exchange rate conversion selector removed from top.html, instead it is now available as a plugin that can be included by asamodule.


Jomres 5.2beta1

A large number of changes to add fully automatic exchange rate downloading (daily) and conversion features that will allow us to convert prices on the fly for all properties who are using a currency code that can be converted. As the download is done daily, the first time the page is visited after this code is added may take a while to resolve as your Jomres installation needs to talk to the remote exchange rate server. After that's done however the data is stored locally and is retrieved very quickly.

Undid a change in the last version that disables busy dates in the departure date of the booking form, as this was a mistake. Leaving this change in would mean that a booker cannot set a disabled date as their departure date, even though this would be perfectly valid.
Reset a flag that prevents emails from being sent during testing, which was accidentaly left in situ after some code improvements.
Modified the infoimage feature of the tooltip function to use a new css class that makes the tooltip content area wider.
Fixed a bug where per person per night optional extras weren't displaying correctly in the booking confirmation page.
Removed excanvas.js from obsolete file handling class. Not sure why it's marked as obsolete. It's not.
Added an updated version of de-DE.php, many thanks Alexander. 

Jomres 5.1

A good deal of changes to the Javascript file handling. Jomres now uses a lot of javascript files, which raises the issue of network speed as the user needs to d/l a number of files to use the site. We would like to implement some kind of javascript compression facility within the system so that we can reduce this number of files. 
Firstly, to do that we've needed to ditch the minified/compressed files we're currently offering. Because of the way different compression technologies work, you cannot successfully combine all of the different compressed/minified files into one file as for some reason this doesn't work, so the first thing we needed to do replace our files with the fullsize versions of the same files. This is good, because it makes it easier for site designers to modify those javascript files to suit their own requirements, however it's bad because the combined javascript file is > 1/2mb in size. Currently, all of the different methods we've tried to compress this file in size haven't worked. 
So, Step 1, combine most files (except the jquery core file) - complete. Step 2, compress the combined file - work in progress.
Implemented a javascript packing library to minify and concatenate some of the Jomres javascript files. Some can't be compressed because of how they're written, but most can.

Modified how the confirmation form printable link is constructed, allows managers to use editing mode in the printable form to customise the confirmation letter.
Improved the extras output in the booking form and confirmation pages to calculate the total prices in showconfirmation of each selected extra, and to show the model's text in showconfirmation and the booking form
Slight modification of booking engine to note that there aren't any free rooms on a given date. Normally, if all rooms for a given date are booked, then the javascript calendar popup will disable a date, however if all rooms become booked whilst a user's in the booking form then they'll see the "select a room" message whilst there are no longer rooms available. This modification should change that message. It's an edge case scenario, but it's covered.
Slight modification of archive audit to not log the audit action in the audit trail. Was creating some issues of it's own.
Modified the booking engine, added autocomplete off for the arrival/departure dates, as firefox was causing inconsistent results, and removed a recent addition that was preventing the No rooms available from showing up when rooms were available.
Small modification to how searches are performed for room type searches, if filter = % then just re-use the last set of search results.
Modified the save invoice feature to set the init total to 0 if the invoice has been marked as paid in the administrator area.
More changes to invoice handling in the backend, corrected code to show the correct balance in list invoices and edit invoice, when the invoice is marked as paid. You can no longer mark an invoice as pending once it's been marked as paid. Want to implement paging soon, so there's definitely more work to be done on this as yet.
Modified how the property switch redirect's url is created, prevents the cycling issue that some folks have been experiencing.
Removed a stray vardump that was left in after the last changeset referring to invoice total changes.
Improved new functionality that reports that there are no vacancies to only trigger on certain parameter changes.
Modified a little used function to use translated guest type titles.
Modified booking engine to disable fully booked dates in both the arrival and departure dates (the Javascript calendars).
Found an issue where cron jobs were becoming locked then not unlocking, thereby taking them out of action for good. Also re-added the old optimise minicomponent.
Modified how dobooking finds the default departure date.
Added a change to showconfirmation to try to resolve issues where safari's creating new sessions when in the booking form. We're now saving guest address details to the temp booking object when showconfirmation's triggered. As a happy accident, debugging this has resulted in a slightly nicer booking form (it recognises the enter button).
Modified confirmation handling so that on amend contract, the special requirements are re-added to the text field in the confirmation page.
A variety of changes to add the total inc tax column to the line items table and it's output.
Modified and simplified grand total figuring in invoices.
Added code to translate tariff name/desc in confirmation emails.
Commented out an IF statement that was preventing countries with no regions from showing up as a search option.
Added a change that seems to fix the "search by location combo" dropdowns causing other dropdowns to not show correctly.
Commented out width and height settings from the imageonly tooltip popup. I left this in place when I created the thumbnail functionality to provide backward compatability with older installations of Jomres. That was some months ago now, and we're regularly getting questions on how to remove this code from newer uses so I think that the older users will just have to bite the bullet now and upload new images if they haven't already.
Further changes to post-booking emails to ensure that tariff names are translated correctly.
Added a mechanism to listproperties to allow a plugin to offer a "prices from" figure. The newest version of Jintour supports this new feature.
Fixed a small bug where the unpublished message was wrong when a property is unpublished.
Removed a redundant "edit creditcard" link that's no longer usable.
Modified the add plugin functionality to ensure that we clear out both the /remote_plugins/plugin_name and core-plugins/plugin_name directories. If we don't and somebody upgrades from an older version of a plugin, we'll get an error in Jomres/Jomres plugin manager.
small change to ensure that the url is passed through the jomres_decode function so extraneous slashes and other html special chars are decoded before the url's used.
Modified the class that sets up the booking form page, removed part of an if statement that ensures that the SRP calendar is shown if fixed period bookings are enabled. Don't understand why it's there, and doesn't make any sense to leave it in-situ. Seems that it was added in v3 and my records don't go back that far.
Added a couple of options to the viewproperty array in aid of third party developers.
Modified the confirmation letter script to use medium thumbnails where available.

Updated French and Portuguese language files, many thanks Mario!
Added an updated version of es-ES.php to the core code, many thanks Juan Antonio.

Jomres 5stable

Minor tweak to installer to stop it reporting that it's creating the extra services table if it already exists.
Tweaked queries that pull tariff and room booking information from db when setting up the booking object.
Removed height: 1000px; from viewproperty left col in css file as it should no longer be appropriate.
Added j00509form.class.php to obsolete files class.
Added old gateway templates and images to obsolete files list.
Modified the updater to no longer check the license key.
Removed old creditcard storage mechanism.
Modified dobooking to remove some html and added that missing html to the dobooking templates.

Jomres 5beta1

Removed a lot of files which have now been added as plugins, removed some remaining 'form' plugin files and created a new core-plugins folder.
Modified installer to put core Jomres plugins into the core-plugins directory, instead of remote_plugins.
Added some code to remove anti-xss code inserted by the input filter when adding a new plugin.
Modified code that removes plugins to take into account the new core-plugins directory.
Added a new booking form to be used by non-room based properties (eg. jintour would use this template instead of the one it carries natively).
Applied some tweaks to the booking forms to improve layout etc, thx Aladar.
Reworded the optional extras selection header to make it more generic.
Small tweak to booking form font size, and a modification to show the services total in the booking form (bug fix).
Disabled output filtering, causing site slowdowns and not massively necessary.
Added a warning to the plugin manager to not install all plugins when first starting out.
Modified the prep search by price ranges code to use only prices from published properties.
Modified list properties to not show paging if called via ajax, and filter properties to not output the sort order dropdown for same. For ajax generated property lists we'll need to find some other way to sort the search results as the two above are not suitable for this scenario.
Modified plugin manager to highlight main system plugins.
Modified property list dashboard element to not show anything if the user's a receptionist.

Jomres 4.7.8

New number images contributed for use in the booking form, kindly donated by Eleanor. Thanks very much! Booking form templates improved to use them better.
Small change to jomres.js so that fading out feature only kicks in if the room booking functionality is used by the property (ie, so that the address/extras stuff isn't faded out for a jintour property.
Fixed issue reported by Duxiana in new coupon functionality, guest dropdown list shows firstname/firstname, not firstname/surname in the edit coupon page.
Corrected the installer, one of the 'add column' parts for the new coupon functionality didn't have it's corresponding insertion code.
Added a check for property uid = 0 in coupon functionality giving us the ability to have system-wide coupons in the future.

Jomres 4.7.8beta1

Added functionality so that coupons can only be valid for certain dates, as well as only used within certain periods, and a coupon can be assigned only to a specific guest.
Some users are having problems because they've edited files for Jomres and forgetting (or not knowing) that the files should be saved "without BOM" (byte order mark). These changes will allow us to attempt to remove the BOM from all areas of the output that's returned by the server to the client browser, hopefully thereby fixing issues some folks have had with the Show Profiles feature.
Added an option to not include the jomres jquery ui css file in the head of the template.

Small fix added to css to stop date picker's empty div from showing on the bottom left of the page on some templates.
Added a missing closing div to edit_room.html
A couple of changes to stop the block IE error code from showing above the page's body, instead added it to jomres.js.
Added charset to info sent to paypal
Modified regprop step one to use jrConfig limit_property_country_country (the setting in Site Config when managers can set the default country) to set a new property's country.
Added a few "if not exists" to the installer.
Some CSS changes to make Jomres blend better with our own joomla template.
Added a few missing settings to jomres_config.php, these will then update the site setting's 0 profiles when the user next uses the install_jomres.php script when they upgrade.
Cleaned a lot of files with trailing spaces in them, could be the cause of some servers being unable to use the manager choose functionality.
Upgraded html purifier to 4.3.0, instead of the older, obsolete 4.0. 
Modified the delete room script only trigger an error if there are future bookings for a room.
Applying a potential fix to the "looping on change property" issue.
Found a way to allow a property manager to switch to a different property without having the manager's toolbars popup mid-redirect.
Added an option to the generate date input function that allows us to tell the function to show historic dates in the calendar.



=======
New number images contributed for use in the booking form, kindly donated by Eleanor. Thanks very much! Booking form templates improved to use them better.
Small change to jomres.js so that fading out feature only kicks in if the room booking functionality is used by the property (ie, so that the address/extras stuff isn't faded out for a jintour property.
Fixed issue reported by Duxiana in new coupon functionality, guest dropdown list shows firstname/firstname, not firstname/surname in the edit coupon page.
Corrected the installer, one of the 'add column' parts for the new coupon functionality didn't have it's corresponding insertion code.
Added a check for property uid = 0 in coupon functionality giving us the ability to have system-wide coupons in the future.

Jomres 4.7.8beta1

Added functionality so that coupons can only be valid for certain dates, as well as only used within certain periods, and a coupon can be assigned only to a specific guest.
Some users are having problems because they've edited files for Jomres and forgetting (or not knowing) that the files should be saved "without BOM" (byte order mark). These changes will allow us to attempt to remove the BOM from all areas of the output that's returned by the server to the client browser, hopefully thereby fixing issues some folks have had with the Show Profiles feature.
Added an option to not include the jomres jquery ui css file in the head of the template.

Small fix added to css to stop date picker's empty div from showing on the bottom left of the page on some templates.
Added a missing closing div to edit_room.html
A couple of changes to stop the block IE error code from showing above the page's body, instead added it to jomres.js.
Added charset to info sent to paypal
Modified regprop step one to use jrConfig limit_property_country_country (the setting in Site Config when managers can set the default country) to set a new property's country.
Added a few "if not exists" to the installer.
Some CSS changes to make Jomres blend better with our own joomla template.
Added a few missing settings to jomres_config.php, these will then update the site setting's 0 profiles when the user next uses the install_jomres.php script when they upgrade.
Cleaned a lot of files with trailing spaces in them, could be the cause of some servers being unable to use the manager choose functionality.
Upgraded html purifier to 4.3.0, instead of the older, obsolete 4.0. 
Modified the delete room script only trigger an error if there are future bookings for a room.
Applying a potential fix to the "looping on change property" issue.
Found a way to allow a property manager to switch to a different property without having the manager's toolbars popup mid-redirect.
Added an option to the generate date input function that allows us to tell the function to show historic dates in the calendar.



>>>>>>> .r1408
Jomres 4.7.7 06/04/2011

A small change to prevent properties with 0 tariffs from showing the prices.
minor template changes, mainly, to prevent the toolbar from rendering when saving something.
Change to resolve issues with IE and redirection functionality.
Fixed an issue caused by upgrading jquery to 1.5.1. when trying to edit rates with the calendars in Micromanage.
Change to how jomSearch class is called. Should mean that devs can override the class if needed. Uses jr_import now.
Added some definitions for ajax urls that I intend to add in the future to the rest of the system.
Some changes to how the http protocol is manipulated. In short, removed the manipulation as we're no longer offering the "ssl in the booking form" switch.
A tweak to see if we can resolve the browser moving the viewing area to the top of the page when we click on a tab.
Added jquery ui 1.8.11 to jomres
Added an option to site config -> search options tab to allow a property manager to choose how the search by guest numbers search feature should work.
It would appear that over the years the "registered users only can book online" option has been neglected as the system has evolved, meaning that non-registered users are seeing the dobooking links. Fixed to work again.
Added language definitions to paypal redirect script and Edit Labels area.
Added a couple of contributions from Marco regarding translation of custom field names in the hotel and guest emails.
Modified edit profile so that check all selector selects all checkboxes.

Jomres 4.7.6.1 30/03/2011

Updated language files with new definitions (forgot to add them to the 4.7.6 release. Silly moi).

Jomres 4.7.6 29/03/2011

Added new feature to output prices and periods so that they can be customised to be by night/week/month.
modified the booking forms a little to fade out panels until a room has been selected (mrp) or a valid tariff found (srp).
Some markup fixes.
Fix a few stray apostrophes in the search combo dropdowns.
Added animation when ajax kicks in.
PHP mailer exception class renamed to prevent naming clashes.
Added jquery 1.5.1 to svn and Jomres. Won't remove old version until the version after this, which will give us time to ensure that functionality works as expected.
Small change to make sure the toolbar isn't rendered when deleting a property. 
modified the sh404sef plugin to correctly determine the 'task' so that it runs correctly.
New change to generate the booking number when the user passes the process payment point, instead of the insert booking point. This is for developers who need to pass the booking number to remote gateways.
Improved archive audit trail functionality to only archive 1000 records at a time, and run far fewer queries.
Improved layout of config panels in frontend.
A variety of UI tweaks to improve page consistency for property managers.


Jomres 4.7.5 15/03/2011

Fixed a bug where `tax_rate_val` wasn't added on first install therefore adding new service charges to existing bills wouldn't work unless the installer'd been used to upgrade the db.
A small change to fix the type of commission rate in the administrator area view property page.
Modified a file to prevent the 'form' gateway from appearing in the gateways list in the property configuration page. We want to discourage users from using this gateway as it involves entering creditcard details on a joomla based server, whereas in fact they should be using a full payment gateway that is PCI compliant.
Fixed a bug introduced by a new change which prevented currency formats being shown in the tariffs and currencies tab of property config.
Small change to ensure that the booking form property config option Show max guests per booking affects the room type dropdown list in the booking form, as well as the 'classic' list.
Removed some old references to popup in the slideshow and view rooms urls in property details.
Added a check for the php version when installing.
Added search by price range text to touch template functionality.
Added code to enable switching off of jquery ui.
Edited the frontend list propertys (that a manager sees if they're not a super manager) to work with the jquery ui classes.
Added jomres_decode to the listyourproperties script.
Some changes to bring manager's page's css into line with the rest of the jquery ui usage on the system.
A few changes to stop the language switching back to English for no good reason in the administrator area, and changed some country name editing mode functions to ensure that the constant uses the country code, not the country name.
Some changes to the Jomres installer to resolve issues where users are having to use the discover feature to install Jomres.
Added bulgarian to Jomres lang library. Many thanks Hristo Yanev
Updated frontend list invoices to look better on the page.
Modified the booking engine to show a 3 month picker in the arrival date, and to allow the booker to choose historic dates if we're amending a booking.
Modified amend booking functionality to force the rooms list to switch back to the 'classic' room selection style if we're amending a booking.
Added feature to automatically create an index.html in the remote_plugins dir once a plugin is added.

Jomres 4.7.4 24/02/2011

Change to normal editing mode, separates non-srp or srp only room types from room type list.
Some changes to resolve couple of issues where sanitised apostrophes are not decoded for before they're output.
Modified a j1.6 specific function to correctly identify if we're in the administrator area.
Fixed a bug where realestate properties in the property list were giving the booking link, not the contact owner link.
Added a flag to the showtime variable to identify jomres as a heavyweight system ( > 200 properties ). If so, then we won't try to translate property names in the super manager's dropdown.
Added a check for minimum_interval, if it's not set to > 0 we'll set it to 1. If it's left out, the booking form will fail with a js error so this should prevent that from happening.
Added new functionality to administrator list properties that allows a user to list properties by property initials.
Fixed a naughty little bug where if a site doesn't have any global custom code (from the Touch Templates/Label editing feature) then Jomres can't merge the global and property specific code, meaning that the custom code isn't correctly found by the custom_text class.
Added XPF to currency codes.
added html5 input types for emails in booking forms and contact owner.
Tracked down an illusive bug that was causing languages to be reset to en-GB when touch templates/label editing was used, causing translations to not work for any lang other than English.
Undid some ssl booking form specific settings. With Joomla's sef url functionality it's become impossible to get urls working properly so that Jomres can rewrite http:// to https://. From now on, it looks like we'll need to disable the ssl in the booking form functionality.
Further improvements for decoding urls before they're displayed, and improved urls when generated by router.php
Fixed a bug where currency formats weren't being found correctly in list properties.
added some code to allow the property selection feature to redirect calls even when there are ' in the property's name.
Added a hidden option to put buttons for room selections back into the booking form.




Jomres 4.7.3 07/02/2011

Added simplified site config settings option.
Found a bug in new code that deals with property configuration. If this is a new installation, and the property's config as not been changed, then a property's default mrConfig will be NULL. This is not desirable when the default config and property config arrays are merged (sets the property's mrConfig to NULL) so new code has been added that converts the property's temp config to an array if NULL, and then the merging goes ahead ok.
Renamed our example guest to somebody a little more in keeping with the Fawlty Towers ethos.
Added more icons for different room/resource types, added code to installer to create new resource types on first installation. Updated vehicle and yacht brokerage lang files.


Jomres 4.7.2 02/02/2011

Fixed a bug in a new function that prevented the booking form from showing.

Added the ability for the site administrator to choose a site's language context, in other words they can choose to use a Car hire/Yacht Brokerage language file instead of the default Hotel type language file. This does not override a property's language file as defined by it's type.
Added a new propertyrental subfolder to languages dir, all existing language files copied to dir to maintain the existing property relevant text. English lang files in /jomres/languages will be edited to be more relevant to units/objects/businesses, instead of simply related to hotels.
Renamed a language directory sub directory name in property types in installer.


Jomres 4.7.1 02/02/2011

Modified show reviews to html entity decode to allow ' to show properly.
Modified minicomponent handling and database class to log which minicomponents are making db queries.
Improved tracing in db class.
Modified custom_text.class.php to actually work as a singleton
Modified list properties to not figure review functionality if reviews are disabed in the administrator's config.
Modified property list so that Contact owner link is shown as a button.
Small change to prevent editingmode and other dropdowns from appearing if popup set to yes (eg, when showing a printable invoice).
Removed some redundant echos from deleteguest.
Some changes to improve ssl handling.
Fixed an odd bug where the departure date for a new black booking wasn't showing the calendar icon. Caused by microtime reporting exactly the same when the the function was called at two different times. Replaced the unique id generating functionality with Jomres' random string generator instead.
Modified basic property details and other functionality to optimise how basic property details are found. When the jr_user is set up, we'll do a bulk query to find property names that'll be added to the property name dropdown box. The older method would generate a lot of queries, this and future optimisations will reduce the number of queries performed to find basic data of the user's properties.
Modified custom text class to do one query instead of umpteen to find custom text strings.
Performance enhancements added by preloading some data.
Added new options to define the sizes of small and medium thumbnails. Small are for the property list, whereas medium are for the property header.
Renamed Touch Templates to Label Translations
Added a new browser detection class to Jomres and removed the older method. Reduces the chance of colliding with another component who's name escapes me now. swfreemenu?


Added functionality that allows a site manager to enable commission handling. When this is enabled, the property manager can see their commission invoices (these are no longer viewable by the property manager's normal list invoices page). Added feature to use the invoice cron to suspend managers who's accounts have not been paid after their due date + "threashold" have expired. 
Modified php mailer to no longer echo errors on error. 
2 new functions that return all super property managers, and all suspended managers.
New ROI tab added to Site Configuration area. Enable subscription and commission handling moved to this tab, along with comission settings features.


Jomres 4.7.0 11/1/2011

Various changes to enable Joomla 1.6 installation.
Found and fixed a security issue where a manager of property A can modify the user details of a user on property B (where the manager has no rights to edit that user's details).

Small change to save room script to ensure that the passed variable is cast as a float by the filtering function.
Small change to stop jomres from including an obsolete js file.
Disabled old gateway log marking the property uid number.
Modified booking insert functionality to not check for rooms already booked if not using room booking functionality of the system.
Small change to ensure that if micromanage is used, then the showtariffsasweekly setting isn't used. (IE to say that prices are per week) list properties and show tariffs scripts.
Found an errant jquery uiblock call in jomres.js. Removed.
Modified get property name function to use newer singleton functionality.



Jomres 4.6.1 6/1/2011

Added a clause to remove <x> from page titles (it remains in the page source).
Modified new functionality so that if a property doesn't use rooms in the booking form, to simply set the departuredate to the next day (dependant on the minimum interval) internally.
Modified invoice creation functionality to only mark an invoice paid on creation if the depositpaidsuccessfully flag is set to Yes and the init_total of the invoice = $deposit_required.
Extended new arrival/departure date functionality to take into account those properties who're configured to not show the departure date in the booking form.
Modified edit property script to html entity decode strings before they're displayed during editing.
Some minor changes to html_entity_decode town/region links in the property list.
Small change to take into account capitalised usernames in grant access function.
Added experimental rounding to try to ensure that rounding is performed correctly.
Modification to display booking script to not add tax if the prices are inclusive.
Modified configuration functionality to allow managers to enable slideshows in property details, and stopped configuration from switching to property admin on Save.
Removed redundant "don't use both tax configuration option settings" message from tariffs and currencies.
Modified property details handling functionality, now tabs are added via minicomponents, makes it much easier for third party developers to add new tabs easily.
Added some effects to the rooms list hiding/showing javascript. Finally got rid of interface.js, which has been with us for about 4 years but is no longer required. Booking form template updated.
Modified the booking engine so that room buttons are now better styled with Jquery ui (whole button is clickable, not just the link)
Removed jquery.blockUI.js and it's associated functionality from jomres.js. This was what would block parts of the interface from interference while the booking form's ajax functionality was running. Waaay back when web2 was new this was useful, however now ajax is common, we have faster servers, internet connections, pcs and javascript libraries and it's no longer necessary. In it's day it was great, but now I'm sick of looking at it. 
Removed jquery-1.4.2.min.js from our javascript library
Upgraded booking form and confirmation pages with jquery buttons.
Applies the fix suggested by Marc, thanks. http://www.jomres.net/index.php?option=com_kunena&func=view&catid=10&id=2537&Itemid=290
Further small changes to links in property details and list properties to make the buttons work like buttons. Modified booking form so that it uses the jquery highlight and error classes.
Commented out input error/highlight options in property config as we're now using jquery highlights. Also removed the minicolour picker as that's no longer required, and disabled the 'edit icon size' options as it's redundant.
Less is more.
Fixed an issue with touch templates where the constant's which include the word "script" is being inserted into the custom text table with <x> inserted.
Small change to prevent realestate properties for showing a book now link (duh)
Modified extra services functionality to include the tax rate at the time that it's entered. This allows us to calculate the resulting total in the edit booking page.
Added Street, Town and Postcode to translatable fields in Edit Property details page.
Added option to disable jquery inclusion in the frontend.
Removed some code from booking engine that was causing micromanage tariff calculations to use the 'charges stored weekly' setting, even though it's redundant in Micromanage tariff editing.
A variety of changes to remove redundant code, and remove styles from the code in the property list, property details and property header.
Changed Save Coupon link to a button in the booking form.
Added two new js variables to the booking form for highlight and error, removes need to define the jquery ui's highlight and error classes in the code in handlereq.php
removed ui error css from booking engine by applying the error_class through js after the rooms list is regenerated.
Modified admin notes to remove redundant thumbnail setting, and advise the size of thumbnails. Added note to max upload input to show php's max file upload limit.
Modified list properties display reviews functionality to open in a dialog popup.


Jomres 4.6.0.1 15/12/2010

Modified Jomres to ensure that a room booking isn't created when a property is a jintour property
Modified micromanage output, removed min and max rooms already selected output if the property is an SRP
Improved booking engine by passing the departure date along with the arrival date via ajax when the arrival date is changed.


Jomres 4.6.0 stable 13/12/2010

Some additional changes to improve new functionality that allows us to set some dates in a micromanage tariff to zero. This new code filters tariffs out if the tariff is zero within certain dates. Gives us dynamic minimum intervals.

Modified contact owner script to ensure that it uses the correct language strings.
Small change to stop manager's toolbar from popping up unnecessarily when amending a booking.
Improved amend booking functionality to include line items when a booking is modified.
Added an extra space because "prices from" in the property list in english runs up against the price itself.
Swapped labels around, house number was showing under street and vikki versa in guest details template.
Small change to list user's invoices so that template is still shown if the list is empty.
Modified show tariffs to not show a tariff if the price is zero.
fixed amend booking so that number of guests in the party shows up in the top advisory when amending a booking.
Added forgot password functionality to Jomres SA.
Fixed small bug where global currency code wasn't used when generating the link to xe.com for currency conversion. Ty Aladar.
Modified the method of detecting the absolute path. Looks like some servers have changed what $_SERVER SCRIPT_NAME reports, borking our older method of figuring out the path. This change adds a check for SCRIPT_FILENAME instead and uses that if available. Need to monitor this change.
Fixed a missing close table in the hotel confirmation email template.
Added trashcache code to savecustomertypes minicomponent. 
Added new functionality to delete a partner from the partner's list.
Fixed a minor bug where the super property manager's image wasn't showing as a ninja in show profiles.
Fixed showconfirmation to ensure that extra names are translated.
Added the old backend addproperty script to the obsolete file handling list.
Replaced overzealous filtering in editinplace with simpler sanitization to discern the name of the constant being edited.


Jomres 4.6beta1 23/11/2010

Modified how dates date range array is calculated in blackbooking functionality, certain timezones were not crossing over correctly 5th November.
Added booking number to confirmation letter. 
Moved a management view option into a detected cms block so that Jomres SA doesn't trip over it and report an error.
Disabling management_view if Joomla's sef enabled. 
Fixed minor bug where installer couldn't create discounts table if it already exists (added  IF NOT EXISTS to the query).
Modified installer to resolve issues where Jomres reports errors installing on mysql server if strict mode is enabled.
updated cms specific installation script to take into account mysql strict mode.
Added a check for the setting to exist before returning it in the showtime class.
Modified how urls are detected within Jomres. If Joomla's internal SEF is enabled and the Jomres use ssl option is switched on we need to apply the 'live_site' variable to the url otherwise Jomres can't str_replace some urls with https. Means you can't have SEF urls within Jomres, and ssl in the booking form.
Modified cms_specific_functions.php to correctly find the current user's id in wordpress.
Disabled session id check in jr_user class as session id not set in wordpress, and I don't think we need it any more.
Removed old jquery corner javascript from Jomres libraries.
realestate property template updated to bring it into in line with the rest of Jomres' jquery ui handling.
Updating Jomres css file, removing obsolete classes.
Further css tidying up. Moved call for jomrescss.css to futher down in the init_javascript function to enable it to override jquery ui settings. Show tariffs and rooms templates updated with jquery ui classes.
Modified str_replace of http to https functionality to take into account single property installations and the booking form in the property details page.
Italian language file fully translated and brought up to date with the current version of Jomres. Many thanks Luca.
Modified add plugin functionality to only bypass remote download of plugin aspect of system, so thirdparty plugins should still install if the license is out of date.
Modified dobooking to ensure that last minute discount is calculated BEFORE taxes are figured out.
Modified countries.php so that the country names can be alphabetically sorted even if they've been translated.
Modified gateway validation routine to ensure that correct gateway plugin is checked and used by Jomres.
Modified currency codes class to change "Bs F" to "Bs". Thanks for the update Yubisay.
French language file updated, many thanks Mario
Added suspended column to user manager's table.
Fixed a bug where smtp emails weren't being sent when auth settings required.
Added new functionality to suspend property manager accounts. This gives us a base to work on for future functionality as we improve the commission handling in the system.
Added 00005 trigger point to admin.php. The main purpose for this addition is to allow plugins to include a language file post language detection to ensure that we're including the correct language file. Previously we'd use 00001 however this is no longer appropriate as the language is detected later in the workflow now.
Modified guest views. Added remove favourite feature and generally tidied up a few templates to make proper use of the jquery ui css. Also modified view favourite functionality to make better use of the basic property details class which provides fuller translation of property address details.
Modified list properties to not show the broken link to a non-existing room type image. For jintour specific properties.
Created new admin feature to see raw booking data stored in the booking data archive.
Added thumbnail handling to Jomres.
Modified SA to not generate title and keyword heads as Jomres will generally manage that.
Minor fix to searching functionality to pop the searchAll option off the beginning of the features array when showing features as icons instead of dropdowns.
Moved manager/reception/user toolbars out into their own minicomponents, moved top and bottom templates out into their own minicomponents. This allows us to totally remove these toolbars programatically, if we so wish.
Improved bug reporting functionality to include more information.
Undid property name translations from router.php, in Joomla SEF mode this is causing Jomres to not be able to find the property's property uid when doing booking confirmations.
Small change to improve room type dropdown layout output.
Modified singleton abstract to search remote plugin dirs for classfiles to create as singletons if they're so constructed for such use.
changed data sent to paypal when paying immediately. swapped output_price with number_format.
Minor tweak to lang file to ensure that new user creation function is only valid in Joomla.
Renamed j06002list_property_invoices.class.php to j06001list_property_invoices.class.php to ensure that receptionists can see invoices.
Fixed an issue in SA where the wrong from email address was being used when sending forgot password links.
corrected collection of 'task', removed <x> added by filtering code.
Small change to a query to ensure that SRPs that are changing their property type (ie for room type associations) don't see MRP room types in the dropdown.
Fixed bug where using the edit invoice feature in the backend wasn't setting the subscription as paid if the invoice was a subscription invoice. NA normally as usually a different mechanism is triggered to mark invoices as paid.
Modified jr_user to become a full Jomres singleton, as it was found to be causing intermittent bugs in a new plugin in it's older php4 class style. 
Modified how the property's room types are generated in the room type dropdown (SRP).
Modified property creation functionality to allow input of realestate type property prices at creation time, and corrected a bug where the price wasn't being shown in the property details.
Modified the invoice table to include an 'is_commission' column. 
Improved guest's invoice layout to show invoice line item contents.
New functionality to allow a logged in guest to change their details via an Edit Account link.
Finally solved the 'paging' problem (or lack thereof) in Show Profiles. Realised that even if we used paging, searching for a user to create as a manager would still be laborious so instead adopted the last version's functionality that searches for partners to search for managers. 
Added search by guest numbers (looks at max people column in tariffs) and search by star numbers. Only works in integrated search atm, modules will need to be updated separately.
Modified language switcher to always show the language dropdown when in the administrator area.
Some further changes to make viewing of commission invoices possible by the property mananger, plus added a commission invoices button and functionality to the administrator area. Also tweaked pseudocron to stop it from showing too many log events.
Added serbia & montenegro to countries file.
added a switch that outputs prices for real estate properties in the property list.
Added an experimental change to the booking form, we pause for two seconds to collate data before it's passed to the confirmation page. This seems to resolve isolated incidents where the guest details aren't always captured at booking time.
Added a check to the dashboard. If $_REQUEST requestedMonth is set, then don't use the cache.




Jomres 4.5.8 24/9/2010

Added a new view of the Jomres content area which allows the property manager to view just Jomres. This is both a faster interface (you're not running any of the Joomla modules) and allows more flexibility when branding the interface.
Added functionality to allow us to translate country and region names via touch templates.
Added a timezone switching feature to the managers toolbar. Disabled by default, this should allow users on one continent to work on a server on a vastly different timezone.


Fixed bug where booking_room_specific_info array was not passed to the confirmation template.
Modified handle req to adjust the departure date only if the date is < arrival date - min interval.
Added functionality to allow us to have cms specific minicomponents.
Modified gateway validation function to use $_REQUEST instead of $_POST, allows us to pass the gateway name in the url, instead of just via a form's post method.
Fixed Jomres SA's cms_specific_urls.php so that JOMRES_SITEPAGE_URL_NOSEF sets the url correctly.
Small change to dobooking_srp.html to make sure invisible items stay invisible.
Modified pricing output functionality in list properties to check to see if gross pricing is set before calculating the inclusive price.
Clarified and simplified string filtering. Ensured that if html editors are not allowed, that all input and output text has virtually all html stripped before it is saved/used.
Modified new management process selection feature to ensure that the correct template is shown in new property step 2.
Changed how micromanage->averaged prices are calculated when same room types are chosen with two different tariffs.
Fixed a faulty delete review query.
Modified router.php to use the translated property name.
Added initial functionality to allow Jomres to be integrated into Joomla 1.6. After Jomres phase of installation is performed, the site manager then needs to go to the Joomla extension manager and use the Discover feature to continue installing jomres. Other functionality like creating news users on bookings hasn't been tested and wouldn't be expected to work at this time.
Fixed issue where it wasn't possible to edit created extras.
Further work to resolve rounding issues. Removed number_format functionality from insert booking minicomponent, ensuring that calculated prices are inserted with as many decimals as possible, then added output price functionality to view and list invoice functionality.
Small change to booking engine's growl output functionality to ensure that dev popups are shown, and removed some old code.
Fixed typo in the language file. Propertys shmoperties.
Added rounding fix output to administrator area list invoices, however the same cannot be added to the edit invoice area because the currency code will prevent the discount calculation javascript from working.
Updated install_jomres.php to associate room types with property types on first installation.
Added new version of pt-PT.php, many thanks Mario Oliveira
Added Azerbaijan New Manat to currency codes class.
Added an internal feature to disable the paypal link when calling the view invoice function as part of the hotel's email.
Removed context word from booking notes.
Tweak guest's toolbar to use jquery ui widget css.
Upgraded jgrowl, which manages the popup messages. Modified it slightly (L191) to not use the "messages" class as the message using the header class within the context of the popup is ugly. Css file updated too, and jomrescss.css modified to remove the "header" class.
Added centering for SRP availability calendar.
Upgraded jquery ui to 1.8.5
Modified search functionality to add the "All" option to the feature search dropdown.
Modification to booking engine so that when in micromanage, we can filter out tariffs that are set to 0, allowing us to layer tariffs over each other, offering different minimum intervals.


Jomres 4.5.7 19/8/2010

Further changes to Jomres to support non-room based bookings. These changes are required to support the Jintour plugin.

Added a function to detect each dir in the ui themes subdirectory and find an appropriate css file.
When dealing with larger numbers finding number ranges for the search feature caused an out of memory error. With help from http://www.php.net/manual/en/function.range.php#85331 we've changed the foreach method of finding ranges with a for loop, which seems to fix the problem.
Added a missing var definition to the srp booking form.
Added new functionality to allow plugins to insert their own property management process information into regprop step 1.
Fixed missing define from language file re minimised config options desc.


Jomres 4.5.6 16/8/2010

Added check to booking engine to see if jomres messaging is enabled.
Small modification to handle req to ensure that the guest allocation is reset to blank once the guest number have changed.
Modified upgrade functionality to remove chmod function. In very rare instances some of the contents of the /jomres folder might not be writeable by the web server (which is why we use the web installer, and discourage use of ftp for installation of Jomres). In older versions, as a last ditch effort, we'd ask the user for their ftp details to try to chmod any file to 777 that isn't writeable to facilitate the upgrade. This is a less than ideal process for security reasons as some users may not be aware that any file given these permissions should manually change those back after the upgrade. To remove the risk of site managers not changing the permissions back, we've removed the functionality altogether, instead replacing the code with a warning that the files need to have their ownership changed to that of the web server's user.
Added ksort to ensure the room type dropdown list always maintains the same order.
Modified room allocation functionality to output room type instead of room name if we're using dropdowns.
In rare situations the month name isn't found by the appropriate function, so in the event that '' is returned, we'll use an older method to create the month name. 
Some changes to room type dropdowns to improve layout and information available.
Modification to jomres.js. If the difference between the departureDate in the booking form and the arrivalDate is > mininterval, don't adjust the departure date.
Added some missing translations for micromanage tariff editing's property configuration tab.
List properties modified with a nice little query from Piranha that simplifies the tariff query to output the "prices from" in the property list page.
Added a new trigger 00005 that is called before the action really starts, before the manager's menus are generated in jomres.php.
Restored some mistakenly removed definitions that define month names.
small change to dobooking to ensure that srps have the departure date set too when the form is first loaded.
Updated romanian currency code in currency code class file.
Added the beginning of new functionality that'll allow bookings to go through minus room bookings.
Hardened Jomres files against unauthorised access.

Jomres 4.5.5 30/7/2010

Note that there are changes to both dobooking.html and dobooking_srp.html, please ensure that your version (if you've modified it) incorporates the new changes otherwise your booking form will not work.

Minor changes to advanced editing and installer to clarify room types need to be associated with property types.
Added sanity check to warn users that the property is not yet published.
Re-enabled the SRP only option for room types.
Added commented out code to show how to disable popup in tooltips for room types and property features.
Modified booking engine functionality to disable a date in the calendar if all rooms for that date are booked.
Fixed issue where dashboard date when click wasn't used in the booking form.
Modified jr_gettext functionality in micromanage list tariffs and dobooking to enable translation of tariffs.
Couple of changes to dobooking to enable the date to be selected correctly when coming from both a date setting link, and a non-date setting link, specific to fixed period dropdowns.
Disabled translation of a button when in editing mode, as it breaks the button.
Implemented jquery date picker localisation files into Jomres.
Modified amend booking functionality to correct invoices once the booking has been amended.
Started adding files and functionality to install Jomres on WordPress 3. Functionality is not complete, as can't yet find how to reliably add our javascript files to wordpress, so this will remain a work in progress for now.
Added code to ensure non-booking form date picker pairs in search modules will set the departure date to one day after the arrival date.
Changed outgoing email's url to JOMRES_SITEPAGE_URL_NOSEF as Joomla's sef strips out the live_site.
Modified guest email to translate extra correctly.
Small modification to new date blocking functionality in the booking form. Disabled date blocking on the departure date. If a guest selects a day before a day that's fully booked, they can't actively choose the next date as the departure date because the room is booked the next day. It doesn't actually matter as the javascript's already done it for them, nevertheless it might confuse some people.
Added options to change the default search order, and whether or not to show the dropdown.
Added new functionality to the booking form. Property managers can now choose whether or not to display the classic rooms list, or choose rooms types from a dropdown.
Some minor functionality changes for new room type list dropdowns in the booking form.
Fixed a bug where the wrong room type was offered in the room type dropdown in micromanage edit tariff.
Fixed an IE issue where it complains about focus when the booking form is in the property details.
Added option to set start day of js and availability calendars from sunday to monday.
Added an option to allow site managers to only allow guests who have bookings with a property, to make reviews.
Modification to allow us to bypass gateways if the value of the contract is 0.00, so managers offering 100% discounts via vouchers can take bookings. Previously, this would have gone to a gateway but of course gateways will not handle 0 amounts as there's nothing in it for them.
Fixed http://forum.jomres.net/index.php?topic=3748 Thanks krsjan.
Added an extra model "per room".
Don't show the pay now link if the total is 0. (invoice page).
Clarified Jomres license to indicate that "jomres" is trademarked, that php files are released as GPL2/MIT and that all images, css and javascript copyright me are not freely distributable.
Removed unused definitions from language files.


Jomres 4.5.4 29/6/2010

Some changes to make tariff editing work better for SRPs after the room type changes of 4.5.3
Experimental tweak to single person supplements to divide the booking fee by the number of people in the booking after the number of times SPS has been found to find the SPS value for multiple rooms.
Fixed some missing calls to get the translated property name (thx Piranha).
Fix for system error when manager tries to make a booking, caused by new plugin validation check in 4.5.3
Rewrote chunks of the booking engine to internally assign guests to rooms to improve single person supplement functionality.
Commented out code that tries to make the anchor of the tabs based on the name of the tab. Too many non-latin users were reporting problems with tabs.
Instead we'll just use the random string generator to create the anchor.
Small change to micromanage saving to ensure that dates are saved in UTC.
Fix for fatal error when paypal override enabled.
Modified showconfirmation to ensure that gateway options previously configured are no longer available once paypal override set to Yes in administration area.
Fixed issue where if Advanced tariffs, Average and tariff charges are stored weekly, then the Tariff estimate would show the daily price instead of the weekly price.

Jomres 4.5.3

modification to micromanage handling to ensure dates/times worked on are set to UTC.
Fixed a wrong database table name. Don't think the issue caused any problems, but it's nice to be right anyway.
Added check to see if show only availability calendar option is enabled, if it is we'll need to show the booking form links.
Modified availability calendars so that dates are converted to the JavaScript calendar input format before the url to the booking form is constructed.
Removed some commented out lines that revision 911 now makes superfluous.
Added translation of property name and room type full descriptions to "accommodation" panel in booking confirmation form.
Modified a loop that filters returns when a search results produces > 100 properties. The old loop didn't take account of missing keys in the property uid list, the new one does.
Fixed bug where room rate wasn't correctly figured for gross prices when in micromanage and average mode enabled.
Removed click on free date message in availability calendars if the booking form is in the property details.
added JOMRES_SITEPAGE_URL_NOSEF to standalone cms_specific_urls.php
Modified how the captcha form initialises it's action, as the old approach, which came from the captcha handing's functionality, was getting mangled by Joomla's sef handling.
Fixed bug where wrong currency code was being recorded in an invoice.
Enabled option to switch booking form from property details to it's own page.
Added an option to show tools tips without the actual JavaScript, instead showing the title next to the icon.
Added table and code to cross reference room types with property types, and dropped the old SRP option in room type configuration. This gives us greater flexibility when creating room types and they probably should be renamed to something like "links" or somesuch in the future. There shouldn't be any need for properties to modify their tariffs or rooms, however site managers of existing installations will need to edit their room types and associate existing room types with property types.
Added FILTER_FLAG_STRIP_HIGH to the generate tab anchor function. Whilst firefox and IE happily work with utf8 chars in an anchor, Safari doesn't. 
Implemented jquery ui's datepicker functionality to replace the older dhtml date picker which hasn't been updated in years and is starting to show it's age (for ex. August in Chrome doesn't seem to show). I'll leave the older code in-situ for now in case somebody wants it, but in time, once I'm sure that the new code works flawlessly, we will remove it.
Resolved http://forum.jomres.net/index.php?topic=3443.msg16041#msg16041 problem where when wiseprice active, in micromanage and tariff model is Average, then the price summary has the tax added. What was in fact happening is in micromanage, because tariffs are linked then the prices originally determined (and adjusted for the gross price setting) by getAllTariffsData are not used, instead the db is queried again. Adding adjustment to the te_setAverageRate method seems to resolve this.
Resolved a security issue reported by OSDCS which allowed a user to bypass the selected gateway and see the booking inserted without paying a deposit.


Jomres 4.5.2

Modified singleton abstract to look in the custom_code directory for any class files before looking in the core /jomres/libraries/jomres/classes directory.
Modified inclusion for countries.php to search the custom_code dir.
Changes to availability calendars to ensure that if is single property option is set to yes, then the availability calendar is shown under the booking form.
Fixed minor issue where feature popup wasn't translated in property list.
Removed a stray $ that was preventing the rate to be included in the url in the tariff list when linking to xe.com.
ROL Romanian lui changed to RON new lui in currency codes
Added new toolbar_thirdparty.html and changes to jomres.php to offer third party toolbar under the manager's toolbar, for third party plugin developers.
Prompted by a user's ticket, I decided to see how easy it would be to put the booking form into a tab in the property details page, instead of in a page of it's own. It turned out to be remarkably easy.
Fixed bug which only appeared on Single property setups where an availability calendar search is performed and the user is taken direct to the booking form. Arrival date wasn't parsed through JSCalConvertInputDates to convert the date to a YYYY/MM/DD format therefore dates were being set to impossibly long periods (millions of days) resulting in an out of memory error.
Small modification to composite property details to switch off the Book now link in the top toolbar if option to show the booking form in the property details page is enabled.
Minor reordering of tabs
Small change so that if iphone is detected by Jomres, then the browser isredirected to the site but with tmpl = component, thereby switching off headers/modules etc, leaving just Jomres.
Small change to blackbooking template to not show the reasons field until the black booking dates have been selected.
Removed links from installer as they sometimes wouldn't work if the Joomla installation is in a subdir off the main site's root. Because of how the live_site is detected by the Standalone functionality, the live site cannot be properly detected during installation until we're actually integrated into a CMS/framework. Trivial problem, but it would instil concern among some users.
Modified system so that in tariffs and currencies you can configure the system so that prices input are the gross price, system will then figure tax from those prices in the booking form.
Added a restricted rooms clearing feature in event that one of the rooms in the selected rooms list has a restriction of > 1 then the entire room selection is cleared. It's not an elegant solution, but it should resolve the initial problem where rooms limited by restrictions can be left in a booking.
Small modification to tab building function for those poor souls who haven't got PHP5.2.
Added some code to ensure that the wiseprice discount info output to the booking form includes tax.
Further change to anchor making function to remove stray ' chars.
Modified micromanage functionality, added Advanced options for ignore_pppn, weekendonly, allow_we and min and max rooms already selected options to micromanage. In time, it's likely that Advanced editing mode can be dropped altogether, depending on if we can add improved price configuration functionality to Micromanage.
Modified number of rooms already selected functionality slightly.
Added date range picking functionality to micromanage tariff editing mode.
Fixed some broken images in the favourites output minicomponent. Thanks Piranha.
Switched htmlpurifier off by default as it appears to be causing errors on lower spec'd servers.
Fixed incorrect define in spanish lang file.
Added a couple of new icons for partners, although the code isn't written yet.
Configuration of new "booking form in property details" functionality changed. Whether to show the booking form in a separate page now controlled by jrConfig, and option to change this hidden in administrator area, making it less easy to change to put the form on a separate page. Calendar output scripts changed to not show links to the booking form.
Modified booking functionality to allow bookings of 0.00 value to be inserted.
Small modification to SRP to add a missing clause for the property details in booking form option
Revised changes to availability calendars so that links to the booking form are still shown if remoteavailability is used.
Commented out the "american" room tax options in tariffs and currencies. They haven't received any attention regarding adding tax to the invoice, and there are easier ways to add fixed taxes to the booking like using forced optional extras. 
Commented out some code that seems to be resetting the fixed period arrival date to today's date for no good reason, and modified dobooking.php to not try to reconvert dates in the url.
Added Czech Koruna to currency codes
Modified dobooking to use JS cal conversion function (again). This effectively undoes the change to rev 902, but the issue is identified now so depending on user's requirements it is possible to make a simple change to restore the 902 functionality. See the notes in the file for more information.


Jomres 4.5.1

Added an option to cms_specific/joomla15/cms_specific_urls.php 'nofollowtmpl' to tell Jomres to not adopt the tmpl=component when building urls. Useful if, for example, you want Jomres to not include tmpl=component in it's links after it's been called via a url with tmpl=component in the url.
Modified cms_specific/joomla15/cms_specific_upgrade.php to upgrade router.php
Added some filtering to router.php
Modification to reviews to not show thumbs images when user not logged in.
Fix for paypal handling, resolving issues created as a result of the SEF fix for router.php in cms_specific_urls.php, and the switch to cookie based session handling.
Added functionality to save temp booking data to the database. You can't yet do anything with that data, but it is saved if needed at a later point (I'll probably build a plugin to use this data at a later date)
Small change to invoice list functionality to show names of guests who aren't registered users of the system in the invoice list.
Fixed issue where link and pay now by paypal button not showing in invoice in email from hotel
Improved review functionality. Modified property list so that "click to show reviews" link changes to hide when reviews shown, removed error message when a review is published/unpublished, changed how the publish/unpublish button works so that image is swapped on click, and you can publish/unpublish without reloading the page.
Modified anchor generation function to try to resolve issues with russian lang tabs
list property and header templates modified slightly, and jomres logo image adjusted to look better in tooltip popup.
Added ability to add nocustomtemplate to a page's url so that Jomres will not use any templates which were created by the Template Editing feature. Might help with debugging issues with customised user templates.
Disabled nl2br in jomresGetParam function

Jomres 4.5

Added review functionality. Registered users (not just guests of a given property) can leave reviews (including independantly reviewing such things as hospitality and cleanliness). Other registered users can agree or disagree with reviews, or report them. Reviews can either be autopublished, or manually published via a new button in the administrator area.

Added css classes to select combo inputs
Fixed bug where new unpublished property check was interfering with selectcombo feature in module 0
Added <br/> to jomres_reconvertString when &#60;br /&#62; found.
Added nl2br to jomresGetParam function
Added check to jomres.php to ensure that property_uid > 0 before trying to not show an unpublished property.
Fixed bug where subscription isn't sent to paypal due to jomres references the wrong jquery javascript file.
Changed how tab anchors are generated to work with non-latin languages
Fix property invoice list showing firstname firstname to firstname surname.
Disabled some internal sanitisation routines of the captcha class that are no applicable to be used in Jomres, as they were causing some text to output incorrectly in the contact owner form.
Disabled some code that adds a room to the selected rooms list if coming from a room's availability calendar. Due to switching from two ajax calls to one, the totals will not be calculated when the booking form is first generated and if this code is left in place potentially a guest might get a room for "free".
Disabled some in puts in the Property Configuration area that are only applicable to the dashboard.
Added "task" to form in micromanage tariff editing because of an obscure issue where some servers wouldn't pass the "task" value so micromanage tariffs wouldn't save.
Added saveTariff as an exclusion to the sanity check to ensure that the no tariffs message wouldn't be shown if you're saving a tariff.


Jomres 4.4.2

Changed some paths for finding key validation class
Modified  jomres.php to show nothing if a property isn't published and the user isn't a manager.
Modification so in the event of a user attempting to view a non-published property a message is output and a random search is run.
Modified room number dropdown to present up to 150 rooms for each room type, not 1000.
Corrected missing quotes around email address sought for.
Fixed bug where global currency code wasn't being used if enabled.
Added Moldovan currency to currency_codes.class.php
Fixed bug where currency codes weren't being displayed in commission rate list, and wasn't being saved when editing commission rates.
Configuration panel handling rewritten to use jquery ui tabs
Fixed an error in the json response for the select combo, seems that jquery 1.4 demands that the keys be surrounded by double quotes, as well as the values (a good thing really).

Jomres 4.4.1

Fixed bug in upgrade functionality where key wasn't being passed.
Several changes to remove some stray Itemid's from urls within the system.
Modification to ensure new property_currencycode property config option is used to set the currency code in the currency conversion url.
Removed output headers inline mootools fix as no longer required.
Fixed bug where property country wasn't be set correctly when fixed countries option was set to No.
Fixed a few missing / in token hidden fields.
Updated jquery to 1.4.2, added UI library and associated css files. Had to update the Block UI library too to ensure that the booking form would continue to work.
PHPMailer v2.2 replaced with PHPMailer v5.1. I've had one client say that their hosts have disabled their site due to the older version of php mailer, which was PHP4 compatible. Whilst the only vulnerability for PHPmailer I can find refers to an older version of the script, and the 2.2 version doesn't suffer from the same vulnerability it's nevertheless prudent to upgrade to the PHP5 version as we're not supporting PHP4 any more.
Modified new purifier handling to not purify text if editing mode is enabled.
Changed property details tabs to use jquery tabs.
Removed add property button from administrator area button. Causing too much confusion for new users.
Changes to router.php to resolve "Cannot unset string offsets" bug.
Corrected Polish currency code.
Changed name of Yugoslav dropdown for language selection to Srpski
Updated version of Yugoslav lang file, many thanks bokikroki
Added jquery ui css themese as selectable options in administrator area. There are now 25 themes for you to choose from.
Many modifications to frontend templates to make use of new ui framework.
Modified terms popup to not show Joomla headers/modules/menus etc
j00015discounts.class.php removed and it's functionality added to the composite property details script



Jomres 4.4.1beta1

http://bugs.jomres.net/view.php?id=27 Fix for all guest types and numbers in confirmation email
Added a new function output_price. Currently users need to enter an http entity in the property and site config areas to output a currency symbol. In this version we've added a currency class which (should) have every currency code in the world, and their associated symbols, plus formatting for putting symbols before or after prices.
Small change to fixed period dropdowns, making it so that the first valid date found when generating the dropdowns sets the arrival date in the booking to that. Improves the initialisation of the booking form for fixed period propertys.
Moved call that generates css file to the init javascript function.
Modified invoice creator so that if $mrConfig depAmount == 1 then when a booking is created, if the deposit amount is set to Full then the invoice should be marked as paid (when the booking is eventually created).
Modified dobooking to trigger an initialising ajax call to the booking engine so that SRP have their room selected when the page first loads.
Added code to ensure that 64bit servers correctly d/l plugins from the plugin server before attempting to extract them.
Modified calculation that shows when a property is mostly full so that instead of using .75 it's using .99.
Resolved minor bug in installer where it complains about a non-existent index
Fix for issues where invoices aren't associated with cms user ids on booking creation, and where usernames aren't shown in the invoices list.
Added a fix for a trivial but annoying bug in jscalendar seen in firefox only, in the booking form. http://www.dynarch.com/projects/calendar/old/#Kcomment-200
Added html purifier library and supporting code in Jomres to add an extra layer of security for input and output filtering.
Added note to remind users to log into the frontend to administer propertys to installer
Modification to resolve issues where users have uninstalled via Joomla, then attempted to reinstall Jomres. If Jomres links aren't found in the components table, we'll attempt to re-add them.
Added jeyjey's property feature icons. Many thanks.
Fix bug report about stray itemid http://forum.jomres.net/index.php?topic=2815.0
Removed a reference to mambo that was preventing the switch ssl option off from showing in the site config
Added a new copy of cz-CZ.php. Many thanks Leonard.
Modified logging functionality so that if booking logging isn't enabled then no logging info is stored in memory. Previously it would be stored in memory then if logging was enabled then it would be written to the log file.
Added booking number to the confirmation email subject
Change to fix some noConfict (mootools) issues
Applies maakit's suggested change to cms_specific/joomla15/cms_specific_urls.php which enables Joomla's internal sef handling to kick in, and re-enabled copying of router.php in installation files
Modified cms_specific/joomla15/cms_specific_urls.php to ensure that Jfactory is only used when Jomres run through Joomla
Modified invoice handling so when the invoice is marked as paid an appropriate line item is added to reflect that so that the outstanding total is updated to show that 0 remains to be paid.
Further changes to enable us to change the output on the view booking page, takes into account the invoice balance and updates the remainder to pay field to reflect the state of the invoice. If the invoice id isn't associated with the contract uid (only bookings from this update) then the old calculation will be used.
Modified save cancellation functionality to mark an invoice as cancelled too.
Modified the delete room feature script to output a message instead of throwing an error, in the event that a user tries to delete a room feature that's already applied to a room or rooms. Slight modification of the language file too.
Modified the currency codes class to allow the site admin to set the sitewide currency code in the administrator area, and show the subscription packages using the new output_price function.
Added a new sanity check to warn if editing mode is being used with global editing enabled, provides a link to the editing mode manual page.
Added a check to captcha to see if php has been installed with Freetype support.
Added minicomponent directories array to mcHander and it's registry class.
Modified jr_import to check minicomponent/plugin directories for class files. Now there's no need to have a "00001start" minicomponent to include these class files.
Fixed some missing /trs  http://forum.jomres.net/index.php?topic=2930.msg13155#msg13155 thanks Gargano.
changed how prices are estimated in booking form for Advanced, Average model tariffs.
Modified router.php to trim property names as names with a space on the end trigger a 404 error when sef is enabled
Renamed avail room div to rooms_listing to ensure that the correct availability message is shown in SRPs
Added personal discount feature so that specific guests can be given individual discounts
main.php added to templates for xml parsing
Added new functionality to enable us to use the search feature and return (some of) the data in xml format for use via a remote site.
Fixed bug where micromanage tariff editing mode wasn't showing the short day of week for the current language, instead was always showing english short day of week.
Added search by price ranges to miscdefinesfortouchtemplating plugin
Modified system to use cookies instead of session_id, drops the requirement to run the system with Global Config needing to be set to None. With luck, any users who's servers are not configured to use sessions (admittedly, few and far between) will now be able to use Jomres.
Changes to booking form to only show coupon code row in totals table if the property has some coupons created.
Modified how SPS is calculated when set to percentage.
Modified countries.php to change wording from St Kitts to St Kitts and Nevis
Added a site config feature where site administrators can limit the "home" country of properties to just one country.
Added support key checking for upgrades and plugins



Jomres 4.4

Modified booking form javascript to convert the old two pass process (rebuild rooms list/pass other info -> calc prices) to only need to run one pass instead. The booking form runs much faster now.
Added a new method to sanitize output before it's eval'd by jomres.js
Fixed a bug where if an optional extra doesn't have a quantity, a javascript error is thrown. http://bugs.jomres.net/view.php?id=19
Modify amend booking functionality to carry over extras quantities when editing bookings. http://bugs.jomres.net/view.php?id=23
Removed two defunct property features from installer.
Added property terms and conditions to confirmation email.
Removed references to index2.php, now using index.php. (Joomla)
Added translations for subscription packages http://bugs.jomres.net/view.php?id=12


Jomres 4.3.4

Removed arrival and departure dates from tmp booking handler's reset function.
Added optional 05050 trigger for third party extras
Added new variable for third party extra's private data and added nocomplate to the javascript calendar inputs
Modified how tp extras are stored in the engine, they're now further associated with a plugin, allowing the plugin to reset all tp extra options for it's own data, if required.

Jomres 4.3.3

Fixed a couple of parse errors in Norwegian and Chinese language files
Re-enabled the MRP SRP property switch in Site Config -> SRPs tab.
http://bugs.jomres.net/view.php?id=3 Fixed ability to not delete existing template customisations
Added custom field data to confirmation form
Custom field contents added to guest and hotel emails.
Used the bugfix version of the updater to resolve upgrade issues in Jomres Core.
Removed a strtolower in the site settings singleton to aid installation issues some folks were getting.
Added code that allows us to insert rows into the extras area, and process new code in handlereq that's introduced as a new trigger. The rows trigger is 05030 and the handlereq code is 05040
Added pricing functionality to third party extras handling and insert into invoice handling.
Added third party extra information to the confirmation page.


Jomres 4.3.2

Added disabled=" " to ensure that extra quantity boxes in the booking form remain disabled until the checkbox has been clicked. Thanks Piranha.
Added single property only option. Allows us to configure a Jomres installation so that all calls to Jomres that aren't going to some "task" force the page to go straight to the booking form of the first property.
Added Polish currency code to currency_codes.class.php.
fix http://bugs.jomres.net/view.php?id=14
Fix http://bugs.jomres.net/view.php?id=16
Switched off property header in booking form if single property installation is Yes.

Jomres 4.3.1

Minor fix to German language file

Jomres 4.3

Modified edit template to fix saving not posting updated field.
Fixed default language bug
All Jomres files encoded utf8 (although notepad++ disagrees)
Fixed minor pathway bug in SA (was using a joomla function)
Corrected call to $property->propertys_uid in list propertys
Added global call to jomresConfig_lang for backward compatability
Fixed bug where property feature icon wasn't showing in integrated search
Fixed bug where property name wasn't translating in property list, added javascript to reset quantity selected to 1 when the quantity has already been selected once. Thanks Dimitris B
Added jomres_button_property_list class so that we've got different length buttons on property list and property details. Did some more work on autotranslate but it's disabled by default and there is no option to enable it yet as it is still experimental.
Modified backend addproperty to fix images not showing.
Fixed bug in installer where property features weren't being created on install
Added some calls to set showtime property uid so that the correct property name is used.
Fixed a bug which was preventing invoices from being included in booking emails.
Changed the way that the daterangestring in blackbookings is determined to resolve an issue on some servers where just the odd date is missed out.
Changed headers to indicate Jomres' new GPL license & removed licensing code.


Jomres 4.2.2

Modified create property functionality so that the property type is selected on the first page, allowing us to use a property type language file in the "edit property" section (so now eg you can use yacht/boat specific language instead of the generic property language when creating a new boat)
Improved searching on price ranges when realestate properties used, and fixed bug where searching on Any price range wouldn't produce a result.
Various further improvements for realestate propertys (ie boats)and new feature to associate property features with property types.
Fixed bug where property maker was using the wrong id (manager id, not cms user id) when cross referencing new propertys with managers.
Fixed a bug introduced in 4.2 which broke caching.
Improved invoice views, added line items to invoice list and guest name, added mark invoice paid button.
Added codemirror javascript for template editing, and various index.html files for obscuring directory contents.
Renamed google maps variable to prevent collisions with map div id.
Added custom paths to showtime class, and the ability to Jomres.phptools/patTemplate/Reader/Jomres.php to pick up this custom path and use it instead of the default path.
Added api key output in show profiles and added a button to allow us to change the manager's api key. Similar has been added to API plugin to show the manager's API key in the frontend.



Jomres 4.2.1

Removed a useless (?) close session that was causing much disk activity.
Fixed language switching not working in SA
Added a clause to dobooking to resolve an issue where amend booking multiplies the number of guests in the booking.
Disabled new invoice icon in view users invoices as that functionality doesn't exist.
Added a parseFloat function to ensure that lat/long elements passed to property details are true floats without commas.
Fixed bug where from address in emails was wrong.
Add property maker class
Improved pathway handling
Modified tooltips to resolve mootools conflict in popups


Jomres 4.2stable

Modified edit invoice to fix bug with javascript not updating totals, and made inputs shorter to fit nicer on page.
Fixed bug where list invoices not using correct url (showed up in SA)
SA fixed bug where ajax calls were still producing headers
SA modified login for admin so that they get taken to control panel, not front page
SA Fixed path to property feature images missing in tooltips
Added no_html to edit profiles
Commented out defunct rooms header in property description tab
SA Added piranhas beta2 templates
Added no_html to grant access link in show profiles
SA Fixed path to images in pathway
Added variable deposit feature to Tariffs and Currencies tab
Added option to allow site admin to direct all Contact Owner emails to an alternative address, and hardened contact owner to ensure that the property is published before the feature can be used.
Added max people input for SRP edit room/property type functionality as due to the way some folks were changing property types, the rooms/bookings were being limited to too few guests.
Added another file to obsolete file handler
Fixed bug where custom text constact was getting set to upper, so plugin names would not translate.
Added ability to use touch templating to translate property types.
Fix invoice changes not saving in administrator area.
Fixed add service to bill not updating invoice total.
Modified edit booking to show the extras with tax added if applicable.
Added email sent message to confirmation form output.
Modified rooms listing so that rooms are listed according to the associated tariff uid, instead of the room uid.
Added feature whereby a listing can be a "realestate" listing only, which offers far fewer settings and removes the need to use Jomres alongside another real estate listing applicaton.
Reduced the number of people in room and booking in Normal mode tariff editing. Should resolve the out of memory problems that some folks were getting on Property Admin page.
Edit to allow 7 star propertys
Made the jomresbutton class a little narrower, fits better on the page.

Jomres 4.2beta2

Adding first draft of Jomres SA to v4.2

Fixed missing td in edit property and shortened edit property columns from 90 to 70.
Undid change that reconverts ', will compromise security. Instead modified basic_property_details.class.php to do the reconversion when showing the property name.
Modified addservice to add line item to invoice
Fixed bug where listoldbookings was pulling all data from db, not just bookedout/cancelled bookings
Added note to license failure warning to remind users to click Save after changing license binding on the license server.
added print invoice define to lang files
Fixed bug where new hotel details output wasn't showing telephone number
Modified positioning of beautytips features and room types popups. Seems the mickey mouse browser doesn't like the "bottom" position. Probably thinks the code's being rude or something and we can't have that. Oh no.
Modified add your property link in guest's toolbar to only show if allow users to register option and subscriptions option, are both enabled.
Added caveats to trigger an error if user has no propertys only if we're not in admin area. SA specific.
Tweaked backend button layout a little
Modified pathway to not show if not in Joomla
Fixed pathway not showing issue
Fixed parse error in j02202a_update_invoice.class.php
Added gross price calculation to basic_property_details.class.php 
Modified config so that if property is Micromanage then prices stored weekly option is no longer available, as Micromanage is purely for day to day pricing.
Modifed show tariffs to calc gross prices
Removed reference to i hover image in booking information note in English language files.
Fixed bug in pathway that appears in non-joomla installation
Updated mailer class
Restored property country to header
Added editing mode to custom fields
commented out line that was setting Itemid on the fly
Added star icon to dashboard to indicate start days of bookings.
Fixed some issues where QBA subscriptions weren't being set up in paypal.
Added fix for missing class import in admin edit_invoice
Additional changes to show tax details in booking form.
SA bug fixes and tweaks to allow dynamic calling of templates and css
Modified paths in updates feature
Fixed mailer function to differentiate between smtp and mail options.
Corrected init define check in preview email, was using the old v3 defines, now it's using v4.
Fixed bug where having one "required" custom field made all custom fields required.
Changed distribution location of com_jomres.php for sh404sef to it's own folder in the joomla15 directory.
Changed location of dobooking.php and handlereq.php to the /libraries/jomres/functions directory.
changed default location of Jomres SA jomres_standalone_config.php, index.php and administrator.php to be within the jomres folder. Means we can sit inside the root of another CMS's installation and still run as SA.
Added some debugging to PHPMailer_v2.0.0/class.smtp.php to improve debugging of smtp mailing (duh).
Modified SA to run purely within /jomres instead of having index.php and admin.php in the root and removed admin.php altogether, enabling everything to run through index.php.
SA Added admin password warning
SA Added iswrapped functionality
Modified file uploading functionality to replace a " " with a "_" when the slideshow image is renamed.
Changed booking form output to remove the optional extras popup and instead just the the text that was in that popup, above the optional extras.
Modified slideshow to change _ to " " in slideshow captions
SA Modified menus to show link to front page while on login/registration page
SA removed a stray " in the registration page
Added fixed arrival day dropdown to Micromanage tariff editing.


Jomres 4.2beta1


Major rewrite to largely eliminate the use of globals within the system, switching over to using mainly singletons for maintaining and manipulating data between classes. Some globals remain in place to aid backward compatability with pre-v4.2 plugins.
Reworked email handling to show invoices in emails.
Renamed many class files to allow autoloading of classes, introduced jr_import function for importing class files. Classes by default are in /jomres/libraries/jomres/classes, however they can also be autoloaded from /jomres/remote_plugins/custom_code.
Added performance monitoring class (you need to enable minicomponent logging in Site Config to see the output).
Modfied and simplified black bookings, giving SRPs their own template and preventing the Save button from showing until the dates have been selected and the Apply button clicked.
Added view invoices page to Receptionist's menu, and if subscriptions are enabled then Property Managers can see an invoices page in their toolbar.

Fixed urls in property list to search via town/region/coutry
Modified positions of { in jomres.js
Modified dobooking class to not show book now text
Modified list propertys to change how jomresURL is called
Modifed addplugin to rename XYZ-plugin_name.php to plugin_name.php
Updated graphs.js to resolve IE error.
Fixed IE error in view property stats page.
Added code to installer to ensure that if files aren't copied over, then this is output to screen.
Removed url encode from list propertys search by town/region/country as searches on elements with ' were returning no results.
Modified search function so that special chars are rendered correctly in metatitle.
Added code to strip out non-latin chars from user names and set it to lowercase on create new users on booking feature.
Fixed smtp handling in jomres mailer function.
Added ob_start and end for Jomres SA handling to admin.php
Added detection of Jomres SA to detect_cms
Added editing mode option so that property names can be translated via frontend editing mode 
Added modules folder to Jomres writability check in control panel.
Fixed bug where incorrect date showing in audit log list
First phase of rewriting Jomres v4.2 done, classes and files renamed, autoloaders and singleon handler in place, and added obsolete file checking class.
Added improved handling of curl in plugin installation
Added option for customisable path to the css file
Rejigged custom text handling so that it's all done in the custom_text object. Created new function file for jr_gettext
Added current_property_details class to help minimise query numbers
Added new version of beauty tips, modified mustregister to point the user to the registration form, 
Removed a few out of date .js files
Fixed width issue in tooltips, thx Terago.
Added view invoice handling to Jomres property manager area.
Added show invoice option to receptionist's menu
Added a pre-installation check for Joomla to prevent users getting 404 error after installing Joomla after they've had to make certain folders writable by the web server.
Added tax option to optional extras and quantity multipliers to booking engine so that these are added to invoices.
Added jomres lifetime jrConfig variable
Added an activity to paypal to mark depositpaidsuccessfully. Not really needed for the paypal gateway, instead it's expected to be used by other gateways.
Added rel="nofollow" to Google currency links
Added check for depositpaidsuccessfully flag so that invoice has deposit amount added to line items.
Added sanity check classes/jomres_sanity_check.class.php  Currently only checks that if the property is configured to pppn, then recommends that you create at least one guest type
Added new property details singleton basic_property_details.class.php
Modified installer to add package_id to subscriptions table
Enhanced the subscription handling. Allows the admin to offer one free subscription package (if both the trial and the full amount =0), added a menu button where managers can see their existing subscriptions, available subscriptions and current propertys.
Added new button to users toolbar inviting them to add their own property, fixed favourite handling as existing favourites weren't being found.
Added some site config settings so that site admin can provide their business details in invoices. Improved invoices so that site managers can see and print invoices from the subscriptions info page.
j03200insertbooking_invoice.class.php renumbered to 03025 because we need to ensure that it's called before the emails are sent so that we can generate the invoice details in the guest and hotel emails.
Fixed bug where extra quantity wasn't modifying price in confirmation page
Improved blackbooking functionality by switching off Save button until apply button has been clicked once, gave SRPs new template and customised output for SRPs making black bookings.
Security enhancements to several j06000 minicomponents, and introduction of j06001, j06002 & j06005 minicomponent tasks
Removed admin's first login warning
Added new columns to installer phase of table generation.
Added rate number check to sanity checking
Added translated property names to search options,tweaked reconvert function to reset '
Improved paths for finding integration.php
Added delete subscription feature to admin area
Language files updated, removing BOM from several.
Minor tweak to list propertys template to ensure image and button layout works in Chrome
Modified jomres css to provide a more neutral grey by default. It seems that nobody liked my happy, cheerful harvest yellow scheme. Boo hoo.
Room type icon colours rejigged to differentiate them from property feature icons
Room/feature info popup shows now below the icon
Layout modified, room features/property features are now shown in the property header. The old code for showing the features in the tabs is still available, but commented out. 
Modified editing mode, made it switchable via a dropdown next to the language dropdown, and is particular to the user, rather than the property. 
Fixed bug where in editing guests, house is saved as street, and street is saved as house. Template issue where wrong names were used on inputs. Amazingly, this issue must have been in the system for at least a couple of years but I can't remember anybody mentioning it.
Added note to license failure warning to remind users to click Save after changing license binding on the license server.


Jomres 4.1.4

Added option to output Jomres javascript headers within the body of the page instead of the head, which seems to resolve the mootools conflict issues in some templates.
Fixed bug where invoicehandler was setting currency_code to (int) before inserting it into the invoice's details.
Fixed bug where the currency code wasn't being correctly selected before the invoice was inserted.
Fixed bug where sendBug was using old functionality to send an email, now uses jomres email handling.
Added remote_plugins/code_changes check so that countries.php can be in the code_changes folder and hence not overwritten during upgrades.
Fixed bug where Add property button would show if license is Solo
Coupons Fixed bug where valid to from dates were not saved if the date config settings weren't set to dd/mm/yyyy
Modified add plugin handling to get around pclzip library that has a bug on 64 bit servers, using the older zip library for unzipping from the plugin server, and pclzip if the installed file is from a file upload.
Fixed bug where wrong javascript calendar language file was being used.
Added urlencode for search links in list propertys
Ensured that sitepageurl define is sent to template in editnote
German language has been updated. Many thanks Roger.
Inserted two blank rows to show confirmation template to resolve issues that some folks have been getting with some templates and jquery corner not playing nicely together.
Added task = confirmbooking to booking form templates as some servers fail to pass the "task" variable in javascript.
Fixed bug where 27/28/29 Dec were showing in Jan 2010 availability calendar
Fixed a bug where normal mode tariffs were being saved as integer, not floats (eg 19 instead of 19.99)
Added "desktop" icon to administrator area
Select combo country name list now nat sorted by country name.



Jomres 4.1.3

Improved editing mode translation of room names. Tried to improve translation of tariff names but in micromanage this is much harder to achieve.
Switched off tariff title in booking form when in Normal tariff editing mode
Changed class for manager's icon to prevent overlapping icons on some joomla templates.
Added / path to cookies for message class
Tweaked slideshow functionality to show captions above the image's popup
Added a couple of missing elements to touch template function in booking completed minicomp.
Added check for webinstall in /administrator/components/com_jomres.
Enabled automatic redirect to the booking form in searching if Solo.
Added {LINK} to guest confirmation email
Fixed a bug where icons for third party toolbar items in front end weren't having the correct paths in windows.
Removed some hardcoded / and replaced with JRDS
Changed unzip library to pclzip
Moved define for jomres installer, and added no_html to showplugins for third party plugins
Removed a redundant message saying plugin has been removed
Tweaked edit template functionality to add <x> to textareas
Set default language to null in temp booking handler

Jomres 4.1.2

Fixed google maps templates and improved notes for entering latitude and longitude in Edit Property.

Jomres 4.1.1

Rewrote sections of code that saved language and search dates to cookies. As this was giving inconsistent results (eg the wrong language) the data is instead now saved to the Jomres temp booking handler's data.
Added "var" fix to google maps
Preliminary inclusion of cms specific files for miaCMS
Added captions to slideshow images
Added property type and per day/week label for "prices from" to property list.
Modified confirmation form popup to not show module positions etc
Removed old hidden divs from SRP booking form and fixed number icons to go 1-2-3 instead of 1-2-4.
Fixed bug where if several days were chosen as weekend days and a tariff was made for, say, 2 weekend days, then the tariff wouldn't be found when building the rooms list. Now the method that handles that checks that all days in the date range are weekend days, not that all days in the range and the weekend days range are the same.
Small modification that causes curl to be used first for connecting to the license server.
Fixed bug where contact owner (captcha) wasn't deleting old captcha images in /jomres/temp.
Added two new url options to remote availability calendars. By default, remote availability calendar will show links and when the link is clicked the booking form will be opened in a new window. New option "tar=0" disables the blank target, and new option sl=0 will switch off the links to the booking form altogether.
Fixed bug where editing a customer type creates a new one
Created a wrapper function for div population in the booking form. The purpose being to enable site admins to remove elements in the booking form without the missing divs causing an error.
Added hidden jomresitemid to search module templates
Corrected the NZ regions.
Added smoking option to booking form for MRPs.
Fixed multiroom booking prices calculating incorrectly in micromananage mode
Fixed unable to amend booking if the guest type has been removed since the booking was created.
Switched off property header in tariffs and rooms list
Tweaked path in cpanel to ensure it pulls in the correct setting for the current version of Jomres.
Changed the opacity to .9 in beautytips
Fixed bug where subscription packages couldn't be deleted.
Disabled room link output in SRPs
Added space between region and country in property header template
Fixed tax rate labels missing when editing tax rates.
Added current version info to updates page.
Fix so that property header doesn't show twice on show tariffs popup
reset tmpl to '' if not wrapped
Tweaked Jomres main menu option handling to ensure plugins can insert their own images
Tweaked url handling in joomla to ensure tmpl=component sets the jomres site url to same
Fixed hover image popup going too far left by disabling jquery.corner application to the propertylist_right td.



Jomres 4.1

Fixed bug where you are unable to change the property type (1 bedroom/2 bedroom etc) in an SRP once it has been created.
Fixed parsebybots handling.
General code changes to resolve some validation issues
Fixed a bug where new, non-registered users weren't having their details recorded against a booking.
Slight modification of instructions for setting Session handling in Global Config
Modified slideshow to output no images message within slideshow tab
Fixed issue where some Joomla templates are showing bullet image in tabs on property details
Modified paths to com_jomres.php for 404sef message in site config
Added subscription handling to v4, integrated old subscriptions plugin.
Added option to enable/disable automatic creation of new users on booking if user is not registered.
Fixed bug where /templates/jomres/frontend/srch.html was being called by all search modules.
Reworked all of the code that uses the room types and property features to ensure that calls are passed through jr_gettext thereby allowing users to translate both with confidence.
Fixed a minor issue where the room type wasn't remembered in the room type dropdown in the micromanage edit tariff page.
Replaced makefeatureimages call in administrator register property area to use new beauty tips.
Added croatian lang file to lang library. Many thanks Natalija.
Added miscdefinesfortouchtemplating minicomp
Added language definition for self registration module
Tweaked template editing so that javascript doesn't cause an error in mysql.
Switched off pathway when on dashboard.
Added list subscriptions feature to admin area
Tweaked how subscription/property list is shown in dashboard.
Added missing define for new user creation email subject
Fixed call to __jomresportal_c_rates in installer
Added absolute's fix for white on white rooms list headers. Many thanks.
Stopped sms script from trying to send and sms if the feature is disabled, no biggie, it was causing a message in the error log. This fix will stop that.
Rejigged new user handling to ensure all emails are sent correctly.

Jomres main guest facing templates have been overhauled. Added jquery.corner.js to soften the corners of many panels, updated the css file to match and many of the templates.
Fixed a bug in Beez template where reception and manager's menus were seperated by a large degree by adding some css to the receptionist's toolbar to emulate valign.
Found a broken td in the booking form, which may have caused some people to experience the availability calendar wandering off to the right.
Added new links to property list, town region and country now go to search module_m0.
Booking form modified so that if optional extras haven't been created, the appropriate panel will not be shown.
Found cause of insertion of several lines into source output. Trival, but irritating.
Fixed issue where saving guest type order feature results in 500 error/blank page.
Added sorting to language dropdown.


Jomres 4.0.1

Added ability for Jomres to detect when a template on disk is newer than the last time the template in the db was edited and warn that it may have been updated.
Added code to detect usage of coupon codes. If there are no codes for the property, then the coupon input isn't shown in the booking form. Note that the booking form templates (dobooking.html and dobooking_srp.html have changed as a result).
Modified site config to remove key file on save, previous path was incorrect.
Tweaks to multilanguage handling to correctly pull and use the language file appropriate when calling a module but not showing Jomres proper.
Removed default date settings from list propertys book now link as no longer required as validto and from timestamps no longer used in booking engine.
Fixed issue in paypal gateway where settings overridden weren't being pulled from the db correctly.



Jomres 4stable

Fixed google map bug
Added more options to allow greater configuration of the rooms list in the booking form.
Switched off debugging in updater
Modified check for jomres_availability cookie before setting the arrival date to 01-01-2009
Added missing declarations to spanish lang file
Fixed ie7 js error bug


Jomres 4beta3

Added the Jomres -> Clickatell plugin to the core code.
Changed many files to add Jomres messaging on updates/inserts etc
fixed broken paths in 404sef com_jomres.php since update to v4.
Modified list propertys so that tooltips are used for property images, and the thumbnails are displayed respecting the aspect ratios of the images.
Added Growl messaging to Jomres library, and added sticky messages.
Added resizing option to show property image thumbnail with aspect ratio preserved.
Fixed room image uploading not working.
Using defined constants for image abs and rel paths.
Minicomponentised slideshows.
Deleted old plugins folder.
Moved slideshow.html to frontend/slideshow.html.
Added admin option to define thumbnail sizes.
Modified image output of thumbs to show correct aspect ratios.
Fixed jquery/mootools conflict issue.
Fixed issue in horiz rooms list where room price not calculated if you're not using micromanage mode.
Added check for task in language selector, if it's set to touch_templates, then the lang selector is always shown, allows for easier changing of languages when translating.
Added a check for contract_uid col in installer
Fixed infinate recursion problem on emailing.
Removed redundant call to jquery.bt.css
Fixed issue where uploaded image wasn't showing in edit property page
Fixed bug where current language not being detected properly so custom text wasn't being used.
Fixed bug created in v4 preventing paging from working, caused by renaming "page" to "plistpage".
Added htmlspecialchars to jr_gettext to try to prevent ' etc in strings from breaking the editinplace javascript.
Added get_shortcode_to_longcode method to jomres lang class to try to associate shortcodes with long codes when detecting the current language.
Modified the booking engine to remove the reliance on validto_ts and validfrom_ts as on first initialisation the arrival and departure dates aren't set, therefore you always get the message that the arrival date is incorrect, even if it's not. I'll revisit this again at a later date.
Minor fix to the french lang file.
Removed some &amp; s that broke the register property page

Jomres 4beta2


Removed an element from the amend booking functionality that updates the deposit paid status.
Fixed the javascript in the register property page as &amp; wasn't being parsed properly by the js and so countries couldn't be selected during backend add a property.
Added a simple check for j00001start.class.php to try to resolve the file move/no cpanel or any other scripts running issue.
Added migration handling to install_jomres.php
Added isInIframe check to cms_specific_urls.php to change the call from index.php to index2.php.
Extracted jomres_database to it's own class file.
Modified language detection in Joomla so that the current language can be detected from Joomla if Joomfish isn't used.
Solved the case of the mysteriously disappearing admin menu (renamed Itemid to jomresItemid in cms_specific url handling script.
Modified how imageonly image beautytip popup is called, allows the image to go left, right, top, bottom then "most". Stops some flickering when showing the slideshow.
Licenses updated for clarity
Changed the include to the languages array file from "include" to "require_once".
Disabled the site config for the default language file, I don't think we need this any more.
Fixed incorrect redirect to listproperties in administrator if commission rates are saved.
Added a default commission rate to installation sample data.
Changed default trigger of orphaned commission line items from every minute to every day.
Added commission line item addition script to core.
Improved v4 functionality to correctly show link to allow admins to view a user's invoices in backend.
Modified list own bookings to not show the booking info in a popup any more, instead we go to a new page.
Minicomponentised non-manager's options inc show bookings/favorites etc, removed a bunch of files that have been made redundant as a result.
Fixed searching, stopped search results from showing in module area.
Updated blockui, added css to jomrescss.css so fixed bug in IE8 (wouldn't ya know it?)
Finally got excanvas to work so that beautytips have a background in IE8.
Fine tuning styles on property details page.
Added hover intent to slow popup of ajaxurls.
Changed tabber's background tab colour to grey.
Modified info image text to yellow
Modified report bug message to provide full path to the Jomres page.
Reverting to older jomres version of captcha class to fix a bug.
Fixed search feature icons to show as tooltips, not overlib.
Reordered language detection.
General code tidy up to remove remaining $tr references and other assorted warnings.
Tweak to jomres_language.class.php to ensure that jomreslang cookie is always set.
Added feature to set popup=1 on all links if $_GET['tmpl'] = 1, effectively forces into wrapped mode even if it's not explicitely set in site config.
Added a check for $_GET['srchOnly'] to j00030search.class.php, if this option is set, Jomres will not show search results. Instead, it'll just show the search module's options. In short, it will allow us to call Jomres within an iframe and show a search module.
Enabled editinplace for internet explorer
Integrated new user handling into v4.


Jomres 4beta1

Late addition of Piranha's image/input click js for date inputs.
Small change to functions.php to enable installation of mambots.
Improved chooseLanguages feature by setting previously selected lang files checkboxes to checked.
Improved javascript & css inclusion by calling Joomla's own head setting functions where applicable.
Minor tweaks to ensure that calling modules works ok.
Fixed property image not showing in property list.
Fixed bug where room type icon not showing in room type list.
Tweaked joomla specific code to find Itemid from menus table if Itemid = 0
Added display booked out and cancelled bookings feature.
Added jomrescss.css to template editing feature.
Fixed bug where stats weren't showing in admin area
Fixed bug where list bookings wasn't showing results in admin area
Fixed bug when saving blackbooking, audit function has been renamed. 

Jomres 4alpha3


Added mysql_query("SET NAMES 'UTF8'"); to integration.php to tell mysql that all incoming data is in utf8 format.
Fixed redirect in save register property to redirect to the new listpropertys link
Fixed template name in list propertys for administrator list propertys feature.
Fixed bug in addplugin (and on plugins server) so plugins weren't being installed.
Adopted tabber for property details tabs
Reworked Property Config options to put all options for what to show in their own tab.
Undid mininterval changes as they're naffing up init departure dates for managers. I'll revisit this issue at a later point.
Swapped published and unpublished images around.
Corrected link in receptionist menu to dobooking page.
Fixed incorrect call to jomres_audit in edit creditcard.
Fixed editbooking link after completion as with paypal fix for A2 the contract uid wasn't being passed to the calling function.

Jomres 4alpha2

Fixed issue where Jomres reported that the paypal booking hadn't been inserted when it had.
Added auto update of log files so that they're refreshed virtually in realtime.
Improved minimum interval handling in the booking engine.
Added option to show or not show the language switcher
Modified viewproperty so that booking a room link deliberately points to an invalid date when no date selected, this forces the booking engine to set the arrival date to today's date. Fixed period and fixed arrival dates propertys will see the benefit of this.
Modified admin area urls to use index.php instead of index2.php in Joomla.
Fixed logfile deletion functionality
Fixed filterform not working
Fixed bug where multiple room types weren't showing in property details.
Added caching feature, and Hazel's ssl tweak.
Added option to disable caching feature.
Added Hazel's checkbox borders.
Added jomres_cmsspecific_getTextEditor function to handle text editors
Fixed backend typo listproperties/listpropertys
Fixed image upload issue
Disabled a clause in the booking engine where if charge deposit is set to No, then the deposit wasn't being calculated. This is because a few folks are setting the show deposit to No, but still sending the deposit value to paypal/gateway. Commenting out this if out will mean that the deposit is still calculated, but not shown.
Added code to create/edit/delete coupons
General config renamed to property config
Minicomponentised the reception and manager options, and added the ability to have a user's minicomponent bar as well (needs testing).
Added extra checking to jomres_parseRequest for php://
Removed no_html from links to rooms, tariffs etc.
Added Hazel's changes to beauty tips
Improved the installer to create admin as a super property manager, and the drop tables feature to drop from the joomla components folder.
Moved exit if current cms not detected from integration.php to detect_cms.php, this will help when developing solutions for new cms.
Renamed admin's list_propertys to admin_list_properties.html as there's a conflict in the patTemplate jomres reader, the frontend template was being called because it has the same name.
Fixed (both Joomla and CMSMS) cms_specific handling, the users list wasn't returning the complete array but just the last person in the table.
Modified how the jomresConfig_absolute_path is detected.
Modified site config so that if detected cms = joomla then show the 404sef config panel.
Added a width element to imageonly popups to prevent flashing.
Upgraded blockui to resolve ie8 problem with the booking form.


Jomres 4alpha1


Major restructuring of Jomres to allow it to reference CMS Specific functions, which are included on start and are different depending on the CMS detected. Allows Jomres to be used in more than just Joomla. Jomres v4 is not backwardly compatible with previous installations of Jomres v3.
Replaced overlib calls. We'll now use jquery's beauty tips library instead.
Added custom fields for the booking form.
Added administrator area template editing, details are saved to the DB instead of to a file, so there shouldn't be problems with upgrading.
Added quantity selection for optional extras.
Added invoice plugin to core minicomponents
Added cronjobs and optimise plugin to core minicomponents
Added jomres language switching feature. 
Added on hover to property details page so that slideshow, rooms list and tariffs list don't need to be clicked to see them.
Added integrated search feature for non-Joomla users so that they've got a search function until such time as modules can be written for them. Joomla users can also use this feature.
Added Third party plugin installer to the Jomres plugin manager. Dummy plugin example to follow.

Deleted old php4 captcha file. PHP4 no longer supported by jomres.
Disabled show only availability calendar option as it's N/A for v4.
Added check for a define JOMRES_RETURNDATA. If defined, we'll add the contents of the output buffer to JOMRES_RETURNDATA_CONTENT instead of just flushing (echoing) what Jomres has generated.
Modified property list page variable to plistpage because "page" was interfering with CMSMSs default "page" and not showing the dashboard.
Fixed an issue where manager names weren't being correctly listed in edit profile associated with their property. The managers were correctly associated, just not listed correctly in the page.
Tweaked save normal mode tariffs so that single digit rooms are renumbered to 01, 02 etc.
Modified reg prop handling as using web dev toolbar to auto populate fields resulted in SRP always being selected as property type.
Tidied up some css (switched off that jomres_button)
Tidied up some code in the cms_specific_functions.php files
Removed the "loading" word from jquery beauty tips.
Added list limit config option to site config, and added a random search limit description to the language file.
Removed mapping link code from various scripts. 
Tweaked layout of property details a little. 
Removed old property_details html file.
Modified captcha minicomponent to remove old captcha images after session timeout.
Moved slideshow to top in composite property details.
Removed size limiting on popup images in tooltops
Changed thumbnail image size in slideshow.php
Changed wording in lang file to indicate that uploaded images are resized.
Removed some slideshow options as they no longer apply
Removed Itemid option, from now on we'll get that from the url
$mrConfig['returnRoomsLimit'] changed from the default of 0 to 1. Will make the default rooms list look nicer as only one room will be offered at a time. Old 0 for no limit still applies.
Rejigged both the booking form (added number images to guide users better) and reformatted the booking forms a bit.
Removed the booking rooms 2 tab complately. As we're using the horizontal rooms list now there's no need to have the overlib selection options. Room image and type image options moved to booking rooms 1 tab.
Added hazel's changes to remove dl/dt
Gallery link renamed to website link in lang files
Hazel's timestamp col changes for dobooking.
Images optimised for size, Jomres zip is roughly 1Mb smaller now.
Removed old tabbed composite property details. Whilst it was ok, it didn't work in IE.
Added detected CMS to showplugins script for when it calls the updates server.
Added horizontal rooms to booking form, doing away with the old "rooms list on the righthandside" of Jomres v2 & v3. 


<hr>

Jomres 3.4.5

Added Wellington to NZ Regions
Added code to switch to ssl when editing guest so that ccard popup done in ssl.
Added single person suppliment html to srp booking form.
Added Hazel's upgraded com_jomres.php
Added code to paypal submission script that uses they guest's country to guess the language that paypal should be presented in.
Modified showtariffs so that they'll show in a popup. Fixes bug introduced due to composite property details changes.
Modified elements shown in gateways tab so that they'll always be edited/renamed in touch templates, not gateways tab in General Config.
Added optimiation of save blackbooking data. Thanks Netized.
Disabled editing mode for one element in contact owner that prevents form from submitting if editing mode left on.
Modified booking engine. Fixed creation of departure dropdown when "Bookings are for a fixed period" = No so that the "Booking period" option is used (previously was hard coded to 7).
Fixed issue where price was being calculated incorrectly when MRP used Micromanage and several diff room types were selected. 
Removed engine=innodb declarations from install_jomres.php


Jomres 3.4.4

Fixed bug in 3.4.3 where property details wasn't being pulled properly from property description and associated fields.

Jomres 3.4.3 

Modified edit & save property so that entered property description and associated fields are saved to custom_text as per the current language.
Modified jomresGetParam so that functions.php jomres_reconvertString function allows us to reconvert some sanitised data back to a appropriate html string.
Tweak to fix Joomla pathway when showing the pathway module.

Jomres 3.4.2

Modified blackbooking handling to allow selectall checkbox.
Tweaked functions.php to ensure various conversion features only use jrConfig calendar input format for javascript calendars.
Added lang definitions for "Your enquiry" to contact booking form and lang files, removed hard coding.
Modified front and backend addproperty features to set default country and regions.
Added delete proprty link to super property manager's toolbar.
Fixed issue where custom property description not translating in list propertys/property details.
Modified avl cals so that they show in booking form when composite calendar is not enabled.
Modified ids of search dropdown country/region/town as old id="town" was causing the town input to not show in the booking form.
Modified search for Itemid so that it doesn't complain just because there are more than one reference to Jomres in the menus.
Added more debugging data to dobooking engine and added a check for fixed period bookings shortbreaks so that they only kick in if fixed period bookings option is enabled.

Jomres 3.4.1

Restored two elements (mrConfig['errorChecking'] & mrConfig['errorCheckingShowSQL']) to jomres_config.php because they were incorrectly removed in 3.4 but they are still being used by the redirect functionality. On upgrades this isn't noticable as these values had already been saved to the db, but on new installations it caused the redirect functionality to stop working, making Jomres more difficult to use.
Removed Jomres metadata handling. To the best of my knowledge it wasn't being used.
Minor tweak to integration handling so that new installations aren't producing errors because Jomres was attempting to insert settings to site_settings table before it had actually been created. Not a major issue in itself but could lead to some questioning of the functionality. 

Jomres 3.4

Added jquerycombo feature so that geographic searching can be performed via dropdowns that autopopulate. mod_jomsearch_m1 has been tweaked to be more appropriate to a banner/syndicate type module position.
Moved enabling of logging from jomres.php into Site Config.

Moved javascript calls into functions.php so that we can ensure that both jomres.php or j00030search.class.php are calling the same javascript files if needed.
Improved myuser's handling for listing bookings
Fixed issue in genericOr function which wasn't allowing all propertys configured to show after a search.
Added @ before any ini_set calls within Jomres. Some hosts are now disabling the ini_set feature of PHP, which is triggering fatal errors in PHP, the @ will supress this fatal error but Jomres might not then run as expected.
Small changes to db handling to ensure that results are unset after handing back.
Commented out some $mrConfig options in jomres_config.php that are no longer used.
Added contacthotel text to touch template handling in view property minicomp
Modified property header so that if the property's meta details are empty, then the property name is used to create the page title.
Removed blank option from room type dropdown in edit advanced tariffs page.
Modified touch template handling to output room type and room feature texts in touch templates. Removed same feature from property manager's Preview
Modified how post tariffinput is access to ensure that values are set to float when saving Advanced tariffs.

Jomres 3.3stable

Single person suppliment added to booking form. MRPs only.
Removed very old version notes from readme file and supplied link to the manual.
Modified how single person suppliments are applied when the sps is defined in an individual room, previously the sps was only applied once, now it's applied for every day of the booking.
Added optional switch email_when_done to componentArgs in guest and hotel email. Allows the email form to be called directly without actually sending it. Useful for previewing emails. See here for more info http://forum.jomres.net/index.php?topic=1087.msg4870#msg4870
Added new optional trigger 03500 to contact owner plugin which can be called when the contact email is sent so that admins wishing to use pay per lead can have a plugin (not available from Jomres.net but the framework is here if you want it http://forum.jomres.net/index.php?topic=1099.msg4864#msg4864)
Modified General Config so if the user is on Solo, then they're able to swap property types.
Changed logging task to $task, instead of the called url.
Added set memory limit to admin.jomres.php 
Changed jomresGetParams to use filter_var if the function is available

Jomres 3.3rc2

Rewrote a large section of code to make rooms transparent to SRP users. Means that they no longer see rooms when in property admin, and importantly, cannot swap from SRP to MRP in General Config.
Fixed issue where ; missing from an &nbsp; in showing room types in the property. Thanks Piranha
Switched on display of API key in front end property admin area
Room features tab in property admin switched off if SRP
Renamed SRP property types in room classes table on install from 1B to 1 Bedroom etc


Jomres 3.3rc1

Added ability for guests to cancel their own bookings.
Added an access check so that new users are prompted to log into the front end as admin. 
Added new temp folder in /components/com_jomres. Hard coded system log path to go to /components/com_jomres/temp as input filtering was messing around with paths on Windows based servers. 
Fixed bug in register property where it wouldn't submit if you left editing mode on.
Small change to registered user's menu so that the menu area is shorter.
Small improvement to new Profiles handling to list Super property managers correctly.
Removed ref to jomresConfig_lang when payment specific stuff being found as lang no longer stored against booking info.
Replaced / in installer with JRDS.
Changed description in ptypes table on install from "Hotel" to Hotel/Villa/Apartment.
Added back link to top.html
Added note advising no bookings exist if *gasp* the registered user hasn't created any bookings yet.
Fixed bug in upgrader.

Jomres 3.3beta1

By default new installations of Jomres have the minimised configuration option set to Yes. 
Reworded black bookings instructions to make a bit more sense
Added Joomla user name to booking details.
Added JOMRES_PHRASE_PROCESSING to gatewaypostage function
Fixed small issue with a css declaration in srp booking form referencing the wrong div, thereby allowing the "We have vacancies" to be come visible. Thanks Piranha
Removed erroneous delete of images from no longer existing images tables.
Completely rewrote the profiles handling functionality to make it simpler and more logical.
Modified settings handling for both mrConfig and jrConfig. All mrConfig settings should now by default be saved to the database under property_uid 0 on install/upgrade. Ditto for jrConfig and both jomres_config.php and site_config.php should only be referenced during install/upgrade.
Added new functionality to show all property details in one page (composite_property_details.html). As this is new functionality it is switched off by default, to enable it switch the site config option "Use Composite Property details" to Yes.
Added HDEPOSIT and DEPOSIT variables to hotel and guest emails. Not changed templates.
Fixed dodgy link for registration in J1.5.
Added new class custom_text. Fixed bug where constant DESCRIPTION was being input filtered to DEscr<x>iptION.
Fixed bug where the name of the default language file wasn't being found correctly in admin area.
Added some more tweaks to remove some options if we're an SRP because those options will just confuse an SRP property manager.
Bypassed a bug in IE where the editinplace input cannot be seen. Now IE users are stuck with using the popup input boxes, whereas firefox users will have it as editinplace.
Modified a couple of templates so that when Jomres tries to automatically close a popup IE no longer asks the user if this is ok. When Microsoft closes that loophole, we'll find another way around it.
Removed a stray echo from search functionality.
Fixed bug where property features aren't saved when a new property is created.
Set path in jomres.php for finding files to JRDS instead of /.

Jomres 3.2.3stable

Added check for userIsManager in feature icon generating option so that if user viewing property while manager has editing mode on, the captions and description of the features aren't listed and echoed after the icon.
Added check for euro symbol while saving. Input filter messes around with it otherwise.
Added simple email feature to savecancellation to advise that the booking has been cancelled.
Added check for "script" to add installer.
Added new word to lang file (Saving) and upgraded rc1 new editinplace functionality so that administrator no longer needs to be logged into the front end to use the editing functionality. If you're editing via touch_templates you also don't need to switch global editing on, or editing mode in one of the front end properties, it immediately assumes that you're global editing text.
Clarified wording in plugin exception message.
Fixed issue in unzip library where module xml files weren't getting installed on windows boxes.
Added tweaks to save feature settings as euro symbol was getting mangled by the input filter.

Jomres 3.2.3rc1

Added new editinplace functionality, switch back to the old style by editing site_config.php and set $jrConfig['editinplace']="0";
Removed an old js file that's not been used for yonks.
Added rebuild registry to installer to ensure new minicomponents are picked up straight away.
Fixed bug where contact form wouldn't work in IE7
Fixed bug where EMPTY showing in modules.
Removed a few unneeded styles in dropdowns now that jomres shadow background style has been dropped.
Resolved one final issue in booking engine where non-registered users we being recreated if their bookings were amended.
More small changes to delete guest functionality.
Modified integerSelect list to show 0 before numbers < 10
Fixed bug where wrong title for max rooms selected showing in Advanced tariff editing mode

Jomres 3.2.3beta1

Fixed path to BookGuestIn.png
Fixed a critical error where property managers reusing guest details were renaming all existing users to the new user's details. You are advised to upgrade as soon as possible.
Moved blackbooking functionality to Receptionist's menu. 

Jomres 3.2.2 - Nee 3.2.1

Improved deleteguest functionality to ensure room bookings are removed.
Wrapped single person suppliment output in confirmation within an if statement to prevent it from showing if value = 0
More admend booking tweaks. Edited checkDepartureDate function.

Jomres 3.2.1

Updated nl-NL lang file, thanks Ruud
Added search by price range functionality
Removed redundant property title output in reception bar
Modified MRPavailability calendar so that only when all rooms are booked then the calendar shows them as booked.
Modified search minicomponent so that title of page is changed only when option=com_jomres (eg, when a search has been performed)
Modified search minicomponent so that room and property types can be translated via touch template functionality
Modified deleteGuest so that all bookings are deleted if the guest's only open bookings are with the current property. If not, then the bookings will need to be cancelled for the other properties first.
Added some defaults to edit tariffs for min and max rooms already selected functionality.
Small modification to integration so that toolbars aren't shown on edit language popup
Updated booking engine with Hazel's tweaks to booking amendment functionality
Fixed bug where deposit couldn't be edited.
Tweaked title setting in search class so that titles are only changed with country, region, town etc are part of the search criteria.
Added check to jomresURL so if sefRelToAbs doesn't exist as a function, then to include the file that sets the function.

Jomres 3.2Stable

Added funky new icons.
Date picker now popups up the calendar on click of the input, rather than the calendar icon. To restore the old "click on the calendar image" functionality please edit functions.php and dobooking.class.php and search for the functions generateDateInput. In those functions you'll see instructions on what to comment out to restore the old calendar handling.
Removed jscalendar configuration options from front end, now only admin can change the settings.
Added "book guest in" option from view booking page.
Tweaked updates feature so that you only need to go offline when actually updating.
Added fix for SSL setting switching off booking form links, and support for ssl in J1.5

Jomres 3.2Beta2

Renamed language files to follow xx-XX language format.
Added functionality to autodetect the javascript language file for the javascript calendars. This is enabled by default, so if you don't want this to work in your existing installation please remember to edit the JS calendar option in Site Config and disable it.
Created plugin registration handling to reduce startup time for Jomres, relieves need for automatic discovery of mini-components and added a manual registry rebuild icon.
Added folder writability checks to Jomres control panel.
Added nocurl task so that users get a message advising that CURL is not available to the server.
Modified showplugins and updates so that the stop icon is shown if curl not available

Jomres 3.2Beta1

Added Plugins to new installs Joomla components dropdown menu options
Applied Hazel's tweak to amend booking.
Fixed j00017SRPavailabilitycalendar.class.php so that availability shown in calendar when task = remoteavailability
Modified j00018MRPavailabilitycalendar.class.php so that definitions from language file are used instead of custom text strings.
Modified j04910deleteproperty.class.php so that property images are deleted on property delete.
Fixed issue where slideshow images were not being deleted
Added error logging to drop image to log if unable to delete the image in the error log
Modified jomres.xml file to correctly show that the script runs natively in j1.5.5.
Added cancelled_reason to installer on installation.
Added check for session folder being writable in tempbookinghandler.class.php
Modified live site detection in integration (again) to get around some servers with sef enabled not finding the correct live site.
Fixed bug in dobooking where discounts for srps not recorded correctly
Modified list properties so that $maximumProperties is used when checking the limit of the number of properties, rather than just "100"
Renamed jquery.cookie.js to jquery.cookee.js to get around mod_security's false positives.

Jomres 3.1.15Stable

Added metatitle and metadescription (change these through Edit Property in Property Admin). Whereever property header is shown, these details will be added to the page.
Added code supplied by Hazel to correct buttons in administrator, allows them to wrap correctly.
Changed default of maxrooms_alreadyselected from 10 in 3.1.15beta3 to 3.1.15beta4 to 100.
Fixed issue in show_rooms.html where overlib wouldn't show room image popup.
Added missing marker in geocoder latlong template.
Modified number format output of total in guest email.
Modified captcha library to improve path finding for captcha images.
Fixed bug in Normal mode where you were unable to reduce the number of rooms of a give type.

Jomres 3.1.15beta3

Added Contact form link to property details template so even those properties that allow online bookings can receive emails from guests.
Added new feature to room details. Specific rooms can have different single person suppliments, which can come into play if the General Configuration Single Person Suppliments option is not set to Yes.
Added new feature to Advanced tariff editing mode to allow different tariffs to be offered depending on the number of rooms already selected.
Fixed room image output in rooms list 
Added missing define to german.php
Fixed dropimage function that calls db query where no longer required.


Jomres 3.1.15beta2

Modified the define used in the general configuration tabs title to use a define that actually says "general configuration"
Added mailto link for guest's email address in edit booking page.
Added new function getImageForProperty to make calling header and room images simpler.
Modified performance tracking in jomres.php, no longer governed by Joomla/Mambo debugging settings
Reworked integration's db and miniComponent handling to provide more accurate tracking of queries and their calling sources
Dashboard reworked to reduce the number of queries it performs
classes and functions reworked to remove unwanted globals and non-used variables
General code tidy up of integration, mainly replaced jomresConfig_absolute_path with JOMRESCONFIG_ABSOLUTE_PATH and other superfluous variables removed
General code tidy up of minicomponents replaced jomresConfig_absolute_path with JOMRESCONFIG_ABSOLUTE_PATH & removed references to  jomresAdminPath as it's no longer used.
Added email site manager on property delete
Added switch in booking engine, if booker is a receptionist/manager then they will see the full list of rooms in the booking form, whereas guests will see the rooms list limited as per the booking rooms tab option "Available rooms/tariff limit".
Enabled commented out code in list_guests.html to show link to edit creditcards.
Added captcha protected contact form for properties that do not allow bookings online.
Fixed bug introduced in 3.1.15beta1 where booking wouldn't complete because of a save guest error.
Added tariff title to rooms info in Edit booking.
Fixed bug in installer where rates table not being created.
Finally got around to removing the echo of an integer in the dashboard
Fixed bug introduced in beta1 where guests could not be inserted
Added a variable to the temp booking handler to record the type and values of the discounts. Modified contracts table to add same column (discount_details)
Tweaked property header to correctly show single and double quotes, modified getEscaped to adapt to magic quotes on and off
Modified jomres.js to correctly show text when in IE

Jomres 3.1.15beta


Modified integration.php. Added check in language selection for file_exists($jomresConfig_absolute_path.JRDS."components".JRDS."com_joomfish".JRDS."joomfish.php") when querying state of $_COOKIE['jfcookie']. We will only use $_COOKIE['jfcookie'] if joomfish actually exists on the server because if joomfish doesn't (eg it was uninstalled) then you're stuck with whatever language was last selected via Joomfish.
Tweaked mustregister plugin to offer Joomla 1.5 registration url
Fixed issue in SRP calendar where _JOMRES_COM_AVLCAL_OCCUPIEDCOLOUR_KEY text was output where it should have been _JOMRES_COM_AVLCAL_PROVISIONALCOLOUR_KEY
Added special requirements to booking advisory emails
Added createJomresPortalBookingsTable function to install phase.
Modified contracts table. Now contracts are not deleted when they're removed, instead they're marked as cancelled so that in the future we'll be able to pull cancellation data direct from this table for statistical purposes.
Modified Advanced mode tariffs. You can now set a specific arrival day that the tariff is valid for. 
Modified guest handling. Jomres.php should now detect if we have an existing guest and discern the correct address details. Fixes issue where guests weren't able to list their bookings (fix applies to new bookings, not existing ones)
Added some commented out code to list properties so that if you want to redirect to the booking form in the event that only one property is returned be a search you can uncomment the lines.
Fixed an issue where micromanage tariffs first tariff's "valid from" was being set to 1.1.1970
Upgraded user management so that super property managers automatically have access to all properties. If this is contrary to your existing working practices you can edit j00002usermanagement.class.php and change the line var $superPropertyManagersAreGods = TRUE;  to FALSE;



Jomres 3.1.14
Modified installer so that if com_jomres is in components table it's not reinstalled.
Modified integration script so that new propertty buttons appear for Unlimited users


Jomres 3.1.13

Changed integration and installer to recognise IIS when figuring OS
Added check for jfcookie & mbfcookie lang option
Corrected check for security defines in dutch.php so that it'll work on J1.5
Added PHP and NIS currency codes to function that edits commission rates
Removed extraneous check for mos id in get guest query
Fixed remote availability, brought it up to date
Added new function to pull month name to get around strftime not handling utf8 properly. Affects MRP and SRP calendars and dashboard month names dropdown.
Added defines for paging if j1.5
More tweaking to "guess the absolute path" code

Jomres 3.1.12

Fixed installer/integration error. Fired the person responsible but then nobody was available to make coffee so I had to rehire myself. Nuts.

Jomres 3.1.11

Replaced some left over sefRelToAbs calls in paging with jomresURL
Refactored the te_setAverageRate method to resolve an issue in micromanage mode where prices were being calculated incorrectly when bookings were being made and only one room type was selected.
Changed how absolute path is detected
Removed 00002 from the non-overridable minicomponents list, so that a plugin can be developed that allows Super Property Managers to access all properties even if they're not assigned to them.
Fixed a typo in the english lang files
Modified dobooking.php so that property managers aren't kicked into a redirect if then come into the booking form via one of the calendar links in dashboard or property details.
Fixed issue where new managers were not being added to the database on creation of a new property.
In plugin manager, replaced removeXSS with add_slashes for data passed back from upgrades server.
Added rel="nofollow" to calendars to prevent google from following the links into the booking form.
Added config option to misc site config tab for full path to the available logs folder
Added option to change path to logs
Modified MRP calendar so fixed arrival day option works in MRP calendar
Set emailing errors off by default
Modified logic so that if the jomres calendar scripts have already been called, they're not called again by jomres.php
Fixed issue caused by a previous fix that preventing pending book-ins from listing.
Modified how key.php is found. Removed preceeding slash
Tweaked book guest in functionality
Modified dobooking.php so that calls to domain.com and www.domain.com can be used interchangeably and should not cause an error in the browser.

Jomres 3.1.10

Changed how language selection is done. New option in site config to choose the language file to use, if $_REQUEST lang is set then it'll use that instead, else it'll use the lang file selected in site config
Updated lang files for lang selection in backend and updated french.php (thanks Marc)
Updated search.class with getSiteSettings
Updated listproperties with getSiteSettings
Tweaked bookguestin to not show blackbookings
Updated favourites functionality to not show blackbookings
Fixed dobooking.class.php so that all room features should show in booking form popup (thanks Hazel)
Updated plugin installer so that if module/bot etc don't install, it's recorded in the error log why, although an error isn't specifically triggered because that'll throw the user out of joomla altogether.
Fixed bug where paypal users aren't given booking completed message after booking made.
Tweaked installer to improve creation of image folders in /images/stories/jomres
renamed code2utf to jomres_code2utf to remove conflict with mosets tree
Modified date input function for validation
Modified booking form to show avl calendar underneath the form. Modified both avl calendar scripts to not show links when on booking form.
Modified guest email to put commas after each room name/number
Modified plugin installation functionality to perform dependencies checks if available.
Modified updates script to show if site not offline in J1.5


Jomres 3.1.9

Modified minimised config feature so that Super Property Managers still see the full options.
Added Edit Language manager's option to minimised config exclusion
Added tweak for Joomla 1.5 joomfish so that if Short Code in Joomfish's language selection is set to the appropriate language, eg "english", "german" etc then Jomres will switch languages.
Fixed jr_gettext call in languages for month translation
Fixed a few calls to jr_gettext in confirmation script so that if editing mode is on then that doesn't break the form.
Tweaked editbooking to show amend booking icon
Removed some hard coded text from booking confirmation form.


Jomres 3.1.8

Upgraded plugin handling, allowing us to supply modules/mambots/minicomponents directly from the Jomres backend.
Replaced removeXSS with add slashes, resolves issue where some site settings not saving correctly.
Tweaked MRPavailability calendar so that link to booking room shows when half full.
Changed number filtering in 610paypal to number_format
Added code to detect plugin types to allow us to not show uninstall link for external plugins
Added code to booking engine so that if the filtered Id of the extra has a number as the first char then an X is added to the beginning, and if the string is empty, then a random string is generated.
Fixed issue in checkin times where checkin details were not showing correctly.


Jomres 3.1.7

Fixed bug where paypal tmpbooking object not available
Improved micromanage -> averages calulation when multiple room types selected
Now setting jomressystemlog path in jomres.php
Fixed minor bug in j01010listpropertys.class.php where multiple SDI inserts weren't being added correctly to property list template
Modifed j06000save_normalmode_tariffs.class.php so that in normal mode tariffs are not created when there are no rooms for that tariff
Added strip slashes to show plugins description output
Added check in booking insert functionality to check if a room wasn't double booked while the customer was paying. If it was, then this should trigger an error.


Jomres v3.1.6

Tweaked wording in installer to refer to Mambo/Joomla
Returned the magical disappearing minicomponent calls to j01050 (google maps)
Removed erroneous call to sefreltoabs from search functionaity, replaced with jomresURL
Reset testing download variable in update script to false
Modified functions.php dirmv function, set overwrite to be true by default
Returned the magical disappearing lat and long inputs to the edit property template
Added use Jomres email check to site_config
Commented out tmpBookingHandler->tmpbooking["property_uid"]=$property_uid; which was causing incorrect guest uid report in booking form
Modified the content tabs class so that if anchor is found to be empty after stripping out non-alphabetical text, then it uses the random string generator to create a random anchor.
Added mysql error reporting on event of unsuccessful doInsertSql
Added Hazel's tweak for next day property free in booking engine
Replaced calls to mosHTML with jomresHTML in cheque gateway
Changed session_start in list properties script
Restored handling of zips to add plugin so that we can manage directories within plugins
Disabled directory emptying in show plugins
Added check to ensure that the server's offline before running the upgrade process. Because jomres.php can now remove install_jomres.php we need to tell the admin that they need to run it, if the server's online then there's a chance that a site visitor will inadvertently remove it before admin's had a chance to run it.
Tweaked dobooking to remove property uid discovery
fixed table errors in email templates

Jomres v3.1.5

Changed default chmod to 755 in the dirmv function
Tweak license checking for IIS users 
Changed method of selecting value of country dropdown in register property template
Added updates folder to installer check
Added file_get_contents to functions.php
Updated plugin handling functionality for greater reliability
Updated lang files with new per person per night define
Fixed booking handler so that saveGuest works after resetting the guest details
Added test for plugin_unisntall.php to dropplugin function
Changed how the tmp booking hander's property uid and selectedProperty's id are compared, changed so that both are typed to an Integer during the test.
Tweaked jomres.php so that if possible it'll try to remove out of date/installer scripts on the server if possible.
Removed extra , in showRoomDetails check when discovering property uid
Added processpayment to discovery of property uid from tmp booking handler 


Jomres v3.1.4

Changed method of selecting value of country dropdown in register property step 1.
Re-enabled session method warning for Joomla 1.5
Inserted checks for function exists curl_init to disable remote plugins and updates if curl not available
Added section to test if task = showroomdetails then find the property uid by querying the roomuid

Jomres v3.1.4beta

Added extra notes to installer, enabled prefill of license key on existing installations, added installation of site_settings table
Suppressed error notice when trying to create sessions directory
Site config now saved to database
Added prototype remote plugin handling
Changed timeout (again) in session handler for J1.5
Reformated most of lang files so that they're not recorded with BOM
Added BOM stripper to jomres.php
Fixed misalignment issue in dobooking.html (thx Hazel)
Changed mailer class so that default output is utf-8
Added webinstall script existance warning to jomres.php
Tidied up backend Control panel, changed license server query so instead version data is pulled from updates.jomres.net
Fixed issue in jomres.php where globals for logging settings were not properly declared.
Added check to ensure that license key isn't being changed from the front end


Jomres v3.1.3

Added upgrade feature
Fixed bug in srp dobooking showing noscript warning
Moved location of setting success subject in paypal plugin
Fixed path to noimage in room details
Modified session_start in case server cannot start sessions without session being set to file
Changed paidAmount in paypal to float by default.
Fixed installer not creating data in components table

Jomres v3.1.2

Fixed unable to delete guests bug
Added check for joomla 1.5, if so then minutes setting is recalculated to seconds for session file timeout
Added Itemid to link to booking in hotel email
Reworked logging so that path to change how path to log files is found. If you are upgrading and intend to reuse your existing site_config.php, ensure that the $jrConfig['jomres_systemLog_path'] variable in site_config.php includes the full path to your system log, eg /var/www/html/media/, not just /media/


Jomres v3.1.1

Added fix for paypal IPN not working, involved creating whole new pseudo-session management code for tmp booking handler

Jomres v3.1 Northendnairn Edition

Added hazel's Northennairn Edition templates and css file and tweaked minicomponents
Added createJomresPortalBookingsTable check which resolves issues with users upgrading from pre-2.7 versions not having correct tables installed re portal
Moved slideshow default location to show below property header. Added switch to backend site config to offer option of above or below property details.
Enabled creation of subfolders for new property types and copying of default lang file to same folder automatically
Modified to allow switching off of cookies in content tabs (useful if SEF or other module functionality breaks handling of the config tabs)
Fix Added code for fading in extras 
Fixed bug where room types named incorrectly when set to links in search modules
Added extra code to check that lat/long isn't empty 


Jomres v3.0.6

Renamed availability calendar scripts, renumbered composite calendar call to 18 in viewproperty 
Added detection to change JOMRESPATH_BASE so that any trailing slash is removed. 
Removed indicator from overlib alt
Fixed output of discount so that room type description added to text about room type being discounted 
Tweaked some output of english.php regarding discounting in the booking form. 
Added extras container to fade out 
reverted to old star as it has transparent background 
Modified for Hazel's additions to viewproperty, puts outputted data into variables for conditional output. 
Added Center tags for SRP availability calendar
Added calls to language files for modules
Added strip slashes for dropdown/link outputs
Added center tags for MRP availability calendar 
Added hazel's conditional output so that links can show in property header 
Changed variance from jomresGetParam so that variance can be float 
Changed bookout extra services extraction so that they are not number formatted 
Changed path to edit item image for amend booking 
Minicomponentised slideshows 
Edited geocoder_latlong.html to fix output 
Made show smoking option No by default


Jomres v3.0.5

Fixed bug where room image isn't showing
Removed unneeded task=
Removed /administrator/ from path to site_config
Enabled output of reg instructions as button so that it doesn't cause a js error if editing mode is on. 
Added check for singleproperty so that solo users cannot create a new property 
Added extra checks to try to detect if user is custom editing and entering nothing. 
Modified paypal to set deposit required to float
Modified search to resolve issues with 1.5
Modified view property to show google maps
Modified jomres.php to minicomponentise self registration and being inline registration. 
Added lat and long to edit property inputs, table and geocoder output 
Added touch template functionality 


Jomres v3

Modified how a new property is created. Functionality now uses frontend register property steps which allows use the ability to set the SRP flag from the outset.
Encryption option in General Config removed, encryption key replaced with jomresConfig_secret (aka mosconfig_secret). If you have previously stored any creditcard data in the database it will no longer be accessible unless your mosConfig_secret is the same as that used in the old encryption option field. For this reason, you are advised to manually copy/print out any saved creditcard details that you want to retain and re-enter them manually after upgrading. If you do not, you will NOT be able to retrieve previously stored creditcard data.
Added property specific stats to front end manager's bar
Added email checking facility so that guest and hotel emails do not cause 500 error if one of said email addresses is invalid
Added option to jr_gettext "2". If $jrConfig['utfHTMLdecode']='2' then text is passed back as is pulled from the db, without it being modified by either the html_entity_decode or jomres_html_entity_decode_utf8 functions
Added feature to email errorlogs to bugs@jomres.net
Added check in editproperty script so that if user only has one property then they are unable to delete this property. 
Added more icons to installion process so that SRP and non-SRP specific room types are added by default. Added many more property features that are inserted on install
Fix booking out form, added pricing for rooms, replaced invoiceform script with reuse of book guest out script, as that already has the relevant calculations in it.
Added button in edit guest to enable emailing of confirmation form to guest (backup sent back to hotel, in case the hotel's email is different to the receptionist's)
Added guest numbers to confirmation form and initial emails.
Added html emails. To revert back to the old email settings uncomment the currently commented out text in the hotel and guest scripts, comment out the new code for calling the template, and set $mode=0
Added translation of room type for super property managers
Changed output so if no rooms available, you get a meaningful message, not just the empty list.
Added framework for remote access (to be implemented at a later date)
Huge rejig of file locations moving nearly all of them into the front end. Allows administrators to use .htaccess protection of administrator folder if required. All previous minicomponents no longer applicable.
Implement new defines for template paths, use a j00001 minicomponent to over-ride the defaults.
Minor tweaks to make Jomres work on Joomla 1.5RC4 Nightly 7th Jan
Removed hard coded links to administrator, replaced with JOMRES_ADMINISTRATORDIRECTORY
Added j00001start, which defines paths to templates and administrator folder, so the name of the directory can be changed and links should still ref once this file is modified


Jomres 2.7.5.1

Renamed internal function html_entity_decode_utf8 to jomres_html_entity_decode_utf8

Jomres 2.7.5

Integrated portal functionality into backend. Supplies some stat information on individual properties, plus overall information. Allows setting of commission and integration with forgeign account systems (currently, only nbill).
Added jomrestoken to many areas of code to defend against CSRF (See here for more information http://forum.joomla.org/index.php/topic,248109.0.html)
Added alternative gregoriantojd function
Modified search functions to pull Super Property set code modified in Edit Language task 
Fixed issue with deposits set to 3 decimal places failing paypal confirmation
Added Itemid to hidden output of modules
Some performance tweaks, uses thisJomresProperty instead of making independant queries 
Commented out not logged in message 
Added property uid to test property details function, fixes issue where property name not shown correctly 
Switch off echoing of setting changes 
searchAll added to countries list 
Fixed bug with edit room feature not working 

Jomres 2.7 Stable

Switched off SSL in joomla. Joomla forgets the user when switching from http to https, therefore managers are unable to switch without their details being lost. Unable to perform manager bookings.
Added more options to weekend days.
Un-included configuration.php again.
Fixed customer type order not being saved.
Changed query to order guest types by Order.
Removed duplicate define
Added some simple debugging info .
Tweaked amend booking functionality.
Added note to upgradeWarning: Also note that due to the addition of the Extras models into the core code, if you are upgrading from below 2.7 you'll need to edit your optional extras to normalise them against the new tables (just go into each extra and click Save).
Fixed favourites couldn't be added if someobody else already had a property marked as a favourite. 
Changed buttons options so that if in popup the cancel booking button is available (so that booking can be cancelled from blackbooking)
Changed format of jrgettext for view black booking link so that link is clickable if editing mode on. 
Fixed genericOr call not passing "false", was stopping occupation showing in composite calendar. 
Updated getAllBookings, fixedDaysArrivaldateDropdown, calcPeriods etc with Hazel's contributions. Modified code allows us to select historic as well as future dates in fixed arrival dates dropdown in booking form.



Jomres 2.7 RC 1

Added booking editing functionality. Well played Hazel!
Added remote availability plugin to Jomres Core
Commented out Global Features and Global Room types options in backend site config. So many features in Jomres rely on these options being set to Yes that it's best to remove the option to set them to No.
Added option "Minimise configuration options" in site config. Allows the site manager to present a minimised set of options in the General Configuration. Means that there are less options for Property managers to play around with, and the Gen Config page renders faster in the browser.
Integrated last minute plugin into Core code. This plugin is only available to SRPs, whilst Wiseprice is now only available to MRPs.
Added code to output discount information to property list and view property pages
Added option in general configuration which allows output of Verbose tariff info or a simpler list of tariffs
Changed the conversion link from google to xe.com. xe.com offers conversion options to many more currencies and is a better interface.
Integrated enhanced tariffs into core system as "Micromanage" tariff editing mode.
Added warning to install_jomres.php if upgrading RE the new tariff modes.
Change "room" types are reworded in the language file to "room/property" types.
Change css file to show black on grey instead of white on grey.
Change link in property details to show rooms list instead of calendar in popup.
Change jomres.php to show full room details when room availability link clicked.
Fixed some issues with displaying audit table
Removed jquery interface functionality as not compatible with jQuery 1.2. Booking form rooms list behaves slightly differently, but not much.
Added code to remove guest data from session if user is manager when going to dobooking again, add resetTempGuestData to session handler.
Integrated cheque/payoffline plugin into the core build.
Fixed Resolved issue with occasionally temp guest data not being passed to booking confirmation page. 
Fixed duplicate bookings when form used in IE issue.
Added bolds for tariffs not passing in booking form logging.
Added file detection for three files that need to be removed after upgrade.
Added flag to genericOr to disable (int) option if the data passed to it isn't an array of integers.
Modified availability calendar so that the dates passed to genericOr function aren't set to integers. 

Jomres 2.6.3 RC 1

Added SSL switching for booking form
Debugged installer on new install checking the license key before it has been created
Modified default templates so that they're all set to Basic. We'll let the template override take over from now on.

Jomres 2.6.3 Beta 1

Added code for flash area. This is a less featured but more robust alternative to the sometimes buggy javascript editors
Added code to enable switching manager's menus to text mode
Added new functionality whereby default room/tariff administration is the new "Normal" mode. Provides a simpler way of administering tariffs for new users. Experienced users can switch to Advanced mode (General Config -> Tariffs and Currencies tab) to edit rooms and tariffs and create room features.
Added option so that Room types can be designated for SRPs or not.
Added room details list to Property details page.
Converted booking notes functionality to work as part of Jomres Core
Converted my user plugin to work as part of Jomres Core
Converted Extras Models to work as part of Jomres Core
Converted Wise Price to work as part of Jomres Core


Added lang definition for sort order.
Added country to property details.
Removed incorrect description of icon sizes.
Modified composite calendar. Changed getParam for task from "" to 0. Should stop calendars from opening the booking form in new windows.
Modified integration.php to force inclusion of configuration.php so if Joomla's globals emulation off fails then Jomres will STILL use the local configuration.php to find various settings.
Fixed issue where existing guest's region data wasn't being pulled from system by the manager's select guest dropdown in the booking form.
Curl fixes.
added image sorting.
Fixed issue where room features not showing in room details on booking form.
Added option to rooms config to enable translation of room features, and added same to booking engine to show changes.
Fixed added line to allow change of the registered language when the booking form is reloaded. If users switched from lang A to lang B the overlib would continue to use the data as per lang A.
Fixed issue with non-editor custom code only saving 1 and not the string.
updated slovak.php Many thanks to mojeslovensko for your hard work.
updated danish.php Many thanks to Ronny Buelund for your hard work.
Removed reference to jrConfig Itemid in pathway minicomp as it was causing Mambo to lose the Itemid.
Booking engine re-enable error logging.
Removed hard coded currency format, replaced with new definition in language file.
Corrected notes for paypal integration.
Added code to refuse deletion if only one property on system
Modified installer to check for NULL tables in SHOW TABLES
Added code to pull today's date from cookie/request if possible when listing properties. Should allow us to output prices from the search dates if available.
Added thursday/friday and thursday/friday/saturday as weekend options
Moved some files into /components/com_jomres directory
Converted more hardcoded elements in backend to language defines
Moved patTemplate dump option to backend
Removed css tab completely as dump template vars option is now in backend, and diff templates feature is replaced with template override feature. If you are upgrading it is advised that you physically remove the file j00501css.class.php as it cannot be removed by the installer. If you do not remove it you will simply find that it's settings no longer have any affect.
Forced $mrConfig['templatePack']="basic"; in jomres.php
Clicking Submit/Save in Edit Property page now takes you back to the edit property page so that you can continue editing.

* RE flasharea: Jomres uses the file jomres.xml in components\com_jomres\libraries\flash_area\resources\FlashArea\options Documentation can be found here: http://www.tufat.com/docs/flasharea/index.html

Jomres 2.6.2 Stable

Added fix for bug reporter
Added code to query number of properties to enable Single Property version
Removed engine type from table create routines
Removed Itemid from booking forms
Fixed bug in BlockUI code
Added new jquery.js 1.1.4 for improved performance

Jomres 2.6.2 Beta2

General tweaking of new temp booking handling.

Jomres 2.6.2 Beta1

Added noscript Meta tag to booking form to redirect on user having javascript disabled
Added jQuery blockUI functionality for better feedback
Added session handling for temp bookings plus other booking engine tweaks for performance
Added pathway minicomponent
Removed HTMLPurifier
Removed AjaxRequest, replaced with jQuery's ajax handling. Much faster.
Modified booking form. Address details are not added during the input filling stage. Instead they're added on submit.
Modified input filtering. 
Modified converted some of the javascript files so that they are compressed. Fullsize versions are still available.
Modified publish function moved out into minicomponent
Modified changed permissions so that Super Property managers can create new properties, even when backend config disallows managers from creating properties
Two new flags in site_config: $jrConfig['disableAudit']="0"; $jrConfig['dynamicMinIntervalRecalculation']="0";


Jomres 2.6.1 Stable

Modified Numerous changes to improve validation
Modified Numerous changes to allow functionality within Mambo 4.6.2

Jomres 2.6.1beta2.1

Modified Upgraded self registration functionality to work with this version of Jomres
Modified Disabled sample data install in Cpanel. Sample data is created on install so no need for this now
Modified Added slashes to specialReqs

Jomres 2.6.1beta2

Added Hazel's property list sort ordering
Added New weekends only flag for tariffs
Added setini memory limit to jomres.php
Added searchAll variable to all lang files and search funcs
Modified colour picker, was causing problems in Ie and causing the General Config panel to load slowly.
Modified disabled requirement to enter license key when on localhost
Modified tweaked various froms in an effort to make it so that you only need to edit the css declaration .innerwrapper to modify the overall width
Modified added logManager functionality to core Jomres build
Modified changed rooms list for composite availability display. To revert to the rooms list for those users who wish to keep it, remove the existing j01050showroomdetails.class.php and rename xj01050showroomdetails.class.php to j01050showroomdetails.class.php
Modified Upgraded backend CSS handling to that contributed by Jaap.
Modified Property header script. Now property name is added to title of page whenever property header is shown
Modified Moved recording of error out into own func and added recording on E_ERROR_USER
Modified license handling. If license not valid only backend functionality is affected.
Modified Improved how all Property Managers are updated to new manager->property xref tables
Modified added quotesmart to special requirements
Modified Added number of guests to cpanel
Modified Itemid selection. Now the Itemid should be pulled correctly from $_REQUEST
Modified added Selected option to filterForm
Modified Moved the rooms list fields to top for SRPs
Fixed issue where super property manager dropdown wasn't offered
Fixed issue where dates weren't filtering in audit log
Fixed issue where some audit logs were not being moved to audit archive
Fixed Resolved bug where both vacancies and no vacancies were showing for SRPs



Jomres 2.6.1beta

Added new optional event trigger 01009. This is parsed in the property list minicomponent, allows us to create minicomponents that can re-jig the property uids list order before the properties are output.
Added bug reporting for super property managers to core of Jomres
Added selective property manager handling. Property managers can now be specifically assigned to different properties, rather than the all or nothing method that used to happen. Admins need to edit the user's default property to set them to a Super Property Manager (new dropdown at top of page).
Added utf-8 encode to month name output in availability calendar. Resolves issue where the wrapped function outputs in an incompatible charset. 
Modified manager & receptionists images upgraded. Thanks to Jaap (http://www.ohmprint.nl/) for this contribution.
Modified control panel in backend. Thanks to Jaap (http://www.ohmprint.nl/) for this contribution.
Modified tab object so that tabs are run by jQuery. 
Modified Moved noConflict setting for jQuery into jomres.php.
Modified moved email to below telephone number inputs
Modified Many changes to booking object to allow for faster querying properties with multiple rooms and tariffs
Modified if defined statements to allow for JBASE_PATH already being defined and current framework is not J1.5
Modified gateway handling to allow for renaming of gateway name in config tabs
Fixed dutch javascript calendar
Fixed description search

Note, if you are using a custom/template override and upgrade to this version of Jomres you need to modify your dobooking.html & dobooking_srp.html files and add
var ajaxurl	= "{AJAXURL}";
under where livesite is defined. Failure to do this will result in your booking form stopping working.

Jomres 2.6.0.2

Added jQuery to booking form, rooms list slides up and down while changing, and guest details input hides when room needs to be selected
Added test for pid from tmpbooking so that correct property type specific language file is called when doing bookings
Modified rooms list, changed position of room details overlib popup from below right to above left
Modified Added license key check to installer
Modified added ability to edit custom text one tariffs title and description
Modified added ability to edit rooms config: room names custom text enabled
Modified added ability to edit guest types, custom text for name and notes
Modified custom text editing. Edit in place removed, links now open in _blank, and custom text is identifiable by class, click on text to edit it.
Fixed implode variances issue. More than 2 variances was causing prices to calculate incorrectly, so commented out meaningless check that was causing this.
Fixed custom text not showing in property list when not logged in
Fixed issue where when allowing short bookings, 7 was in dropdown but staydays was set to 4
Fixed issue where users unable to delete properties


Jomres 2.6.0.1

Added Added align="top" to td to dobooking.html
Added Property type language file selection.
Added detection of the function JRHPbot. Allows to switch off certain buttons if the Jomres/Hot Property synchronisation bot is detected
Added more property types to install script.
Added connectivity test to integration.php and improved feedback from same in the event of license key failure
Modified edit-in-place so that large strings of text are inserted into textareas, rather than input fields
Modified Edit & save properties minicomp triggers moved to jomres.php
Modified Moved language file selection into jomres.php
Modified makefeatureimages to allow translation of property features. 
Modified Reversed if defined check for JPATH_BASE
Fixed install script not dropping tables
Fixed property description not showing in property list


Jomres v2.6 Stable

Added mambot handling to property details (all textbox inputs) and list properties, property description
Added option to make target blank if in popup for Availability calendar 
Added property delete button to property admin, property tab 
Added room images to booking form overlib buttons
Added creditcard type handling to Form component
Added index.php?option=com_jomres to various backend template files
Added russian.php
Added translation functionality to listproperties for property description.
Added 05020 mcOutput functionality for adding customOutput_XXXXX to the booking form
Added limit 1 to property details query 
Changed the event trigger for form insert data to 05019 
Changed the availability cookies, added / and jomresConfig_live_site to path
Fixed inability to save black bookings (again)
Fixed issue in form component where unregistered users were causing a fatal error
Fixed issue where prices greater than 1000 resaved as 1 in Extras

Jomres v2.6 RC4
Added code to allow new license types
Added html editors to edit property fields
Disabled clone option for rooms showing when SRP
Resolved issue where guest's details were not being stored until their second booking
Created new trigger point 05020, which in the base install includes dobooking.php (which initially constructs the booking form).
Created new trigger point 05010, which in the base install includes handlereq.php (which receives the ajax calls from the booking form).


Jomres v2.6 RC3.2
Added connectivity testing to install_jomres.php. Allows us to test connectivity to the license server and identify any possible firewall issues right at the beginning.


Jomres v2.6 RC3.1
Resolved date in search form/booking form sometimes vastly in the future.
Resolved encryption key being saved but <?php not being saved to the encryption key file


Jomres v2.6 RC3
Modified booking form. Restored function that resets the selected rooms list as tariffs were not being reset properly when another date with a different tariff is selected

Jomres v2.6 RC3

Modified the mininterval functionality. Properties using flat rates will find the min interval set to the lowest min days found, average rate the opposite.
Tweaked the jomres hint menu output to resolve issues with ' (apostrophes, eg in french lang).
Added room_total, discount & currency code columns to contracts table, this info is now passed from the temp booking to the contracts table.
Added 00050 event trigger for non-authorised, registered users so that they can see menu options.
Added extended indexs for Jomres tables.
Added global currency code & symbol. Preperation for portal functionality, allows for a global currency code if required.
Added metatitle to property description page.
Added isInIframe config option, allows users to use Jomres within iframes.
Fixed annoying message about mysql when changing a user's default property/access level.


Jomres v2.6 RC2
Number formatting. Added the option to choose your number formatting style, go into General Configuration -> Tariffs and Currencies to choose your number output style.
Booking form minimum-interval calculation. While searching for tariffs the booking process will remember all of the minimum days in the tariffs found and set the internal mininterval flag to the lowest figure found. This is expected to be useful for those properties that want to set the mininterval flag (IE the minimum number of days in a booking) to 1 for most of the time, but make it longer, eg over specific holiday periods by reacting to the tariffs found for a given period.
Modified the key generation code. For some reason, during keygeneration the http:// was being retained when the key is first generated for the hostname binding, but then it was being tested against the domain without the http://, consequentially installation was often failing. I've modified this by stripping out any occurances of http:// during the key gen process. 
Added code to stop already selected and still available rooms from being removed when a booking particular (eg date, guest numbers) has been changed.
Added xml logging. There are 3 types of logging: request (everything from $_REQUEST), system (various ad hoc values, as needed during dev/testing), gateway (logging for gateway calls), and booking (various booking log data is recorded). Logging files are currently written to the /media folder, this will probably be expended in the future. If you want to switch loggin on, edit jomres.php  and change $loggingEnabled to 'true';
Fixed a bug in insert booking function where jomressession wasn't always being passed to the script, therefore the booking wouldn't insert
Modifed functions.php getCurrentBookingData so that it would simply return, rather than exit, if jomressession is not set.
Fixed paging, starts on page 1 now.
Removed number_format from dobooking_functions, except from the overlib generation and extras output code.



Jomres v2.6 RC1
Fixed IPN not being confirmed correctly
Fixed unable to cancel booking
Added query to beginning of admin.jomres.net to check for the length of the license key, if it isn't set then task is set to showSiteConfig. 
Added Jomres control panel tabs object
Added departure date cookie
Major changes to allow operation in both Joomla 1.0.x & Joomla 1.5. Whilst Jomres now appears to work with Joomla 1.5Beta 1, none of the plugins do (need to create new 1.5 compatible installers)
Major changes to database query functionality to improve performance
Major changes to the basic template
Reworked dashboard calendar to improve performance
Reworked list propertys mini-component to improve performance
Reworked all of the front end templates so that their colours can be edited through a css file
Fixed users entering ' into booking form causing javascript error (Gratz Hamish)
Fixed installing sample data query bug
Fixed paging in search results
Fixed US room tax functionality
Modified search functionality: If the availability search is used in combination with the room type search then properties without an available room of requested room type are excluded from the results.
The non-basic templates aren't getting updated and the template overrides are a better method of creating your own template. They have been removed, if you want your own look for the Jomres then it is highly advised that you install the basic template override pack and edit that.
Removed the css config option introduced in v2.0. 
Room list generation output split into two to allow rooms list to be presented side by side if required (Gratz Hazel)


Jomres v2.5.0.1

Changed jr_gettext function to return data html_entity_decode'd so that html can be used in various input fields
Changed Extras ajax call from getResponse to getResponse_guest to prevent the rooms field from being hidden after an extra is selected.
Changed how special requirements are handled.
Changed booking out page. As Jomres' main focus is on the taking of bookings, rather than the hotel admin side of things, I felt it was wise to not spend too much time on something that's rarely used, so reduced the amount of information stored there.
Changed dashboard cookie expiry to 1 hour
Changed added guest numbers check to average rate method
Changed allowed super property managers to make bookings on properties different to their currently active property (switches active property then redirects them)
Ensured that booking engine uses the jr_gettext function, rather than the built in function.
Removed show_log that was appearing twice in jomres.js, causing the log output to be triggered twice in the booking form when some elements were selected
Removed a couple of information elements from certain pages as they are now covered by the Context Sensitive Help mini-component.
Fixed listproperties, wasn't finding the property image
Fixed savehotelsettings wasn't updating new settings 

Jomres 2.5

// Stable
Various bug fixes
Changed how general config is displayed and updated to speed up update time. General config still slow in IE due to IE not rendering the javascript colour pickers quickly enough.
Function to get property specific settings modified to import mrConfig 
from jomres_config.php. This is because imported properties will not 
have a complete set of settings imported. It also allows us to only 
insert settings that are pertinent to this property in the settings table, 
allowing us to set a given setting as the default in jomres_config.php.
Only applies to properties created after install of this version of Jomres.
Improved averaging model method in booking form.
Modified jomres.php so that in the event that no property data exists it will 
search for a trigger 06000 so that an import function can be used.
Added option to override "task" with "task2" if required in jomres.php. Not currently used, 
but gives us possible future extendability.



Added jomres_toolbar class - very pretty
Added phpDocumenter tags
Added lowest tariff price to listproperties
Added more property details to listproperties
Added mini-component collision detection
Added module 0 to module pack - Allows for searching within the component area
Added wildcard searching on dropdowns
Added new image uploading class - Image Fullsize image width is set in backend, as are the slideshow choice and popup sizes, gives webmaster more chance of attaining a consistent look to their site. 
Added if errorchecking on then output to text file in /media/ with logs
Added CURL to license communication routines. This is for users who don't have access to fopen to use Jomres.
Changed moved averaging and flatrate calculation methods into dobooking_functions and added config option so that property managers can choose their tariff model
Changed tariff handling so that template overrides can be provided in one file instead of seperate files. Important, see readme.
Changed Put averaging & flat rate methods into jomres_booking object, added configuration option to Tariffs config panel to choose one of these models
Changed refactored the search functionality so that it's one of the mini-components. The search modules as a result have had to be rewritten, if you use the search modules then you'll need to download and install the new m1 -> m4 modules. To get searching in the content panel install the m0 module (READ THE NOTES!) 
Changed room & tariff editing functionality to mini-components
Changed booking confirmation, insert and completion to mini-components
Change paypal insert of booking. The insert of the booking is now performed at the IPN stage, as the payment is confirmed here anyway. It saves users who navigate away from the paypal payment screen without returning to the jomres site from loosing their bookings. Now returning to the jomres site simply takes them to the booking confirmation page.
Change managers can now search while logged in. If they are a super property manager then when they click to view a property then their active property will be changed to that property
Redesigned the listpropertys template a little


Jomres 2.4
Fixed Tariffs showing tariffs stored as weekly charges if you have pre-v2 multiplier set
Fixed 1.0.10 forcing tariffs to be stored as integer

Jomres 2.3
Some changes to harden against XSS attacks
Some changes to ISO handling.
Fixed hardcoded message in booking form
Fixed core minicomponent gateway icon not showing
Fixed unable to confirm paypal payments
Optomised the availability calendar

Jomres 2.2
Fixed wrong file name in warning when saving config.
Fixed Joomla 1.0.10 bug where clicking on a date don't provide correct date in booking form.
Fixed Black booking not saving
Added livesite variable to booking confirmation template variables
Fixed list bookings showing Black bookings
fixed email not showing rooms
Fixed paypal currency code being sent incorrectly
Fixed jomres.php calling wrong javascript calendar
Improved messages from installer


Jomres v2.1
Fixed unable to view any properties when all properties unpublished
Fixed various license number issues
Moved property header into it's own mini-component
Added option to override show tariff template
Fixed Single person suppliments



Jomres v2
Added: Subversion
Added: Completely new booking process
Added: Customer/guest types
Added: Option to put rooms lists/availability in a new page/popup
Added: Css styling

Change: Guest types can be ordered

Removed: Adult/Kids numbers, replaced by Guest type functionality

Jomres v1.4i

Added: Created new functionality option: Show detailed room information? 
Added: Functionality to show available tariffs, instead of rooms.
Added: New template file: bookings_showavailability.
Added: Completely rewrote the search functionality.
Added: Google currency conversion links to tariff popup/page.

Change: Moved Tariff admin into the Property Admin tabs
Change: Reordered Property Admin tabs to make Room type relationships more logical
Change: Bolded Room types to make them more obvious


Jomres v1.4h

Added: Form input validation for booking form
Added: Bulk language modification script
Added: Default country for booking form. Setting: Misc in General configuration
Added: Code to change basic text (eg property description) to allow translation thru Jomres Editing Mode.
Added: Self registration
Added: Meta keywords generated by site content
Added: Global Room types
Added: Site help code
Added: Functionality to charge for extras by the day, as well as flat rate.
Added: Option to show calendar from beginning of year, as opposed to current month.

Change: Definitions for constants. All now preceeded with _JOMRES
Change: Various changes to allow modules easier access to some Jomres functions.
Change: Moved some stuff around and added most of the includes to the integration.php to let scripts like the portal use the already existing Jomres functionality


Fix: Overlib & mosTabs conflicting in IE 
Fix: tab javascript loading when tabs not defined, causing javascript errors. Guest numbers not showing on confirmation page in basic template. 
Fix: Extras not remaining checked in basic template.
Fix: GMT dates not handled correctly by datediff function
Fix: Availability search function

Jomres v1.4g

Fixed bug introduced in Joomla 1.0.7 where certain sections of the code incorrectly assigned manager rights to unauthorised users.
New config option: Daily rate multiplier.
Javascript calendars: Departure date is now aware of the date set in the arrival date and adjusts according
Slideshow popup width & Slideshow popup height options in config
Edited basic template to reduce screen usage
Added room names to black bookings
Added room names & tariff info to customer/staff email


Jomres v1.4f

Nice new basic template

Jomres v1.4e

Added config option: Show departure date input? Option

Jomres v1.4d

Added George Hageman's Averaging system for calculating tariff prices

Jomres v1.4c

Added country dropdown list to the booking screen.
Some templates changed to accomodate this change

Jomres v1.4b

Fixed bug where multiple tariff users of apartment renters were unable to process bookings


Jomres v1.4a 

Niced up the property configuration/booking room tab a bit. Changed the wording from "Is this a single room property" to "is this an apartment/cottage/villa.
Improved the booking process for apartments, got rid of the silly confirm radio button.
Fixed a bug where the property_uid wasn't being found when going to processpayment.

Jomres v1.4

Added: Gateway handling code
Added: warning that advises if Joomla has logged users out due to inactivity.
Added: index.html to subdirs
Added: templated most of the backend functionality
Added: to property editing funcs. When new property added some basic data is set up.
Added: error checking during install to check that all tables have been created
Added: new option in property settings page: Gallery link. Put a link to your properties photo gallery here. It will show on the main property description page when filled
Added: Encryption options for storing creditcard details
Added: creditcard popup box
Added: A popup option for the property description screen where you can popup to the gallery of your choice. I intend to make all popups optional in a future release.
Added: Link to slideshows. Switchable in property config
Added: Tariffs link is switchable
Added: Batch uploading



Changed: Virtually every admin screen has been modified in one form or another to take advantage of toolbar buttons, and particularly the edit property functionality has seen a major code tidy-up .
Change: Modified the location of the uploaded images. Now images are stored in images/stories/jomres. This solves the problem of an uninstall/reinstall trashing our image locations.
Change: Tweaked user object handling. Now first time super managers are immediately assigned to the first property in the database

Removed: Public holiday settings. To the best of my knowlege nobody is using them, and they create unnecessary complications.

Jomres v1.3

Important! If you have installed previous versions of Jomres you much check the readme.txt for updates to your tables to bring them into line with this version. This applies even if you have uninstalled a previous version of Jomres, because the uninstallation of Mosres/Jomres is non-database destructive. If you have previously installed Jomres be aware that v1.2 onwards uses different table names (xxx_jomres_xxxxxx as opposed to xxx_mosres_xxxxxx) so if you want to retain your data then you will need to rename your tables. There is a file in the docs subdir called "upgrade tables 1.1 - 1.3.txt" which should help you with this, but use it at your own risk.

If you are using the Super Manager mode the first thing you need to do is click Change Properties (which you will see if you have more than one property on the system) to properly set your user up.

Changelog for v1.3:

Added: Property switching. Previously Super Property Managers would view all the elements for all the properties. This could cause confusion, and sometimes Jomres just wouldn't work right because it didn't know which property it was working against. The first time you visit your property as property manager after upgrading to v1.3, if you have more than one property listed then click Change Property to initialise your user properly.
Added: Our tariffs link. There's a new template show_tariffs.tmpl to work with this functionality.
Added: Editing mode. See the tutorials on jomres.net for a demonstration.
Added: Property types. Configured at the back end of the system. Not configurable by Property Managers
Added: Ability to search the current country/region/property type when there are more than one property in said region/property type.
Added: Book guest out option to Display booking tabbed page (providing that they are currently booked in)
Added: "Remainder to pay" label to the display booking page. Shows the grand total minus the deposit paid, if the deposit has been paid (duh).
Added: search.tmpl. This template contains the dropdown boxes that allow a visitor to choose from a number of different properties. If there's only one property on the system, then naturally this option isn't shown.
Added: bottom.tmpl. This doesn't actually have any info presented to it from a script, it's just there in case you want a footer.
Added: Item ids.
Added: Sef.



Fixed: Guests are now unique to a property. Property managers/receptionists can only admin their own guests
Fixed: Where varying types of tariffs weren't being offered for each room. Only one tariff for each room was being offered. Bug introduced by templating func, so versions prior to 1.2 not affected. A fixed version of 1.2 is available at http://upgrades.jomres.net for license holders.
Fixed: Paypal playing up again. Thanks Graham.
Change: If "Limit advance bookings" is on, then the availability calendars no longer offer dates later than the end of the chosen period. This is not yet true for the javascript calendars.
Change: Added option to settings to change the number of months of the availability calendar is shown.
Change: Added option to Tariffs & Currencies. Amount charged at booking time. You can now select to charge the full amount or a smaller deposit
Change: Modified links on bookings/showroom details. Links now pop up. Room details are shown without the avl cal and the avl cal is shown without room details.
Change: Modified how the user is authorised to cut down on database access.
Change: Added templating functionality to booking cancellation
Change: Added code to remember active tabs. 
