<patTemplate:tmpl name="pageoutput" unusedvars="strip">
<script type="text/javascript">
	<!--
	jomresJquery(document).ready(function () {
		var oTable = jomresJquery('#list_guests').dataTable({
			"bJQueryUI": true,
			"bStateSave": true,
			"sPaginationType": "full_numbers",
			"bProcessing": true,
			"bServerSide": true,
			"sAjaxSource": '{AJAX_URL}'
		}).fnSetFilteringDelay().dataTableSetHiddenColumns();
	});
	/* Filtering delay */
	if ('undefined' != typeof(jomresJquery.fn.dataTableExt )) {
		jomresJquery.fn.dataTableExt.oApi.fnSetFilteringDelay = function ( oSettings, iDelay ) {
			var _that = this;
		 
			if ( iDelay === undefined ) {
				iDelay = 750;
			}
			  
			this.each( function ( i ) {
				jomresJquery.fn.dataTableExt.iApiIndex = i;
				var
					$this = this,
					oTimerId = null,
					sPreviousSearch = null,
					anControl = jomresJquery( 'input', _that.fnSettings().aanFeatures.f );
				  
					anControl.unbind( 'keyup' ).bind( 'keyup', function() {
					var $$this = $this;
		  
					if (sPreviousSearch === null || sPreviousSearch != anControl.val()) {
						window.clearTimeout(oTimerId);
						sPreviousSearch = anControl.val(); 
						oTimerId = window.setTimeout(function() {
							jomresJquery.fn.dataTableExt.iApiIndex = i;
							_that.fnFilter( anControl.val() );
						}, iDelay);
					}
				});
				  
				return this;
			} );
			return this;
		};
	};
	/* Hide columns*/
		if ('undefined' != typeof(jomresJquery.fn.dataTableExt )) {
			jomresJquery.fn.dataTableExt.oApi.dataTableSetHiddenColumns = function ()
				{
				var oTable = jomresJquery('#list_guests').dataTable();
				column_ids = new Array(1,4,5,6,7,8,9,10,11,13,14);
				jomresJquery.each(column_ids, function(i) {
					oTable.fnSetColumnVis( column_ids[i], false, false );
					});
				};
		};
	//-->
</script>
<h2>{PAGETITLE}</h2>

<table width="100%" border="0">
	<tr>
		<td width="50%" align="left">{JOMRESTOOLBAR}</td>
		<td width="50%" align="right"><!--{HISTORIC_GUESTS_DROPDOWN}{SURNAMEDROPDOWN}--></td>
	</tr>
</table>
<table width="100%" border="0" id="list_guests">
	<thead>
		<tr>
			<th>{HEDITLINK}</th>
			<th>Uid</th>
			<th>{HFIRSTNAME}</th>
			<th>{HSURNAME}</th>
			<th>{HHOUSE}</th>
			<th>{HSTREET}</th>
			<th>{HTOWN}</th>
			<th>{HREGION}</th>
			<th>{HPOSTCODE}</th>
			<th>{HCOUNTRY}</th>
			<th>{HLANDLINE}</th>
			<th>{HMOBILE}</th>
			<th>{HEMAIL}</th>
			<th>{HVAT}</th>
			<th>{HPERSONAL_DISCOUNT}</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>
</patTemplate:tmpl>