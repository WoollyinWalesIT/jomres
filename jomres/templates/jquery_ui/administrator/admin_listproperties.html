<patTemplate:tmpl name="pageoutput" unusedvars="strip">
<script language="JavaScript" type="text/javascript">
	<!--
	jomresJquery(document).ready(function () {
		var oTable = jomresJquery('#admin_listproperties').dataTable({
			"sDom": '<"H"lCfr>t<"F"ip>',
			"bJQueryUI": true,
			"bStateSave": true,
			"sPaginationType": "full_numbers",
			"bProcessing": true,
			"bServerSide": true,
			"sAjaxSource": '{AJAX_URL}',
			"oColVis": {
				"aiExclude": [ 0 ],
				"bRestore": false
			}
		}).fnSetFilteringDelay().dataTableSetHiddenColumns();
	});
	/* Filtering delay */
	if ('undefined' != typeof(jomresJquery.fn.dataTableExt )) {
		jomresJquery.fn.dataTableExt.oApi.fnSetFilteringDelay = function ( oSettings, iDelay ) {
			var _that = this;
		 
			if ( iDelay === undefined ) {
				iDelay = 750;
			}
			  
			this.each( function ( i ) {
				jomresJquery.fn.dataTableExt.iApiIndex = i;
				var
					$this = this,
					oTimerId = null,
					sPreviousSearch = null,
					anControl = jomresJquery( 'input', _that.fnSettings().aanFeatures.f );
				  
					anControl.unbind( 'keyup' ).bind( 'keyup', function() {
					var $$this = $this;
		  
					if (sPreviousSearch === null || sPreviousSearch != anControl.val()) {
						window.clearTimeout(oTimerId);
						sPreviousSearch = anControl.val(); 
						oTimerId = window.setTimeout(function() {
							jomresJquery.fn.dataTableExt.iApiIndex = i;
							_that.fnFilter( anControl.val() );
						}, iDelay);
					}
				});
				  
				return this;
			} );
			return this;
		};
	};
	/* Hide columns*/
	if ('undefined' != typeof(jomresJquery.fn.dataTableExt )) {
		jomresJquery.fn.dataTableExt.oApi.dataTableSetHiddenColumns = function ()
			{
			var oTable = jomresJquery('#showLiveBookings').dataTable();
			column_ids = new Array(1,3,8,9,10,11,12,13,14,15,16,17);
			jomresJquery.each(column_ids, function(i) {
				oTable.fnSetColumnVis( column_ids[i], false, false );
				});
			};
	};
	
	function savecrates(property_uid, crate_id) 
		{
		cmd = '{JOMRES_SITEPAGE_URL_ADMIN_AJAX}&task=savecrates_ajax&property_uid=' + property_uid + '&crate_id=' + crate_id;
		jomresJquery.get(cmd, function (data) {
			//alert "OK"
			});
		}
	
	function setApproval(property_uid, approved) 
		{
		cmd = '{JOMRES_SITEPAGE_URL_ADMIN_AJAX}&task=ajax_list_properties_approve&property_uid=' + property_uid + '&approved=' + approved;
		jomresJquery.get(cmd, function (data) {
			//alert "OK"
			});
		}
</script>

<h2>{PAGETITLE}</h2>

<table id="admin_listproperties" class="ui-widget-content ui-corner-all" width="100%">
	<thead>
		<tr>
			<th>{HSTATUS}</th>
			<th>{HPROPERTYUID}</th>
			<th>{HPROPERTYNAME}</th>
			<th>{HPROPERTY_STREET}</th>
			<th>{HPROPERTY_TOWN}</th>
			<th>{HPROPERTY_REGION}</th>
			<th>{HPROPERTY_POSTCODE}</th>
			<th>{HPROPERTY_COUNTRY}</th>
			<th>{HPROPERTY_TEL}</th>
			<th>{HPROPERTY_FAX}</th>
			<th>{HPROPERTY_EMAIL}</th>
			<th>{HPROPERTY_STARS}</th>
			<th>{HPROPERTY_SUPERIOR}</th>
			<th>{HPROPERTY_LAT}</th>
			<th>{HPROPERTY_LONG}</th>
			<th>{HAPPROVED}</th>
			<th>{HLASTCHANGED}</th>
			<th>{HCRATE}</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>
</patTemplate:tmpl>