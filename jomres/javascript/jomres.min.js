function Block_Error(){return true}function toggle_button_class(e){var t=jomresJquery(e).hasClass("active");if(t)jomresJquery(e).removeClass("active btn-success");else jomresJquery(e).addClass("active btn-success")}function make_datatable(e,t,n,r,i){bProcessing=false;bServerSide=false;if(typeof r!=="undefined"&&r!=""){bProcessing=true;bServerSide=true}if(typeof i==="undefined")showTableTools=true;else showTableTools=i;if(showTableTools){if(jomres_template_version=="bootstrap3"){sDomm="<'row'<'col-xs-4'l><'col-xs-4'TC><'col-xs-4'f>>rt<'row'<'col-xs-4'i><'col-xs-8'p>>"}else{sDomm="<'row-fluid'<'span4'l><'span4'TC><'span4'f>>rt<'row-fluid'<'span4'i><'span8'p>>"}}else{if(jomres_template_version=="bootstrap3"){sDomm="<'row'<'col-xs-4'l><'col-xs-8'f>>rt<'row-fluid'<'col-xs-4'i><'col-xs-8'p>>"}else{sDomm="<'row-fluid'<'span4'l><'span8'f>>rt<'row-fluid'<'span4'i><'span8'p>>"}}var s=jomresJquery("#"+e).dataTable({bProcessing:bProcessing,bServerSide:bServerSide,sAjaxSource:r,bJQueryUI:false,bStateSave:true,bAutoWidth:false,sPaginationType:"bootstrap",sDom:sDomm,sWrapper:"dataTables_wrapper form-inline",oLanguage:{sInfo:dataTables_sInfo},fnStateSave:function(t,n){localStorage.setItem("DataTables"+e,JSON.stringify(n))},fnStateLoad:function(t){return JSON.parse(localStorage.getItem("DataTables"+e))},oTableTools:{sSwfPath:n+"/"+JOMRES_ROOT_DIRECTORY+"/javascript/copy_cvs_xls_pdf.swf",aButtons:["copy",{sExtends:"csv",sCharSet:"utf8"},{sExtends:"xls",sCharSet:"utf16le"},{sExtends:"pdf",sCharSet:"utf8",sPdfOrientation:"landscape",sTitle:t},"print"]},oColVis:{aiExclude:[0],bRestore:false}}).fnSetFilteringDelay();jomresJquery.extend(jomresJquery.fn.dataTableExt.oStdClasses,{sSortAsc:"header headerSortDown",sSortDesc:"header headerSortUp",sSortable:"header"})}function dataTableSetHiddenColumns(e,t){var n=jomresJquery("#"+e).dataTable();var r=localStorage.getItem("toggleChanged_"+e);if(!r){jomresJquery.each(t,function(e){n.fnSetColumnVis(t[e],false,false)});localStorage.setItem("toggleChanged_"+e,true);ColVis.fnRebuild(n)}}function parse_ajax_returned_scripts(_source){var source=_source;var scripts=new Array;while(source.indexOf("<script")>-1||source.indexOf("</script")>-1){var s=source.indexOf("<script");var s_e=source.indexOf(">",s);var e=source.indexOf("</script",s);var e_e=source.indexOf(">",e);scripts.push(source.substring(s_e+1,e));source=source.substring(0,s)+source.substring(e_e+1)}for(var i=0;i<scripts.length;i++){try{eval(scripts[i])}catch(ex){}}jomresJquery(".jomres_bt_tooltip_features").tipsy({html:true,fade:true,gravity:"sw",delayOut:100});return source}function bind_data_toggle(){jomresJquery(function(){jomresJquery('[data-toggle="modal"]').click(function(e){random_identifier=jomresJquery(this).attr("random_identifier");property_uid=jomresJquery(this).attr("property_uid");if(property_uid!=undefined){property_name=jomresJquery(this).attr("property_name");loader="";jomresJquery("#module_"+random_identifier+"_popup").html(loader);e.preventDefault();jomresJquery.get(module_pop_ajax_url+property_uid,function(e){if(jomres_template_version="bootstrap3"){result='<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">x</button><h4>'+property_name+'</h4></div><div class="modal-body">'+e+"</div></div></div>"}else{result='<div class="modal-header"><button type="button" class="close" data-dismiss="modal">x</button><h4>'+property_name+'</h4></div><div class="modal-body">'+e+"</div>"}jomresJquery("#module_"+random_identifier+"_popup").html(result);jomresJquery(".jomres_bt_tooltip_features").tipsy({html:true,fade:true,gravity:"sw",delayOut:100})})}})})}function module_popup(e,t){var n=640;var r=520;if(screen.width<=960){var n=440;var r=320}else if(screen.width<=758){var n=340;var r=220}else if(screen.width<=524){var n=240;var r=120}jomresJquery("#module_"+e+"_popup").dialog({resizable:false,height:n,width:r,modal:true,resizable:true,open:function(){jomresJquery.get(module_pop_ajax_url+t,function(t){jomresJquery("#module_"+e+"_popup").html(t);jomresJquery(".jomres_bt_tooltip_features").tipsy({html:true,fade:true,gravity:"sw",delayOut:100})})}});jomresJquery(".ui-widget-overlay").live("click",function(){jomresJquery("#module_"+e+"_popup").dialog("close")})}function quick_info(e){var t="slide";var n={};jomresJquery("#effect"+e).toggle(t,n,500);jomresJquery("#effect"+e).removeClass("hide");return false}function isAvailable(e){var t=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate();var n=jomresJquery.inArray(t,bookedDays)==-1?[true]:[false];return n}function switch_editing_mode(e,t){var n=window.location.href;jomresJquery.get(e+"&task=switcheditingmode&switchmode="+t,function(e){window.location=n})}function switch_exchange_rate(e,t){var n=window.location.href;jomresJquery.get(e+"&task=switch_exchange_rate&currency_code="+t,function(e){window.location=n})}function generic_reload(e,t){var n=window.location.href;new_url=insertParam(n,e,t,true);window.location=new_url}function insertParam(e,t,n,r){if(e==null||e.length==0)e=document.location.href;var i=e.split("?");var s="";if(i.length>1){var o=i[1].split("&");for(var u=0;u<o.length;u++){var a=o[u].split("=");if(!(r&&a[0]==t)){if(s=="")s="?";else s+="&";s+=a[0]+"="+a[1]}}}if(s=="")s="?";else s+="&";s+=t+"="+n;return i[0]+s}function populateDiv(e,t){if(jomresJquery("#"+e).length>0){document.getElementById(e).innerHTML=t;jomresJquery(e).fadeIn(100)}}function jomres_isChecked(e){if(e==true){document.adminForm.boxchecked.value++}else{document.adminForm.boxchecked.value--}}function jomres_checkAll(n){var f=document.adminForm;var c=f.toggle.checked;var n2=0;for(i=0;i<n;i++){cb=eval("f.cb"+i);if(cb){cb.checked=c;n2++}}if(c){document.adminForm.boxchecked.value=n2}else{document.adminForm.boxchecked.value=0}}function jomres_submitbutton(e){document.adminForm.task.value=e;try{document.adminForm.onsubmit()}catch(t){}document.adminForm.submit()}function disableSubmitButton(e){if(typeof e.disabled!="undefined")e.disabled=true;else if(!e.buttonDisabled){e.oldValue=e.value;e.oldOnclick=e.onclick;e.value="DISABLED";e.onclick=cancelAction;e.buttonDisabled=true}document.getElementById("submitbutton").className=""}function enableSubmitButton(e){if(typeof e.disabled!="undefined")e.disabled=false;else if(e.buttonDisabled){e.value=e.oldValue;e.onclick=e.oldOnclick;e.buttonDisabled=false}}function fadeIn(e,t){if(document.getElementById){obj=document.getElementById(e);if(t<=100){setOpacity(obj,t);t+=8;window.setTimeout("fadeIn('"+e+"',"+t+")",100)}}}function setOpacity(e,t){t=t==100?99.999:t;e.style.filter="alpha(opacity:"+t+")";e.style.KHTMLOpacity=t/100;e.style.MozOpacity=t/100;e.style.opacity=t/100}function hidediv(e){jomresJquery("#"+e).slideUp()}function showdiv(e){jomresJquery("#"+elementName).slideDown()}function getResponse_particulars(e,t,n){var r=jomresJquery("#booking_form_property_uid").val();departureDate=jomresJquery("#"+n+"_XXX").val();HideRoomsList();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+r+"&arr_dep_date="+departureDate,{field:e,value:t},function(t){showRoomsList(t);show_log(e)})}function getResponse_guesttype(e,t){var n=jomresJquery("#booking_form_property_uid").val();HideRoomsList();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+n+"",{field:"guesttype",typeid:e,value:t},function(e){showRoomsList(e);show_log("guesttype")})}function getResponse_rooms(e,t){var n=jomresJquery("#booking_form_property_uid").val();HideRoomsList();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+n+"",{field:e,value:t},function(t){showRoomsList(t);show_log(e)})}function getResponse_multiroom_select(e,t){var n=jomresJquery("#booking_form_property_uid").val();HideRoomsList();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+n+"",{field:e,value:t},function(t){showRoomsList(t);show_log(e)})}function getResponse_extras(field,value,theId){var form_property_uid=jomresJquery("#booking_form_property_uid").val();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+form_property_uid+"",{field:field,value:value},function(data){eval(data);show_log(field);var ex_id="extras_"+theId;var extra_checked=jomresJquery("#"+ex_id).is(":checked");var combo=jomresJquery("#quantity"+theId).val();if(combo!=undefined){if(combo[0]){if(extra_checked==true){jomresJquery("#quantity"+theId).attr("disabled",false)}else{jomresJquery("#quantity"+theId).attr("disabled",true);jomresJquery("#quantity"+theId).val("1")}}}})}function getResponse_room_features(field,value,theId){var form_property_uid=jomresJquery("#booking_form_property_uid").val();HideRoomsList();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+form_property_uid+"",{field:field,value:value,theId:theId},function(data){showRoomsList(data);eval(data);show_log(field)})}function getResponse_override(field,value,theId){var form_property_uid=jomresJquery("#booking_form_property_uid").val();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+form_property_uid+"",{field:field,value:value,theId:theId},function(data){eval(data);show_log(field)})}function getResponse_extrasquantity(field,value,theId){var form_property_uid=jomresJquery("#booking_form_property_uid").val();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+form_property_uid+"",{field:field,value:value,theId:theId},function(data){eval(data);show_log(field)})}function getResponse(field,value){var form_property_uid=jomresJquery("#booking_form_property_uid").val();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+form_property_uid+"",{field:field,value:value},function(data){eval(data);show_log(field)})}function getResponse_existing(field,value){var form_property_uid=jomresJquery("#booking_form_property_uid").val();jomresJquery.get(ajaxurl+"&task=handlereq&property_uid_check="+form_property_uid+"",{field:field,value:value},function(data){eval(data)})}function getResponse_guest(){var form_property_uid=jomresJquery("#booking_form_property_uid").val();var firstname=jomresJquery("#firstname").val();var surname=jomresJquery("#surname").val();var house=jomresJquery("#house").val();var street=jomresJquery("#street").val();var town=jomresJquery("#town").val();var region=jomresJquery("#region").val();var postcode=jomresJquery("#postcode").val();var exists=document.ajaxform.country;if(exists!=null)var country=document.ajaxform.country[document.ajaxform.country.selectedIndex].value;var tel_landline=jomresJquery("#tel_landline").val();var tel_mobile=jomresJquery("#tel_mobile").val();var eemail=jomresJquery("#eemail").val();url=ajaxurl+"&task=handlereq&property_uid_check="+form_property_uid+"";result=checkaddressfields();if(result){var addressString=firstname+"~"+surname+"~"+house+"~"+street+"~"+town+"~"+region+"~"+postcode+"~"+country+"~"+tel_landline+"~"+tel_mobile+"~"+eemail;jomresJquery.get(url,{field:"addressstring",value:addressString},function(data){eval(data);show_log("addressstring")})}}function show_log(e){}function showRoomsList(req){eval(req);if(rooms_list_enabled)ShowRoomsList();if(jomresJquery("#noroomsselected").length)document.getElementById("noroomsselected").className=error_class;return false}function HideRoomsList(){jomresJquery("#roomsListWrapper").delay(800).hide("blind",{direction:"vertical"},1e3);return false}function ShowRoomsList(){jomresJquery("#roomsListWrapper").delay(800).show("blind",{direction:"vertical"},1e3);return false}function buildSelected(e){if(e!=undefined){if(e.length>0)populateDiv("selectedRooms",e)}}function buildAvailable(e){if(e!=undefined){if(e.length>0)populateDiv("availRooms",e)}}function checkSelectRoomMessage(e,t){if(!e){if(rooms_list_enabled){if(show_extras==true)jomresJquery("#extrascontainer").delay(800).fadeTo("slow",.1);if(t)jomresJquery("#bookingform_address").delay(800).fadeTo("slow",.1);jomresJquery("#bookingform_footer").delay(800).fadeTo("slow",.1);jomresJquery("#accommodation_container").delay(800).fadeTo("slow",.1)}}else{if(show_extras==true)jomresJquery("#extrascontainer").delay(800).fadeTo("slow",1);jomresJquery("#bookingform_address").delay(800).fadeTo("slow",1);jomresJquery("#bookingform_footer").delay(800).fadeTo("slow",1);jomresJquery("#accommodation_container").delay(800).fadeTo("slow",1)}}function ajaxADate(arrivalDate,dformat){var currentDepartureDateText=jomresJquery(document.ajaxform.departureDate).val();var currentDepartureDatesplit_dates=jomres_split_date(currentDepartureDateText,dformat);currentDepartureDateday=currentDepartureDatesplit_dates[0];currentDepartureDatemon=currentDepartureDatesplit_dates[1];currentDepartureDateyear=currentDepartureDatesplit_dates[2];var currentDepartureDated=new Date(currentDepartureDateyear,currentDepartureDatemon-1,currentDepartureDateday);var day=0;var mon=0;var year=0;var split_dates=jomres_split_date(arrivalDate,dformat);day=split_dates[0];mon=split_dates[1];year=split_dates[2];var d=new Date(year,mon-1,day);with(d)setDate(getDate()+mininterval);sday=String(d.getDate());smonth=String(d.getMonth()+1);if(sday.length==1)fday="0"+sday;else fday=sday;if(smonth.length==1)fmonth="0"+smonth;else fmonth=smonth;if(dformat=="%d/%m/%Y"){dd=fday+"/"+fmonth+"/"+String(d.getFullYear())}if(dformat=="%Y/%m/%d"){dd=String(d.getFullYear())+"/"+fmonth+"/"+fday}if(dformat=="%m/%d/%Y"){dd=fmonth+"/"+fday+"/"+String(d.getFullYear())}if(dformat=="%d-%m-%Y"){dd=fday+"-"+fmonth+"-"+String(d.getFullYear())}if(dformat=="%Y-%m-%d"){dd=String(d.getFullYear())+"-"+fmonth+"-"+fday}if(dformat=="%m-%d-%Y"){dd=fmonth+"-"+fday+"-"+String(d.getFullYear())}var one_day=1e3*60*60*24;var difference=Math.ceil((d.getTime()-currentDepartureDated.getTime())/one_day)+mininterval;if(difference>mininterval)document.ajaxform.departureDate.value=dd}function jomres_split_date(e,t){if(t=="%d/%m/%Y"){dateArray=e.split("/");day=dateArray[0];mon=dateArray[1];year=dateArray[2]}if(t=="%Y/%m/%d"){dateArray=e.split("/");day=dateArray[2];mon=dateArray[1];year=dateArray[0]}if(t=="%m/%d/%Y"){dateArray=e.split("/");day=dateArray[1];mon=dateArray[0];year=dateArray[2]}if(t=="%d-%m-%Y"){dateArray=e.split("-");day=dateArray[0];mon=dateArray[1];year=dateArray[2]}if(t=="%Y-%m-%d"){dateArray=e.split("-");day=dateArray[2];mon=dateArray[1];year=dateArray[0]}if(t=="%m-%d-%Y"){dateArray=e.split("-");day=dateArray[1];mon=dateArray[0];year=dateArray[2]}if(t=="%d.%m.%Y"){dateArray=e.split(".");day=dateArray[0];mon=dateArray[1];year=dateArray[2]}return[day,mon,year]}function checkaddressfields(){var e=jomresJquery.trim(jomresJquery("#firstname").val());var t=jomresJquery.trim(jomresJquery("#surname").val());var n=jomresJquery.trim(jomresJquery("#house").val());var r=jomresJquery.trim(jomresJquery("#street").val());var i=jomresJquery.trim(jomresJquery("#town").val());var s=jomresJquery.trim(jomresJquery("#postcode").val());var o=document.ajaxform.country;if(o!=null)var u=document.ajaxform.country[document.ajaxform.country.selectedIndex].value;var a=jomresJquery.trim(jomresJquery("#tel_landline").val());var f=jomresJquery.trim(jomresJquery("#tel_mobile").val());var l=jomresJquery.trim(jomresJquery("#eemail").val());setInputFillToOkColour("#firstname");setInputFillToOkColour("#surname");setInputFillToOkColour("#house");setInputFillToOkColour("#street");setInputFillToOkColour("#town");setInputFillToOkColour("#postcode");setInputFillToOkColour("#tel_landline");setInputFillToOkColour("#tel_mobile");setInputFillToOkColour("#eemail");jomresJquery("#region").closest(".control-group").addClass("success");jomresJquery("#country").closest(".control-group").addClass("success");var c=true;if(validation_firstname&&e.length==0){setInputFillToErrorColour("#firstname");c=false}if(validation_surname&&t.length==0){setInputFillToErrorColour("#surname");c=false}if(validation_houseno&&n.length==0){setInputFillToErrorColour("#house");c=false}if(validation_street&&r.length==0){setInputFillToErrorColour("#street");c=false}if(validation_town&&i.length==0){setInputFillToErrorColour("#town");c=false}if(validation_postcode&&s.length==0){setInputFillToErrorColour("#postcode");c=false}if(validation_country&&u.length==0){setInputFillToErrorColour("#country");c=false}if(validation_landline&&a.length==0){setInputFillToErrorColour("#tel_landline");c=false}if(validation_cellmobile&&f.length==0){setInputFillToErrorColour("#tel_mobile");c=false}if(validation_email&&l.length==0){setInputFillToErrorColour("#eemail");c=false}if(validation_email&&!echeck(l)){setInputFillToErrorColour("#eemail");c=false}if(!c){jomresJquery("div.recheckaddress").show();return false}else{enableSubmitButton(document.ajaxform.confirmbooking);return true}}function dobooking_validate(){if(checkaddressfields()){getResponse_guest();document.ajaxform.confirmbooking.disabled=true;setTimeout("submitBooking()",2e3)}}function submitBooking(){document.ajaxform.action=livesite;document.ajaxform.submit(document.ajaxform.confirmbooking.disabled=true)}function setInputFillToOkColour(e){jomresJquery(e).addClass(success_class)}function setInputFillToErrorColour(e){jomresJquery(e).addClass(error_class)}function submitenter(e,t){var n;if(window.event)n=window.event.keyCode;else if(t)n=t.which;else return true;if(!document.ajaxform.confirmbooking.disabled){if(n==13){document.ajaxform.submit();return false}else return true}else return true}function echeck(e){var t=e.length;var n="@";var r=".";var i=e.indexOf(n);var s=e.length;var o=e.indexOf(r);if(t==0){return false}if(e.indexOf(n)==-1){return false}if(e.indexOf(n)==-1||e.indexOf(n)==0||e.indexOf(n)==s){return false}if(e.indexOf(r)==-1||e.indexOf(r)==0||e.indexOf(r)==s){return false}if(e.indexOf(n,i+1)!=-1){return false}if(e.substring(i-1,i)==r||e.substring(i+1,i+2)==r){return false}if(e.indexOf(r,i+2)==-1){return false}if(e.indexOf(" ")!=-1){return false}return true}function createGraph(e,t,n,r,i){var s=new BAR_GRAPH(n);if(i.length==0)i="divGraph";s.legend=r;s.values=t;s.labels=e;s.showValues=2;s.barWidth=10;s.labelSize=12;s.absValuesSize=12;s.percValuesSize=12;s.graphPadding=5;s.graphBGColor="#E8EAEE";s.graphBorder="1px solid #913638";s.barColors="#913638";s.barBGColor="#F1F3F5";s.barBorder="2px outset white";s.labelColor="#FFFFFF";s.labelBGColor="#913638";s.labelBorder="2px groove white";s.absValuesColor="#000000";s.absValuesBGColor="#FFFFFF";s.absValuesBorder="2px groove white";document.getElementById(i).innerHTML=s.create()}if("undefined"!=typeof jQuery){var jomresJquery=jQuery.noConflict()}jomresJquery.ajaxSetup({cache:false});if(navigator.appName=="Microsoft Internet Explorer")window.onerror=Block_Error;jomresJquery(function(){jomresJquery(".jomres_bt_tooltip_features").tipsy({html:true,fade:true,gravity:jomresJquery.fn.tipsy.autoNS,delayOut:100})});jomresJquery.fn.fadeThenSlideToggle=function(e,t,n){if(this.is(":hidden")){return this.fadeIn()}else{return this.fadeOut()}};jomresJquery(function(){jomresJquery(".fg-button:not(.ui-state-disabled)").hover(function(){jomresJquery(this).addClass("ui-state-hover")},function(){jomresJquery(this).removeClass("ui-state-hover")}).mousedown(function(){jomresJquery(this).parents(".fg-buttonset-single:first").find(".fg-button.ui-state-active").removeClass("ui-state-active");if(jomresJquery(this).is(".ui-state-active.fg-button-toggleable, .fg-buttonset-multi .ui-state-active")){jomresJquery(this).removeClass("ui-state-active")}else{jomresJquery(this).addClass("ui-state-active")}}).mouseup(function(){if(!jomresJquery(this).is(".fg-button-toggleable, .fg-buttonset-single .fg-button,  .fg-buttonset-multi .fg-button")){jomresJquery(this).removeClass("ui-state-active")}})});