Jomres 5.5

Added a feature where an optional extra can be set to be automatically selected in the booking form.
Modified gmaps buttons to use new style ui.
Modified edit property functionality to allow users to scroll around a gmap and drag a pointer to set their lat and long. If lat is not set, then Jomres will query google to get a rough approximation of their location to get the ball rolling.
Implemented a feature to configure the property type order as it appears in the property type selection dropdown.
Added a delete multiple black bookings feature to Jomres, will require the v5.5 version of the black bookings plugin.
Added balance after deposit paid row to booking form price summary panel.

Renamed Kenya shilling.
Swapped a global call to $mainframe =& JFactory::getApplication(); to generate pathways.
Modified pathway code to be called in 1.6/1.7
Renamed extras tax to services tax in English lang files.
Added Joseph's suggestion for finding the correct item id to J1.7 specific code. Many thanks.
Added a back to property details button to the booking form page if the form's in the modal popup.
Modified how the wysiwyg editor is called. Bally thing works now!
Modified how the reg prop 2 page is rendered to allow wysiwyg editor if enabled.
Small modification from $langs'pt'='pt-BR'; to $langs'br'='pt-BR';
Small tweak to ensure that the discount shown is output inclusive of vat where appropriate.
Commented out spinner code in bottom.html as I'm getting sick of seeing it now. You can restore it if you wish, by un-commenting the appropriate lines.
Small change to list properties to add the max guests from the tariffs to the property deets (eg the output) array.
Modified the new property module utility function to include the lang files if they haven't already been included.
Added a check for joomla1.7 so that Jomres will show sh404sef config options for both J1.5 and J1.7.
Added changes to the old Jomres sh404sef plugin as contributed by Joseph. 
Slightly larger panel image uploaded.


Jomres 5.4.1

Added z-index to the totals panel slider.
Removed span class from the output_price function as it was creating issues when saving bookings.

Jomres 5.4

The booking form has been rebuilt with a view to UI improvements.
Added a new sliding panel that scrolls with the user through the booking form, containing the totals, including new output of the room totals inc and excl tax.
The booking form, if not showen in the property details page, will now open up in a modal popup, allowing us much more space to present to the user the booking form without overwhelming them (the areas behind are hidden). This can be disabled in Site Config.
New Site config tab that holds booking form relevant options (some new, some moved from the Misc tab).
Added a button to enable re-opening the booking form in the event that it (the modal panel) was closed.

Added new functionality to auto-detect a user's location based on their IP number, and use that setting to automatically set the currency code and the currency code dropdown.
Re-organised the Site Config to make a little more sense, moved some elements out from the Misc tab into their own tabs.
Re-organised the country code dropdown to make it alphabetical

Register property and countries scripts modified to rename the "country" tag to xyz (I was bored and couldn't think of anything else) to prevent other module's "country" inputs from interfering with the country selection when a new country is chosen.
Changed the memory limit in admin.php to prevent issues with large numbers of Jintour tours causing out of memory errors.
Added a line to jomres_decode that'll strip ascii line seperators from text, as this can break javascript.
A couple of changes to encourage Jomres to pick up the appropriate language file when the ptype is set in a search option.

Small change to css and list properties template to ensure that the property name is shown in white, therefore it works well with the jquery ui headers.
Small modification to change what we measure in the psuedocron backend functionality to prevent duplicate jobs from showing.
Minor tweak to database class to correctly log the source of a db query's calling script.
Added improved code for filtering out mootools (?) added function names to json returned data. Again, thanks David.
Added a missing div to bookguestout.html
Modified the return url in the save subscriber script to ensure that when a user chooses to not subscribe, they're sent to the correct page when SEF is enabled.
Modified the booking data archive script to not include "bookings" that don't have a property uid set.
Small change to prevent older Advanced weekly prices setting impacting prices once the manager's changed to micromanage mode.
Removed a reference to the tariff description, which was only ever intended for reception use, from the verbose tariff output that shows on the property details page.
Modified scripts so that translated tariffs that are created under micromanage mode can be shown in the property details.
Modified how the remainder to pay is figured out in the edit booking page to ensure that we're using the most appropriate method.

Modified list properties and router.php to allow router.php to use existing property names found by the basic property details class, means fewer queries are performed when pulling property names for url generation.
Modified list properties and discounts minicomponents to reduce the number of queries performed, and modified the template to show :- only if review data included.
Modified the getPropertyAddressForPrint function to use the basic_property_details data wherever possible.
Optimised the taxrates_getalltaxrates function to only perform the query once by storing the results in showtime.
Optimised the property type name finding functionality of list properties.
Optimised the custom field handler to make fewer queries.


Jomres 5.3


Added Joomla 1.7 compatability to Jomres.

Adding exit; after the redirection's been done to see if that fixes http://www.jomres.net/index.php?option=com_kunena&func=view&catid=10&id=1239&Itemid=290#8837
Added a change to the chained select javascript to exclude mootools keys that are somehow being inserted into the "data" json object when the list of regions/towns is being returned.
Deleted the old wordpress files, I'm never going to finish the job, might as well bin it.
Removed offsetParent: \'body\', from the tooltip javascript in jomres_tooltips.class.php. Doesn't seem to impact jomres on j1.5, but in j1.7 it causes the tooltip to display incorrectly, presumably due to something in j1.7's default css.


Jomres 5.2.1

Added a feature that by default filters out non-active guests from the guest list. A dropdown allows the manager to view all guests if required.
Changed name of id in selectCombo's town dropdown as it was preventing the booking form from validating.
Fixed issue where combo searching on properties with apostrophe's in town/region might not work. Good find Aladar.
Fix for module xml files not being installed so module configuration parameters were not being shown.
Modified (again) our redirect function.
Modified the router to reduce the number of queries it generates, brought my test installation when viewing property details down from circa 400 to 70.
Modified publish guest type script, stops it from throwing an error even if the publish activity worked fine.
Resized the ajax activity div to make it look better in IE (losing the scroll bars).
Modified how guest price variations are taken into account. If the variance is not a percentage then we'll determine the nett value of the variance before adjusting the rate per night.
Modified the new searchCombo to include the 'all' option.

Jomres 5.2stable 

Small change to allow bookings with shorter periods in fixed period bookings.
Modified the register property 2 template to include lat/long details. Will need the appropriate register property version to work.
Removed ex tax figuring from calcExtras's third party extras handling. As extras are already assumed to be ex tax before the price is output, this means that 1. the extras are all output in the same way and 2. the invoice now makes sense for third party extras.
Added a new utility function intended for a new set of modules are in the works.
Tweaked the output_price function to optionally disable conversion output (might be used elsewhere).
Modified the frontend invoice template to make it fit better on the page.
Fixed a bug introduced in v5 where third party plug-in modules could no longer be installed. Removed a reference to old "component installer" code that's never been used (since at least v3-ish).

Jomres 5.2rc1

Small modification to the output_price function to ensure that if the foreign currency code isn't set, to not attempt a conversion.
As our new jomresJquery code has broken the old, ugly jquery combo plugin, we've replaced that old functionality with a newer, nicer jquery combo plugin.
Modified the guest confirmation email to use output_price
Added initial total inc vat column to printable invoice's template.
Fixed a bug where there were some missing td's in the Guest's toolbar.
Removed an old reference to index2.php in the clickatell settings template.
Added an option to disable javascript packing in site config, because on some servers the packer script doesn't appear to run correctly. By default, the packing feature is off, it needs to be enabled in site config for it to kick in.
Added ignore user abort functionality, once the exchange rate update has started, we want to finish the job. (exchange rate updating functionality).
Added a cron job for triggering exchange rate updating.
Moved the call to the chain select jquery plugin from j00030search.class.php into the init_javascript function in funtions.php.
Removed an obsolete javascript file.

Jomres 5.2beta2

Significant changes to all Jomres code to try to resolve javascript conflict issues with modules, templates and plugins that also use jQuery. Whilst strictly speaking this isn't a bug in Jomres (rather, it's people not being aware that different plugins all using the same type of library will cause a conflict), this change should, nevertheless (hopefully) overcome those problems. Initial tests are very encouraging. 
Found and fixed an issue where the optimisation cronjob wasn't triggering correctly.
Small modification to php mailer class to prevent echoing of email addresses that failed.
Added a check for error code 6 in the image uploading class to indicate that a temp dir doesn't exist (or isn't writable).
Exchange rate conversion selector removed from top.html, instead it is now available as a plugin that can be included by asamodule.


Jomres 5.2beta1

A large number of changes to add fully automatic exchange rate downloading (daily) and conversion features that will allow us to convert prices on the fly for all properties who are using a currency code that can be converted. As the download is done daily, the first time the page is visited after this code is added may take a while to resolve as your Jomres installation needs to talk to the remote exchange rate server. After that's done however the data is stored locally and is retrieved very quickly.

Undid a change in the last version that disables busy dates in the departure date of the booking form, as this was a mistake. Leaving this change in would mean that a booker cannot set a disabled date as their departure date, even though this would be perfectly valid.
Reset a flag that prevents emails from being sent during testing, which was accidentaly left in situ after some code improvements.
Modified the infoimage feature of the tooltip function to use a new css class that makes the tooltip content area wider.
Fixed a bug where per person per night optional extras weren't displaying correctly in the booking confirmation page.
Removed excanvas.js from obsolete file handling class. Not sure why it's marked as obsolete. It's not.
Added an updated version of de-DE.php, many thanks Alexander. 

Jomres 5.1

A good deal of changes to the Javascript file handling. Jomres now uses a lot of javascript files, which raises the issue of network speed as the user needs to d/l a number of files to use the site. We would like to implement some kind of javascript compression facility within the system so that we can reduce this number of files. 
Firstly, to do that we've needed to ditch the minified/compressed files we're currently offering. Because of the way different compression technologies work, you cannot successfully combine all of the different compressed/minified files into one file as for some reason this doesn't work, so the first thing we needed to do replace our files with the fullsize versions of the same files. This is good, because it makes it easier for site designers to modify those javascript files to suit their own requirements, however it's bad because the combined javascript file is > 1/2mb in size. Currently, all of the different methods we've tried to compress this file in size haven't worked. 
So, Step 1, combine most files (except the jquery core file) - complete. Step 2, compress the combined file - work in progress.
Implemented a javascript packing library to minify and concatenate some of the Jomres javascript files. Some can't be compressed because of how they're written, but most can.

Modified how the confirmation form printable link is constructed, allows managers to use editing mode in the printable form to customise the confirmation letter.
Improved the extras output in the booking form and confirmation pages to calculate the total prices in showconfirmation of each selected extra, and to show the model's text in showconfirmation and the booking form
Slight modification of booking engine to note that there aren't any free rooms on a given date. Normally, if all rooms for a given date are booked, then the javascript calendar popup will disable a date, however if all rooms become booked whilst a user's in the booking form then they'll see the "select a room" message whilst there are no longer rooms available. This modification should change that message. It's an edge case scenario, but it's covered.
Slight modification of archive audit to not log the audit action in the audit trail. Was creating some issues of it's own.
Modified the booking engine, added autocomplete off for the arrival/departure dates, as firefox was causing inconsistent results, and removed a recent addition that was preventing the No rooms available from showing up when rooms were available.
Small modification to how searches are performed for room type searches, if filter = % then just re-use the last set of search results.
Modified the save invoice feature to set the init total to 0 if the invoice has been marked as paid in the administrator area.
More changes to invoice handling in the backend, corrected code to show the correct balance in list invoices and edit invoice, when the invoice is marked as paid. You can no longer mark an invoice as pending once it's been marked as paid. Want to implement paging soon, so there's definitely more work to be done on this as yet.
Modified how the property switch redirect's url is created, prevents the cycling issue that some folks have been experiencing.
Removed a stray vardump that was left in after the last changeset referring to invoice total changes.
Improved new functionality that reports that there are no vacancies to only trigger on certain parameter changes.
Modified a little used function to use translated guest type titles.
Modified booking engine to disable fully booked dates in both the arrival and departure dates (the Javascript calendars).
Found an issue where cron jobs were becoming locked then not unlocking, thereby taking them out of action for good. Also re-added the old optimise minicomponent.
Modified how dobooking finds the default departure date.
Added a change to showconfirmation to try to resolve issues where safari's creating new sessions when in the booking form. We're now saving guest address details to the temp booking object when showconfirmation's triggered. As a happy accident, debugging this has resulted in a slightly nicer booking form (it recognises the enter button).
Modified confirmation handling so that on amend contract, the special requirements are re-added to the text field in the confirmation page.
A variety of changes to add the total inc tax column to the line items table and it's output.
Modified and simplified grand total figuring in invoices.
Added code to translate tariff name/desc in confirmation emails.
Commented out an IF statement that was preventing countries with no regions from showing up as a search option.
Added a change that seems to fix the "search by location combo" dropdowns causing other dropdowns to not show correctly.
Commented out width and height settings from the imageonly tooltip popup. I left this in place when I created the thumbnail functionality to provide backward compatability with older installations of Jomres. That was some months ago now, and we're regularly getting questions on how to remove this code from newer uses so I think that the older users will just have to bite the bullet now and upload new images if they haven't already.
Further changes to post-booking emails to ensure that tariff names are translated correctly.
Added a mechanism to listproperties to allow a plugin to offer a "prices from" figure. The newest version of Jintour supports this new feature.
Fixed a small bug where the unpublished message was wrong when a property is unpublished.
Removed a redundant "edit creditcard" link that's no longer usable.
Modified the add plugin functionality to ensure that we clear out both the /remote_plugins/plugin_name and core-plugins/plugin_name directories. If we don't and somebody upgrades from an older version of a plugin, we'll get an error in Jomres/Jomres plugin manager.
small change to ensure that the url is passed through the jomres_decode function so extraneous slashes and other html special chars are decoded before the url's used.
Modified the class that sets up the booking form page, removed part of an if statement that ensures that the SRP calendar is shown if fixed period bookings are enabled. Don't understand why it's there, and doesn't make any sense to leave it in-situ. Seems that it was added in v3 and my records don't go back that far.
Added a couple of options to the viewproperty array in aid of third party developers.
Modified the confirmation letter script to use medium thumbnails where available.

Updated French and Portuguese language files, many thanks Mario!
Added an updated version of es-ES.php to the core code, many thanks Juan Antonio.

Jomres 5stable

Minor tweak to installer to stop it reporting that it's creating the extra services table if it already exists.
Tweaked queries that pull tariff and room booking information from db when setting up the booking object.
Removed height: 1000px; from viewproperty left col in css file as it should no longer be appropriate.
Added j00509form.class.php to obsolete files class.
Added old gateway templates and images to obsolete files list.
Modified the updater to no longer check the license key.
Removed old creditcard storage mechanism.
Modified dobooking to remove some html and added that missing html to the dobooking templates.

Jomres 5beta1

Removed a lot of files which have now been added as plugins, removed some remaining 'form' plugin files and created a new core-plugins folder.
Modified installer to put core Jomres plugins into the core-plugins directory, instead of remote_plugins.
Added some code to remove anti-xss code inserted by the input filter when adding a new plugin.
Modified code that removes plugins to take into account the new core-plugins directory.
Added a new booking form to be used by non-room based properties (eg. jintour would use this template instead of the one it carries natively).
Applied some tweaks to the booking forms to improve layout etc, thx Aladar.
Reworded the optional extras selection header to make it more generic.
Small tweak to booking form font size, and a modification to show the services total in the booking form (bug fix).
Disabled output filtering, causing site slowdowns and not massively necessary.
Added a warning to the plugin manager to not install all plugins when first starting out.
Modified the prep search by price ranges code to use only prices from published properties.
Modified list properties to not show paging if called via ajax, and filter properties to not output the sort order dropdown for same. For ajax generated property lists we'll need to find some other way to sort the search results as the two above are not suitable for this scenario.
Modified plugin manager to highlight main system plugins.
Modified property list dashboard element to not show anything if the user's a receptionist.

Jomres 4.7.8

New number images contributed for use in the booking form, kindly donated by Eleanor. Thanks very much! Booking form templates improved to use them better.
Small change to jomres.js so that fading out feature only kicks in if the room booking functionality is used by the property (ie, so that the address/extras stuff isn't faded out for a jintour property.
Fixed issue reported by Duxiana in new coupon functionality, guest dropdown list shows firstname/firstname, not firstname/surname in the edit coupon page.
Corrected the installer, one of the 'add column' parts for the new coupon functionality didn't have it's corresponding insertion code.
Added a check for property uid = 0 in coupon functionality giving us the ability to have system-wide coupons in the future.

Jomres 4.7.8beta1

Added functionality so that coupons can only be valid for certain dates, as well as only used within certain periods, and a coupon can be assigned only to a specific guest.
Some users are having problems because they've edited files for Jomres and forgetting (or not knowing) that the files should be saved "without BOM" (byte order mark). These changes will allow us to attempt to remove the BOM from all areas of the output that's returned by the server to the client browser, hopefully thereby fixing issues some folks have had with the Show Profiles feature.
Added an option to not include the jomres jquery ui css file in the head of the template.

Small fix added to css to stop date picker's empty div from showing on the bottom left of the page on some templates.
Added a missing closing div to edit_room.html
A couple of changes to stop the block IE error code from showing above the page's body, instead added it to jomres.js.
Added charset to info sent to paypal
Modified regprop step one to use jrConfig limit_property_country_country (the setting in Site Config when managers can set the default country) to set a new property's country.
Added a few "if not exists" to the installer.
Some CSS changes to make Jomres blend better with our own joomla template.
Added a few missing settings to jomres_config.php, these will then update the site setting's 0 profiles when the user next uses the install_jomres.php script when they upgrade.
Cleaned a lot of files with trailing spaces in them, could be the cause of some servers being unable to use the manager choose functionality.
Upgraded html purifier to 4.3.0, instead of the older, obsolete 4.0. 
Modified the delete room script only trigger an error if there are future bookings for a room.
Applying a potential fix to the "looping on change property" issue.
Found a way to allow a property manager to switch to a different property without having the manager's toolbars popup mid-redirect.
Added an option to the generate date input function that allows us to tell the function to show historic dates in the calendar.



=======
New number images contributed for use in the booking form, kindly donated by Eleanor. Thanks very much! Booking form templates improved to use them better.
Small change to jomres.js so that fading out feature only kicks in if the room booking functionality is used by the property (ie, so that the address/extras stuff isn't faded out for a jintour property.
Fixed issue reported by Duxiana in new coupon functionality, guest dropdown list shows firstname/firstname, not firstname/surname in the edit coupon page.
Corrected the installer, one of the 'add column' parts for the new coupon functionality didn't have it's corresponding insertion code.
Added a check for property uid = 0 in coupon functionality giving us the ability to have system-wide coupons in the future.

Jomres 4.7.8beta1

Added functionality so that coupons can only be valid for certain dates, as well as only used within certain periods, and a coupon can be assigned only to a specific guest.
Some users are having problems because they've edited files for Jomres and forgetting (or not knowing) that the files should be saved "without BOM" (byte order mark). These changes will allow us to attempt to remove the BOM from all areas of the output that's returned by the server to the client browser, hopefully thereby fixing issues some folks have had with the Show Profiles feature.
Added an option to not include the jomres jquery ui css file in the head of the template.

Small fix added to css to stop date picker's empty div from showing on the bottom left of the page on some templates.
Added a missing closing div to edit_room.html
A couple of changes to stop the block IE error code from showing above the page's body, instead added it to jomres.js.
Added charset to info sent to paypal
Modified regprop step one to use jrConfig limit_property_country_country (the setting in Site Config when managers can set the default country) to set a new property's country.
Added a few "if not exists" to the installer.
Some CSS changes to make Jomres blend better with our own joomla template.
Added a few missing settings to jomres_config.php, these will then update the site setting's 0 profiles when the user next uses the install_jomres.php script when they upgrade.
Cleaned a lot of files with trailing spaces in them, could be the cause of some servers being unable to use the manager choose functionality.
Upgraded html purifier to 4.3.0, instead of the older, obsolete 4.0. 
Modified the delete room script only trigger an error if there are future bookings for a room.
Applying a potential fix to the "looping on change property" issue.
Found a way to allow a property manager to switch to a different property without having the manager's toolbars popup mid-redirect.
Added an option to the generate date input function that allows us to tell the function to show historic dates in the calendar.



>>>>>>> .r1408
Jomres 4.7.7 06/04/2011

A small change to prevent properties with 0 tariffs from showing the prices.
minor template changes, mainly, to prevent the toolbar from rendering when saving something.
Change to resolve issues with IE and redirection functionality.
Fixed an issue caused by upgrading jquery to 1.5.1. when trying to edit rates with the calendars in Micromanage.
Change to how jomSearch class is called. Should mean that devs can override the class if needed. Uses jr_import now.
Added some definitions for ajax urls that I intend to add in the future to the rest of the system.
Some changes to how the http protocol is manipulated. In short, removed the manipulation as we're no longer offering the "ssl in the booking form" switch.
A tweak to see if we can resolve the browser moving the viewing area to the top of the page when we click on a tab.
Added jquery ui 1.8.11 to jomres
Added an option to site config -> search options tab to allow a property manager to choose how the search by guest numbers search feature should work.
It would appear that over the years the "registered users only can book online" option has been neglected as the system has evolved, meaning that non-registered users are seeing the dobooking links. Fixed to work again.
Added language definitions to paypal redirect script and Edit Labels area.
Added a couple of contributions from Marco regarding translation of custom field names in the hotel and guest emails.
Modified edit profile so that check all selector selects all checkboxes.

Jomres 4.7.6.1 30/03/2011

Updated language files with new definitions (forgot to add them to the 4.7.6 release. Silly moi).

Jomres 4.7.6 29/03/2011

Added new feature to output prices and periods so that they can be customised to be by night/week/month.
modified the booking forms a little to fade out panels until a room has been selected (mrp) or a valid tariff found (srp).
Some markup fixes.
Fix a few stray apostrophes in the search combo dropdowns.
Added animation when ajax kicks in.
PHP mailer exception class renamed to prevent naming clashes.
Added jquery 1.5.1 to svn and Jomres. Won't remove old version until the version after this, which will give us time to ensure that functionality works as expected.
Small change to make sure the toolbar isn't rendered when deleting a property. 
modified the sh404sef plugin to correctly determine the 'task' so that it runs correctly.
New change to generate the booking number when the user passes the process payment point, instead of the insert booking point. This is for developers who need to pass the booking number to remote gateways.
Improved archive audit trail functionality to only archive 1000 records at a time, and run far fewer queries.
Improved layout of config panels in frontend.
A variety of UI tweaks to improve page consistency for property managers.


Jomres 4.7.5 15/03/2011

Fixed a bug where `tax_rate_val` wasn't added on first install therefore adding new service charges to existing bills wouldn't work unless the installer'd been used to upgrade the db.
A small change to fix the type of commission rate in the administrator area view property page.
Modified a file to prevent the 'form' gateway from appearing in the gateways list in the property configuration page. We want to discourage users from using this gateway as it involves entering creditcard details on a joomla based server, whereas in fact they should be using a full payment gateway that is PCI compliant.
Fixed a bug introduced by a new change which prevented currency formats being shown in the tariffs and currencies tab of property config.
Small change to ensure that the booking form property config option Show max guests per booking affects the room type dropdown list in the booking form, as well as the 'classic' list.
Removed some old references to popup in the slideshow and view rooms urls in property details.
Added a check for the php version when installing.
Added search by price range text to touch template functionality.
Added code to enable switching off of jquery ui.
Edited the frontend list propertys (that a manager sees if they're not a super manager) to work with the jquery ui classes.
Added jomres_decode to the listyourproperties script.
Some changes to bring manager's page's css into line with the rest of the jquery ui usage on the system.
A few changes to stop the language switching back to English for no good reason in the administrator area, and changed some country name editing mode functions to ensure that the constant uses the country code, not the country name.
Some changes to the Jomres installer to resolve issues where users are having to use the discover feature to install Jomres.
Added bulgarian to Jomres lang library. Many thanks Hristo Yanev
Updated frontend list invoices to look better on the page.
Modified the booking engine to show a 3 month picker in the arrival date, and to allow the booker to choose historic dates if we're amending a booking.
Modified amend booking functionality to force the rooms list to switch back to the 'classic' room selection style if we're amending a booking.
Added feature to automatically create an index.html in the remote_plugins dir once a plugin is added.

Jomres 4.7.4 24/02/2011

Change to normal editing mode, separates non-srp or srp only room types from room type list.
Some changes to resolve couple of issues where sanitised apostrophes are not decoded for before they're output.
Modified a j1.6 specific function to correctly identify if we're in the administrator area.
Fixed a bug where realestate properties in the property list were giving the booking link, not the contact owner link.
Added a flag to the showtime variable to identify jomres as a heavyweight system ( > 200 properties ). If so, then we won't try to translate property names in the super manager's dropdown.
Added a check for minimum_interval, if it's not set to > 0 we'll set it to 1. If it's left out, the booking form will fail with a js error so this should prevent that from happening.
Added new functionality to administrator list properties that allows a user to list properties by property initials.
Fixed a naughty little bug where if a site doesn't have any global custom code (from the Touch Templates/Label editing feature) then Jomres can't merge the global and property specific code, meaning that the custom code isn't correctly found by the custom_text class.
Added XPF to currency codes.
added html5 input types for emails in booking forms and contact owner.
Tracked down an illusive bug that was causing languages to be reset to en-GB when touch templates/label editing was used, causing translations to not work for any lang other than English.
Undid some ssl booking form specific settings. With Joomla's sef url functionality it's become impossible to get urls working properly so that Jomres can rewrite http:// to https://. From now on, it looks like we'll need to disable the ssl in the booking form functionality.
Further improvements for decoding urls before they're displayed, and improved urls when generated by router.php
Fixed a bug where currency formats weren't being found correctly in list properties.
added some code to allow the property selection feature to redirect calls even when there are ' in the property's name.
Added a hidden option to put buttons for room selections back into the booking form.




Jomres 4.7.3 07/02/2011

Added simplified site config settings option.
Found a bug in new code that deals with property configuration. If this is a new installation, and the property's config as not been changed, then a property's default mrConfig will be NULL. This is not desirable when the default config and property config arrays are merged (sets the property's mrConfig to NULL) so new code has been added that converts the property's temp config to an array if NULL, and then the merging goes ahead ok.
Renamed our example guest to somebody a little more in keeping with the Fawlty Towers ethos.
Added more icons for different room/resource types, added code to installer to create new resource types on first installation. Updated vehicle and yacht brokerage lang files.


Jomres 4.7.2 02/02/2011

Fixed a bug in a new function that prevented the booking form from showing.

Added the ability for the site administrator to choose a site's language context, in other words they can choose to use a Car hire/Yacht Brokerage language file instead of the default Hotel type language file. This does not override a property's language file as defined by it's type.
Added a new propertyrental subfolder to languages dir, all existing language files copied to dir to maintain the existing property relevant text. English lang files in /jomres/languages will be edited to be more relevant to units/objects/businesses, instead of simply related to hotels.
Renamed a language directory sub directory name in property types in installer.


Jomres 4.7.1 02/02/2011

Modified show reviews to html entity decode to allow ' to show properly.
Modified minicomponent handling and database class to log which minicomponents are making db queries.
Improved tracing in db class.
Modified custom_text.class.php to actually work as a singleton
Modified list properties to not figure review functionality if reviews are disabed in the administrator's config.
Modified property list so that Contact owner link is shown as a button.
Small change to prevent editingmode and other dropdowns from appearing if popup set to yes (eg, when showing a printable invoice).
Removed some redundant echos from deleteguest.
Some changes to improve ssl handling.
Fixed an odd bug where the departure date for a new black booking wasn't showing the calendar icon. Caused by microtime reporting exactly the same when the the function was called at two different times. Replaced the unique id generating functionality with Jomres' random string generator instead.
Modified basic property details and other functionality to optimise how basic property details are found. When the jr_user is set up, we'll do a bulk query to find property names that'll be added to the property name dropdown box. The older method would generate a lot of queries, this and future optimisations will reduce the number of queries performed to find basic data of the user's properties.
Modified custom text class to do one query instead of umpteen to find custom text strings.
Performance enhancements added by preloading some data.
Added new options to define the sizes of small and medium thumbnails. Small are for the property list, whereas medium are for the property header.
Renamed Touch Templates to Label Translations
Added a new browser detection class to Jomres and removed the older method. Reduces the chance of colliding with another component who's name escapes me now. swfreemenu?


Added functionality that allows a site manager to enable commission handling. When this is enabled, the property manager can see their commission invoices (these are no longer viewable by the property manager's normal list invoices page). Added feature to use the invoice cron to suspend managers who's accounts have not been paid after their due date + "threashold" have expired. 
Modified php mailer to no longer echo errors on error. 
2 new functions that return all super property managers, and all suspended managers.
New ROI tab added to Site Configuration area. Enable subscription and commission handling moved to this tab, along with comission settings features.


Jomres 4.7.0 11/1/2011

Various changes to enable Joomla 1.6 installation.
Found and fixed a security issue where a manager of property A can modify the user details of a user on property B (where the manager has no rights to edit that user's details).

Small change to save room script to ensure that the passed variable is cast as a float by the filtering function.
Small change to stop jomres from including an obsolete js file.
Disabled old gateway log marking the property uid number.
Modified booking insert functionality to not check for rooms already booked if not using room booking functionality of the system.
Small change to ensure that if micromanage is used, then the showtariffsasweekly setting isn't used. (IE to say that prices are per week) list properties and show tariffs scripts.
Found an errant jquery uiblock call in jomres.js. Removed.
Modified get property name function to use newer singleton functionality.



Jomres 4.6.1 6/1/2011

Added a clause to remove <x> from page titles (it remains in the page source).
Modified new functionality so that if a property doesn't use rooms in the booking form, to simply set the departuredate to the next day (dependant on the minimum interval) internally.
Modified invoice creation functionality to only mark an invoice paid on creation if the depositpaidsuccessfully flag is set to Yes and the init_total of the invoice = $deposit_required.
Extended new arrival/departure date functionality to take into account those properties who're configured to not show the departure date in the booking form.
Modified edit property script to html entity decode strings before they're displayed during editing.
Some minor changes to html_entity_decode town/region links in the property list.
Small change to take into account capitalised usernames in grant access function.
Added experimental rounding to try to ensure that rounding is performed correctly.
Modification to display booking script to not add tax if the prices are inclusive.
Modified configuration functionality to allow managers to enable slideshows in property details, and stopped configuration from switching to property admin on Save.
Removed redundant "don't use both tax configuration option settings" message from tariffs and currencies.
Modified property details handling functionality, now tabs are added via minicomponents, makes it much easier for third party developers to add new tabs easily.
Added some effects to the rooms list hiding/showing javascript. Finally got rid of interface.js, which has been with us for about 4 years but is no longer required. Booking form template updated.
Modified the booking engine so that room buttons are now better styled with Jquery ui (whole button is clickable, not just the link)
Removed jquery.blockUI.js and it's associated functionality from jomres.js. This was what would block parts of the interface from interference while the booking form's ajax functionality was running. Waaay back when web2 was new this was useful, however now ajax is common, we have faster servers, internet connections, pcs and javascript libraries and it's no longer necessary. In it's day it was great, but now I'm sick of looking at it. 
Removed jquery-1.4.2.min.js from our javascript library
Upgraded booking form and confirmation pages with jquery buttons.
Applies the fix suggested by Marc, thanks. http://www.jomres.net/index.php?option=com_kunena&func=view&catid=10&id=2537&Itemid=290
Further small changes to links in property details and list properties to make the buttons work like buttons. Modified booking form so that it uses the jquery highlight and error classes.
Commented out input error/highlight options in property config as we're now using jquery highlights. Also removed the minicolour picker as that's no longer required, and disabled the 'edit icon size' options as it's redundant.
Less is more.
Fixed an issue with touch templates where the constant's which include the word "script" is being inserted into the custom text table with <x> inserted.
Small change to prevent realestate properties for showing a book now link (duh)
Modified extra services functionality to include the tax rate at the time that it's entered. This allows us to calculate the resulting total in the edit booking page.
Added Street, Town and Postcode to translatable fields in Edit Property details page.
Added option to disable jquery inclusion in the frontend.
Removed some code from booking engine that was causing micromanage tariff calculations to use the 'charges stored weekly' setting, even though it's redundant in Micromanage tariff editing.
A variety of changes to remove redundant code, and remove styles from the code in the property list, property details and property header.
Changed Save Coupon link to a button in the booking form.
Added two new js variables to the booking form for highlight and error, removes need to define the jquery ui's highlight and error classes in the code in handlereq.php
removed ui error css from booking engine by applying the error_class through js after the rooms list is regenerated.
Modified admin notes to remove redundant thumbnail setting, and advise the size of thumbnails. Added note to max upload input to show php's max file upload limit.
Modified list properties display reviews functionality to open in a dialog popup.


Jomres 4.6.0.1 15/12/2010

Modified Jomres to ensure that a room booking isn't created when a property is a jintour property
Modified micromanage output, removed min and max rooms already selected output if the property is an SRP
Improved booking engine by passing the departure date along with the arrival date via ajax when the arrival date is changed.


Jomres 4.6.0 stable 13/12/2010

Some additional changes to improve new functionality that allows us to set some dates in a micromanage tariff to zero. This new code filters tariffs out if the tariff is zero within certain dates. Gives us dynamic minimum intervals.

Modified contact owner script to ensure that it uses the correct language strings.
Small change to stop manager's toolbar from popping up unnecessarily when amending a booking.
Improved amend booking functionality to include line items when a booking is modified.
Added an extra space because "prices from" in the property list in english runs up against the price itself.
Swapped labels around, house number was showing under street and vikki versa in guest details template.
Small change to list user's invoices so that template is still shown if the list is empty.
Modified show tariffs to not show a tariff if the price is zero.
fixed amend booking so that number of guests in the party shows up in the top advisory when amending a booking.
Added forgot password functionality to Jomres SA.
Fixed small bug where global currency code wasn't used when generating the link to xe.com for currency conversion. Ty Aladar.
Modified the method of detecting the absolute path. Looks like some servers have changed what $_SERVER SCRIPT_NAME reports, borking our older method of figuring out the path. This change adds a check for SCRIPT_FILENAME instead and uses that if available. Need to monitor this change.
Fixed a missing close table in the hotel confirmation email template.
Added trashcache code to savecustomertypes minicomponent. 
Added new functionality to delete a partner from the partner's list.
Fixed a minor bug where the super property manager's image wasn't showing as a ninja in show profiles.
Fixed showconfirmation to ensure that extra names are translated.
Added the old backend addproperty script to the obsolete file handling list.
Replaced overzealous filtering in editinplace with simpler sanitization to discern the name of the constant being edited.


Jomres 4.6beta1 23/11/2010

Modified how dates date range array is calculated in blackbooking functionality, certain timezones were not crossing over correctly 5th November.
Added booking number to confirmation letter. 
Moved a management view option into a detected cms block so that Jomres SA doesn't trip over it and report an error.
Disabling management_view if Joomla's sef enabled. 
Fixed minor bug where installer couldn't create discounts table if it already exists (added  IF NOT EXISTS to the query).
Modified installer to resolve issues where Jomres reports errors installing on mysql server if strict mode is enabled.
updated cms specific installation script to take into account mysql strict mode.
Added a check for the setting to exist before returning it in the showtime class.
Modified how urls are detected within Jomres. If Joomla's internal SEF is enabled and the Jomres use ssl option is switched on we need to apply the 'live_site' variable to the url otherwise Jomres can't str_replace some urls with https. Means you can't have SEF urls within Jomres, and ssl in the booking form.
Modified cms_specific_functions.php to correctly find the current user's id in wordpress.
Disabled session id check in jr_user class as session id not set in wordpress, and I don't think we need it any more.
Removed old jquery corner javascript from Jomres libraries.
realestate property template updated to bring it into in line with the rest of Jomres' jquery ui handling.
Updating Jomres css file, removing obsolete classes.
Further css tidying up. Moved call for jomrescss.css to futher down in the init_javascript function to enable it to override jquery ui settings. Show tariffs and rooms templates updated with jquery ui classes.
Modified str_replace of http to https functionality to take into account single property installations and the booking form in the property details page.
Italian language file fully translated and brought up to date with the current version of Jomres. Many thanks Luca.
Modified add plugin functionality to only bypass remote download of plugin aspect of system, so thirdparty plugins should still install if the license is out of date.
Modified dobooking to ensure that last minute discount is calculated BEFORE taxes are figured out.
Modified countries.php so that the country names can be alphabetically sorted even if they've been translated.
Modified gateway validation routine to ensure that correct gateway plugin is checked and used by Jomres.
Modified currency codes class to change "Bs F" to "Bs". Thanks for the update Yubisay.
French language file updated, many thanks Mario
Added suspended column to user manager's table.
Fixed a bug where smtp emails weren't being sent when auth settings required.
Added new functionality to suspend property manager accounts. This gives us a base to work on for future functionality as we improve the commission handling in the system.
Added 00005 trigger point to admin.php. The main purpose for this addition is to allow plugins to include a language file post language detection to ensure that we're including the correct language file. Previously we'd use 00001 however this is no longer appropriate as the language is detected later in the workflow now.
Modified guest views. Added remove favourite feature and generally tidied up a few templates to make proper use of the jquery ui css. Also modified view favourite functionality to make better use of the basic property details class which provides fuller translation of property address details.
Modified list properties to not show the broken link to a non-existing room type image. For jintour specific properties.
Created new admin feature to see raw booking data stored in the booking data archive.
Added thumbnail handling to Jomres.
Modified SA to not generate title and keyword heads as Jomres will generally manage that.
Minor fix to searching functionality to pop the searchAll option off the beginning of the features array when showing features as icons instead of dropdowns.
Moved manager/reception/user toolbars out into their own minicomponents, moved top and bottom templates out into their own minicomponents. This allows us to totally remove these toolbars programatically, if we so wish.
Improved bug reporting functionality to include more information.
Undid property name translations from router.php, in Joomla SEF mode this is causing Jomres to not be able to find the property's property uid when doing booking confirmations.
Small change to improve room type dropdown layout output.
Modified singleton abstract to search remote plugin dirs for classfiles to create as singletons if they're so constructed for such use.
changed data sent to paypal when paying immediately. swapped output_price with number_format.
Minor tweak to lang file to ensure that new user creation function is only valid in Joomla.
Renamed j06002list_property_invoices.class.php to j06001list_property_invoices.class.php to ensure that receptionists can see invoices.
Fixed an issue in SA where the wrong from email address was being used when sending forgot password links.
corrected collection of 'task', removed <x> added by filtering code.
Small change to a query to ensure that SRPs that are changing their property type (ie for room type associations) don't see MRP room types in the dropdown.
Fixed bug where using the edit invoice feature in the backend wasn't setting the subscription as paid if the invoice was a subscription invoice. NA normally as usually a different mechanism is triggered to mark invoices as paid.
Modified jr_user to become a full Jomres singleton, as it was found to be causing intermittent bugs in a new plugin in it's older php4 class style. 
Modified how the property's room types are generated in the room type dropdown (SRP).
Modified property creation functionality to allow input of realestate type property prices at creation time, and corrected a bug where the price wasn't being shown in the property details.
Modified the invoice table to include an 'is_commission' column. 
Improved guest's invoice layout to show invoice line item contents.
New functionality to allow a logged in guest to change their details via an Edit Account link.
Finally solved the 'paging' problem (or lack thereof) in Show Profiles. Realised that even if we used paging, searching for a user to create as a manager would still be laborious so instead adopted the last version's functionality that searches for partners to search for managers. 
Added search by guest numbers (looks at max people column in tariffs) and search by star numbers. Only works in integrated search atm, modules will need to be updated separately.
Modified language switcher to always show the language dropdown when in the administrator area.
Some further changes to make viewing of commission invoices possible by the property mananger, plus added a commission invoices button and functionality to the administrator area. Also tweaked pseudocron to stop it from showing too many log events.
Added serbia & montenegro to countries file.
added a switch that outputs prices for real estate properties in the property list.
Added an experimental change to the booking form, we pause for two seconds to collate data before it's passed to the confirmation page. This seems to resolve isolated incidents where the guest details aren't always captured at booking time.
Added a check to the dashboard. If $_REQUEST requestedMonth is set, then don't use the cache.




Jomres 4.5.8 24/9/2010

Added a new view of the Jomres content area which allows the property manager to view just Jomres. This is both a faster interface (you're not running any of the Joomla modules) and allows more flexibility when branding the interface.
Added functionality to allow us to translate country and region names via touch templates.
Added a timezone switching feature to the managers toolbar. Disabled by default, this should allow users on one continent to work on a server on a vastly different timezone.


Fixed bug where booking_room_specific_info array was not passed to the confirmation template.
Modified handle req to adjust the departure date only if the date is < arrival date - min interval.
Added functionality to allow us to have cms specific minicomponents.
Modified gateway validation function to use $_REQUEST instead of $_POST, allows us to pass the gateway name in the url, instead of just via a form's post method.
Fixed Jomres SA's cms_specific_urls.php so that JOMRES_SITEPAGE_URL_NOSEF sets the url correctly.
Small change to dobooking_srp.html to make sure invisible items stay invisible.
Modified pricing output functionality in list properties to check to see if gross pricing is set before calculating the inclusive price.
Clarified and simplified string filtering. Ensured that if html editors are not allowed, that all input and output text has virtually all html stripped before it is saved/used.
Modified new management process selection feature to ensure that the correct template is shown in new property step 2.
Changed how micromanage->averaged prices are calculated when same room types are chosen with two different tariffs.
Fixed a faulty delete review query.
Modified router.php to use the translated property name.
Added initial functionality to allow Jomres to be integrated into Joomla 1.6. After Jomres phase of installation is performed, the site manager then needs to go to the Joomla extension manager and use the Discover feature to continue installing jomres. Other functionality like creating news users on bookings hasn't been tested and wouldn't be expected to work at this time.
Fixed issue where it wasn't possible to edit created extras.
Further work to resolve rounding issues. Removed number_format functionality from insert booking minicomponent, ensuring that calculated prices are inserted with as many decimals as possible, then added output price functionality to view and list invoice functionality.
Small change to booking engine's growl output functionality to ensure that dev popups are shown, and removed some old code.
Fixed typo in the language file. Propertys shmoperties.
Added rounding fix output to administrator area list invoices, however the same cannot be added to the edit invoice area because the currency code will prevent the discount calculation javascript from working.
Updated install_jomres.php to associate room types with property types on first installation.
Added new version of pt-PT.php, many thanks Mario Oliveira
Added Azerbaijan New Manat to currency codes class.
Added an internal feature to disable the paypal link when calling the view invoice function as part of the hotel's email.
Removed context word from booking notes.
Tweak guest's toolbar to use jquery ui widget css.
Upgraded jgrowl, which manages the popup messages. Modified it slightly (L191) to not use the "messages" class as the message using the header class within the context of the popup is ugly. Css file updated too, and jomrescss.css modified to remove the "header" class.
Added centering for SRP availability calendar.
Upgraded jquery ui to 1.8.5
Modified search functionality to add the "All" option to the feature search dropdown.
Modification to booking engine so that when in micromanage, we can filter out tariffs that are set to 0, allowing us to layer tariffs over each other, offering different minimum intervals.


Jomres 4.5.7 19/8/2010

Further changes to Jomres to support non-room based bookings. These changes are required to support the Jintour plugin.

Added a function to detect each dir in the ui themes subdirectory and find an appropriate css file.
When dealing with larger numbers finding number ranges for the search feature caused an out of memory error. With help from http://www.php.net/manual/en/function.range.php#85331 we've changed the foreach method of finding ranges with a for loop, which seems to fix the problem.
Added a missing var definition to the srp booking form.
Added new functionality to allow plugins to insert their own property management process information into regprop step 1.
Fixed missing define from language file re minimised config options desc.


Jomres 4.5.6 16/8/2010

Added check to booking engine to see if jomres messaging is enabled.
Small modification to handle req to ensure that the guest allocation is reset to blank once the guest number have changed.
Modified upgrade functionality to remove chmod function. In very rare instances some of the contents of the /jomres folder might not be writeable by the web server (which is why we use the web installer, and discourage use of ftp for installation of Jomres). In older versions, as a last ditch effort, we'd ask the user for their ftp details to try to chmod any file to 777 that isn't writeable to facilitate the upgrade. This is a less than ideal process for security reasons as some users may not be aware that any file given these permissions should manually change those back after the upgrade. To remove the risk of site managers not changing the permissions back, we've removed the functionality altogether, instead replacing the code with a warning that the files need to have their ownership changed to that of the web server's user.
Added ksort to ensure the room type dropdown list always maintains the same order.
Modified room allocation functionality to output room type instead of room name if we're using dropdowns.
In rare situations the month name isn't found by the appropriate function, so in the event that '' is returned, we'll use an older method to create the month name. 
Some changes to room type dropdowns to improve layout and information available.
Modification to jomres.js. If the difference between the departureDate in the booking form and the arrivalDate is > mininterval, don't adjust the departure date.
Added some missing translations for micromanage tariff editing's property configuration tab.
List properties modified with a nice little query from Piranha that simplifies the tariff query to output the "prices from" in the property list page.
Added a new trigger 00005 that is called before the action really starts, before the manager's menus are generated in jomres.php.
Restored some mistakenly removed definitions that define month names.
small change to dobooking to ensure that srps have the departure date set too when the form is first loaded.
Updated romanian currency code in currency code class file.
Added the beginning of new functionality that'll allow bookings to go through minus room bookings.
Hardened Jomres files against unauthorised access.

Jomres 4.5.5 30/7/2010

Note that there are changes to both dobooking.html and dobooking_srp.html, please ensure that your version (if you've modified it) incorporates the new changes otherwise your booking form will not work.

Minor changes to advanced editing and installer to clarify room types need to be associated with property types.
Added sanity check to warn users that the property is not yet published.
Re-enabled the SRP only option for room types.
Added commented out code to show how to disable popup in tooltips for room types and property features.
Modified booking engine functionality to disable a date in the calendar if all rooms for that date are booked.
Fixed issue where dashboard date when click wasn't used in the booking form.
Modified jr_gettext functionality in micromanage list tariffs and dobooking to enable translation of tariffs.
Couple of changes to dobooking to enable the date to be selected correctly when coming from both a date setting link, and a non-date setting link, specific to fixed period dropdowns.
Disabled translation of a button when in editing mode, as it breaks the button.
Implemented jquery date picker localisation files into Jomres.
Modified amend booking functionality to correct invoices once the booking has been amended.
Started adding files and functionality to install Jomres on WordPress 3. Functionality is not complete, as can't yet find how to reliably add our javascript files to wordpress, so this will remain a work in progress for now.
Added code to ensure non-booking form date picker pairs in search modules will set the departure date to one day after the arrival date.
Changed outgoing email's url to JOMRES_SITEPAGE_URL_NOSEF as Joomla's sef strips out the live_site.
Modified guest email to translate extra correctly.
Small modification to new date blocking functionality in the booking form. Disabled date blocking on the departure date. If a guest selects a day before a day that's fully booked, they can't actively choose the next date as the departure date because the room is booked the next day. It doesn't actually matter as the javascript's already done it for them, nevertheless it might confuse some people.
Added options to change the default search order, and whether or not to show the dropdown.
Added new functionality to the booking form. Property managers can now choose whether or not to display the classic rooms list, or choose rooms types from a dropdown.
Some minor functionality changes for new room type list dropdowns in the booking form.
Fixed a bug where the wrong room type was offered in the room type dropdown in micromanage edit tariff.
Fixed an IE issue where it complains about focus when the booking form is in the property details.
Added option to set start day of js and availability calendars from sunday to monday.
Added an option to allow site managers to only allow guests who have bookings with a property, to make reviews.
Modification to allow us to bypass gateways if the value of the contract is 0.00, so managers offering 100% discounts via vouchers can take bookings. Previously, this would have gone to a gateway but of course gateways will not handle 0 amounts as there's nothing in it for them.
Fixed http://forum.jomres.net/index.php?topic=3748 Thanks krsjan.
Added an extra model "per room".
Don't show the pay now link if the total is 0. (invoice page).
Clarified Jomres license to indicate that "jomres" is trademarked, that php files are released as GPL2/MIT and that all images, css and javascript copyright me are not freely distributable.
Removed unused definitions from language files.


Jomres 4.5.4 29/6/2010

Some changes to make tariff editing work better for SRPs after the room type changes of 4.5.3
Experimental tweak to single person supplements to divide the booking fee by the number of people in the booking after the number of times SPS has been found to find the SPS value for multiple rooms.
Fixed some missing calls to get the translated property name (thx Piranha).
Fix for system error when manager tries to make a booking, caused by new plugin validation check in 4.5.3
Rewrote chunks of the booking engine to internally assign guests to rooms to improve single person supplement functionality.
Commented out code that tries to make the anchor of the tabs based on the name of the tab. Too many non-latin users were reporting problems with tabs.
Instead we'll just use the random string generator to create the anchor.
Small change to micromanage saving to ensure that dates are saved in UTC.
Fix for fatal error when paypal override enabled.
Modified showconfirmation to ensure that gateway options previously configured are no longer available once paypal override set to Yes in administration area.
Fixed issue where if Advanced tariffs, Average and tariff charges are stored weekly, then the Tariff estimate would show the daily price instead of the weekly price.

Jomres 4.5.3

modification to micromanage handling to ensure dates/times worked on are set to UTC.
Fixed a wrong database table name. Don't think the issue caused any problems, but it's nice to be right anyway.
Added check to see if show only availability calendar option is enabled, if it is we'll need to show the booking form links.
Modified availability calendars so that dates are converted to the JavaScript calendar input format before the url to the booking form is constructed.
Removed some commented out lines that revision 911 now makes superfluous.
Added translation of property name and room type full descriptions to "accommodation" panel in booking confirmation form.
Modified a loop that filters returns when a search results produces > 100 properties. The old loop didn't take account of missing keys in the property uid list, the new one does.
Fixed bug where room rate wasn't correctly figured for gross prices when in micromanage and average mode enabled.
Removed click on free date message in availability calendars if the booking form is in the property details.
added JOMRES_SITEPAGE_URL_NOSEF to standalone cms_specific_urls.php
Modified how the captcha form initialises it's action, as the old approach, which came from the captcha handing's functionality, was getting mangled by Joomla's sef handling.
Fixed bug where wrong currency code was being recorded in an invoice.
Enabled option to switch booking form from property details to it's own page.
Added an option to show tools tips without the actual JavaScript, instead showing the title next to the icon.
Added table and code to cross reference room types with property types, and dropped the old SRP option in room type configuration. This gives us greater flexibility when creating room types and they probably should be renamed to something like "links" or somesuch in the future. There shouldn't be any need for properties to modify their tariffs or rooms, however site managers of existing installations will need to edit their room types and associate existing room types with property types.
Added FILTER_FLAG_STRIP_HIGH to the generate tab anchor function. Whilst firefox and IE happily work with utf8 chars in an anchor, Safari doesn't. 
Implemented jquery ui's datepicker functionality to replace the older dhtml date picker which hasn't been updated in years and is starting to show it's age (for ex. August in Chrome doesn't seem to show). I'll leave the older code in-situ for now in case somebody wants it, but in time, once I'm sure that the new code works flawlessly, we will remove it.
Resolved http://forum.jomres.net/index.php?topic=3443.msg16041#msg16041 problem where when wiseprice active, in micromanage and tariff model is Average, then the price summary has the tax added. What was in fact happening is in micromanage, because tariffs are linked then the prices originally determined (and adjusted for the gross price setting) by getAllTariffsData are not used, instead the db is queried again. Adding adjustment to the te_setAverageRate method seems to resolve this.
Resolved a security issue reported by OSDCS which allowed a user to bypass the selected gateway and see the booking inserted without paying a deposit.


Jomres 4.5.2

Modified singleton abstract to look in the custom_code directory for any class files before looking in the core /jomres/libraries/jomres/classes directory.
Modified inclusion for countries.php to search the custom_code dir.
Changes to availability calendars to ensure that if is single property option is set to yes, then the availability calendar is shown under the booking form.
Fixed minor issue where feature popup wasn't translated in property list.
Removed a stray $ that was preventing the rate to be included in the url in the tariff list when linking to xe.com.
ROL Romanian lui changed to RON new lui in currency codes
Added new toolbar_thirdparty.html and changes to jomres.php to offer third party toolbar under the manager's toolbar, for third party plugin developers.
Prompted by a user's ticket, I decided to see how easy it would be to put the booking form into a tab in the property details page, instead of in a page of it's own. It turned out to be remarkably easy.
Fixed bug which only appeared on Single property setups where an availability calendar search is performed and the user is taken direct to the booking form. Arrival date wasn't parsed through JSCalConvertInputDates to convert the date to a YYYY/MM/DD format therefore dates were being set to impossibly long periods (millions of days) resulting in an out of memory error.
Small modification to composite property details to switch off the Book now link in the top toolbar if option to show the booking form in the property details page is enabled.
Minor reordering of tabs
Small change so that if iphone is detected by Jomres, then the browser isredirected to the site but with tmpl = component, thereby switching off headers/modules etc, leaving just Jomres.
Small change to blackbooking template to not show the reasons field until the black booking dates have been selected.
Removed links from installer as they sometimes wouldn't work if the Joomla installation is in a subdir off the main site's root. Because of how the live_site is detected by the Standalone functionality, the live site cannot be properly detected during installation until we're actually integrated into a CMS/framework. Trivial problem, but it would instil concern among some users.
Modified system so that in tariffs and currencies you can configure the system so that prices input are the gross price, system will then figure tax from those prices in the booking form.
Added a restricted rooms clearing feature in event that one of the rooms in the selected rooms list has a restriction of > 1 then the entire room selection is cleared. It's not an elegant solution, but it should resolve the initial problem where rooms limited by restrictions can be left in a booking.
Small modification to tab building function for those poor souls who haven't got PHP5.2.
Added some code to ensure that the wiseprice discount info output to the booking form includes tax.
Further change to anchor making function to remove stray ' chars.
Modified micromanage functionality, added Advanced options for ignore_pppn, weekendonly, allow_we and min and max rooms already selected options to micromanage. In time, it's likely that Advanced editing mode can be dropped altogether, depending on if we can add improved price configuration functionality to Micromanage.
Modified number of rooms already selected functionality slightly.
Added date range picking functionality to micromanage tariff editing mode.
Fixed some broken images in the favourites output minicomponent. Thanks Piranha.
Switched htmlpurifier off by default as it appears to be causing errors on lower spec'd servers.
Fixed incorrect define in spanish lang file.
Added a couple of new icons for partners, although the code isn't written yet.
Configuration of new "booking form in property details" functionality changed. Whether to show the booking form in a separate page now controlled by jrConfig, and option to change this hidden in administrator area, making it less easy to change to put the form on a separate page. Calendar output scripts changed to not show links to the booking form.
Modified booking functionality to allow bookings of 0.00 value to be inserted.
Small modification to SRP to add a missing clause for the property details in booking form option
Revised changes to availability calendars so that links to the booking form are still shown if remoteavailability is used.
Commented out the "american" room tax options in tariffs and currencies. They haven't received any attention regarding adding tax to the invoice, and there are easier ways to add fixed taxes to the booking like using forced optional extras. 
Commented out some code that seems to be resetting the fixed period arrival date to today's date for no good reason, and modified dobooking.php to not try to reconvert dates in the url.
Added Czech Koruna to currency codes
Modified dobooking to use JS cal conversion function (again). This effectively undoes the change to rev 902, but the issue is identified now so depending on user's requirements it is possible to make a simple change to restore the 902 functionality. See the notes in the file for more information.


Jomres 4.5.1

Added an option to cms_specific/joomla15/cms_specific_urls.php 'nofollowtmpl' to tell Jomres to not adopt the tmpl=component when building urls. Useful if, for example, you want Jomres to not include tmpl=component in it's links after it's been called via a url with tmpl=component in the url.
Modified cms_specific/joomla15/cms_specific_upgrade.php to upgrade router.php
Added some filtering to router.php
Modification to reviews to not show thumbs images when user not logged in.
Fix for paypal handling, resolving issues created as a result of the SEF fix for router.php in cms_specific_urls.php, and the switch to cookie based session handling.
Added functionality to save temp booking data to the database. You can't yet do anything with that data, but it is saved if needed at a later point (I'll probably build a plugin to use this data at a later date)
Small change to invoice list functionality to show names of guests who aren't registered users of the system in the invoice list.
Fixed issue where link and pay now by paypal button not showing in invoice in email from hotel
Improved review functionality. Modified property list so that "click to show reviews" link changes to hide when reviews shown, removed error message when a review is published/unpublished, changed how the publish/unpublish button works so that image is swapped on click, and you can publish/unpublish without reloading the page.
Modified anchor generation function to try to resolve issues with russian lang tabs
list property and header templates modified slightly, and jomres logo image adjusted to look better in tooltip popup.
Added ability to add nocustomtemplate to a page's url so that Jomres will not use any templates which were created by the Template Editing feature. Might help with debugging issues with customised user templates.
Disabled nl2br in jomresGetParam function

Jomres 4.5

Added review functionality. Registered users (not just guests of a given property) can leave reviews (including independantly reviewing such things as hospitality and cleanliness). Other registered users can agree or disagree with reviews, or report them. Reviews can either be autopublished, or manually published via a new button in the administrator area.

Added css classes to select combo inputs
Fixed bug where new unpublished property check was interfering with selectcombo feature in module 0
Added <br/> to jomres_reconvertString when &#60;br /&#62; found.
Added nl2br to jomresGetParam function
Added check to jomres.php to ensure that property_uid > 0 before trying to not show an unpublished property.
Fixed bug where subscription isn't sent to paypal due to jomres references the wrong jquery javascript file.
Changed how tab anchors are generated to work with non-latin languages
Fix property invoice list showing firstname firstname to firstname surname.
Disabled some internal sanitisation routines of the captcha class that are no applicable to be used in Jomres, as they were causing some text to output incorrectly in the contact owner form.
Disabled some code that adds a room to the selected rooms list if coming from a room's availability calendar. Due to switching from two ajax calls to one, the totals will not be calculated when the booking form is first generated and if this code is left in place potentially a guest might get a room for "free".
Disabled some in puts in the Property Configuration area that are only applicable to the dashboard.
Added "task" to form in micromanage tariff editing because of an obscure issue where some servers wouldn't pass the "task" value so micromanage tariffs wouldn't save.
Added saveTariff as an exclusion to the sanity check to ensure that the no tariffs message wouldn't be shown if you're saving a tariff.


Jomres 4.4.2

Changed some paths for finding key validation class
Modified  jomres.php to show nothing if a property isn't published and the user isn't a manager.
Modification so in the event of a user attempting to view a non-published property a message is output and a random search is run.
Modified room number dropdown to present up to 150 rooms for each room type, not 1000.
Corrected missing quotes around email address sought for.
Fixed bug where global currency code wasn't being used if enabled.
Added Moldovan currency to currency_codes.class.php
Fixed bug where currency codes weren't being displayed in commission rate list, and wasn't being saved when editing commission rates.
Configuration panel handling rewritten to use jquery ui tabs
Fixed an error in the json response for the select combo, seems that jquery 1.4 demands that the keys be surrounded by double quotes, as well as the values (a good thing really).

Jomres 4.4.1

Fixed bug in upgrade functionality where key wasn't being passed.
Several changes to remove some stray Itemid's from urls within the system.
Modification to ensure new property_currencycode property config option is used to set the currency code in the currency conversion url.
Removed output headers inline mootools fix as no longer required.
Fixed bug where property country wasn't be set correctly when fixed countries option was set to No.
Fixed a few missing / in token hidden fields.
Updated jquery to 1.4.2, added UI library and associated css files. Had to update the Block UI library too to ensure that the booking form would continue to work.
PHPMailer v2.2 replaced with PHPMailer v5.1. I've had one client say that their hosts have disabled their site due to the older version of php mailer, which was PHP4 compatible. Whilst the only vulnerability for PHPmailer I can find refers to an older version of the script, and the 2.2 version doesn't suffer from the same vulnerability it's nevertheless prudent to upgrade to the PHP5 version as we're not supporting PHP4 any more.
Modified new purifier handling to not purify text if editing mode is enabled.
Changed property details tabs to use jquery tabs.
Removed add property button from administrator area button. Causing too much confusion for new users.
Changes to router.php to resolve "Cannot unset string offsets" bug.
Corrected Polish currency code.
Changed name of Yugoslav dropdown for language selection to Srpski
Updated version of Yugoslav lang file, many thanks bokikroki
Added jquery ui css themese as selectable options in administrator area. There are now 25 themes for you to choose from.
Many modifications to frontend templates to make use of new ui framework.
Modified terms popup to not show Joomla headers/modules/menus etc
j00015discounts.class.php removed and it's functionality added to the composite property details script



Jomres 4.4.1beta1

http://bugs.jomres.net/view.php?id=27 Fix for all guest types and numbers in confirmation email
Added a new function output_price. Currently users need to enter an http entity in the property and site config areas to output a currency symbol. In this version we've added a currency class which (should) have every currency code in the world, and their associated symbols, plus formatting for putting symbols before or after prices.
Small change to fixed period dropdowns, making it so that the first valid date found when generating the dropdowns sets the arrival date in the booking to that. Improves the initialisation of the booking form for fixed period propertys.
Moved call that generates css file to the init javascript function.
Modified invoice creator so that if $mrConfig depAmount == 1 then when a booking is created, if the deposit amount is set to Full then the invoice should be marked as paid (when the booking is eventually created).
Modified dobooking to trigger an initialising ajax call to the booking engine so that SRP have their room selected when the page first loads.
Added code to ensure that 64bit servers correctly d/l plugins from the plugin server before attempting to extract them.
Modified calculation that shows when a property is mostly full so that instead of using .75 it's using .99.
Resolved minor bug in installer where it complains about a non-existent index
Fix for issues where invoices aren't associated with cms user ids on booking creation, and where usernames aren't shown in the invoices list.
Added a fix for a trivial but annoying bug in jscalendar seen in firefox only, in the booking form. http://www.dynarch.com/projects/calendar/old/#Kcomment-200
Added html purifier library and supporting code in Jomres to add an extra layer of security for input and output filtering.
Added note to remind users to log into the frontend to administer propertys to installer
Modification to resolve issues where users have uninstalled via Joomla, then attempted to reinstall Jomres. If Jomres links aren't found in the components table, we'll attempt to re-add them.
Added jeyjey's property feature icons. Many thanks.
Fix bug report about stray itemid http://forum.jomres.net/index.php?topic=2815.0
Removed a reference to mambo that was preventing the switch ssl option off from showing in the site config
Added a new copy of cz-CZ.php. Many thanks Leonard.
Modified logging functionality so that if booking logging isn't enabled then no logging info is stored in memory. Previously it would be stored in memory then if logging was enabled then it would be written to the log file.
Added booking number to the confirmation email subject
Change to fix some noConfict (mootools) issues
Applies maakit's suggested change to cms_specific/joomla15/cms_specific_urls.php which enables Joomla's internal sef handling to kick in, and re-enabled copying of router.php in installation files
Modified cms_specific/joomla15/cms_specific_urls.php to ensure that Jfactory is only used when Jomres run through Joomla
Modified invoice handling so when the invoice is marked as paid an appropriate line item is added to reflect that so that the outstanding total is updated to show that 0 remains to be paid.
Further changes to enable us to change the output on the view booking page, takes into account the invoice balance and updates the remainder to pay field to reflect the state of the invoice. If the invoice id isn't associated with the contract uid (only bookings from this update) then the old calculation will be used.
Modified save cancellation functionality to mark an invoice as cancelled too.
Modified the delete room feature script to output a message instead of throwing an error, in the event that a user tries to delete a room feature that's already applied to a room or rooms. Slight modification of the language file too.
Modified the currency codes class to allow the site admin to set the sitewide currency code in the administrator area, and show the subscription packages using the new output_price function.
Added a new sanity check to warn if editing mode is being used with global editing enabled, provides a link to the editing mode manual page.
Added a check to captcha to see if php has been installed with Freetype support.
Added minicomponent directories array to mcHander and it's registry class.
Modified jr_import to check minicomponent/plugin directories for class files. Now there's no need to have a "00001start" minicomponent to include these class files.
Fixed some missing /trs  http://forum.jomres.net/index.php?topic=2930.msg13155#msg13155 thanks Gargano.
changed how prices are estimated in booking form for Advanced, Average model tariffs.
Modified router.php to trim property names as names with a space on the end trigger a 404 error when sef is enabled
Renamed avail room div to rooms_listing to ensure that the correct availability message is shown in SRPs
Added personal discount feature so that specific guests can be given individual discounts
main.php added to templates for xml parsing
Added new functionality to enable us to use the search feature and return (some of) the data in xml format for use via a remote site.
Fixed bug where micromanage tariff editing mode wasn't showing the short day of week for the current language, instead was always showing english short day of week.
Added search by price ranges to miscdefinesfortouchtemplating plugin
Modified system to use cookies instead of session_id, drops the requirement to run the system with Global Config needing to be set to None. With luck, any users who's servers are not configured to use sessions (admittedly, few and far between) will now be able to use Jomres.
Changes to booking form to only show coupon code row in totals table if the property has some coupons created.
Modified how SPS is calculated when set to percentage.
Modified countries.php to change wording from St Kitts to St Kitts and Nevis
Added a site config feature where site administrators can limit the "home" country of properties to just one country.
Added support key checking for upgrades and plugins



Jomres 4.4

Modified booking form javascript to convert the old two pass process (rebuild rooms list/pass other info -> calc prices) to only need to run one pass instead. The booking form runs much faster now.
Added a new method to sanitize output before it's eval'd by jomres.js
Fixed a bug where if an optional extra doesn't have a quantity, a javascript error is thrown. http://bugs.jomres.net/view.php?id=19
Modify amend booking functionality to carry over extras quantities when editing bookings. http://bugs.jomres.net/view.php?id=23
Removed two defunct property features from installer.
Added property terms and conditions to confirmation email.
Removed references to index2.php, now using index.php. (Joomla)
Added translations for subscription packages http://bugs.jomres.net/view.php?id=12


Jomres 4.3.4

Removed arrival and departure dates from tmp booking handler's reset function.
Added optional 05050 trigger for third party extras
Added new variable for third party extra's private data and added nocomplate to the javascript calendar inputs
Modified how tp extras are stored in the engine, they're now further associated with a plugin, allowing the plugin to reset all tp extra options for it's own data, if required.

Jomres 4.3.3

Fixed a couple of parse errors in Norwegian and Chinese language files
Re-enabled the MRP SRP property switch in Site Config -> SRPs tab.
http://bugs.jomres.net/view.php?id=3 Fixed ability to not delete existing template customisations
Added custom field data to confirmation form
Custom field contents added to guest and hotel emails.
Used the bugfix version of the updater to resolve upgrade issues in Jomres Core.
Removed a strtolower in the site settings singleton to aid installation issues some folks were getting.
Added code that allows us to insert rows into the extras area, and process new code in handlereq that's introduced as a new trigger. The rows trigger is 05030 and the handlereq code is 05040
Added pricing functionality to third party extras handling and insert into invoice handling.
Added third party extra information to the confirmation page.


Jomres 4.3.2

Added disabled=" " to ensure that extra quantity boxes in the booking form remain disabled until the checkbox has been clicked. Thanks Piranha.
Added single property only option. Allows us to configure a Jomres installation so that all calls to Jomres that aren't going to some "task" force the page to go straight to the booking form of the first property.
Added Polish currency code to currency_codes.class.php.
fix http://bugs.jomres.net/view.php?id=14
Fix http://bugs.jomres.net/view.php?id=16
Switched off property header in booking form if single property installation is Yes.

Jomres 4.3.1

Minor fix to German language file

Jomres 4.3

Modified edit template to fix saving not posting updated field.
Fixed default language bug
All Jomres files encoded utf8 (although notepad++ disagrees)
Fixed minor pathway bug in SA (was using a joomla function)
Corrected call to $property->propertys_uid in list propertys
Added global call to jomresConfig_lang for backward compatability
Fixed bug where property feature icon wasn't showing in integrated search
Fixed bug where property name wasn't translating in property list, added javascript to reset quantity selected to 1 when the quantity has already been selected once. Thanks Dimitris B
Added jomres_button_property_list class so that we've got different length buttons on property list and property details. Did some more work on autotranslate but it's disabled by default and there is no option to enable it yet as it is still experimental.
Modified backend addproperty to fix images not showing.
Fixed bug in installer where property features weren't being created on install
Added some calls to set showtime property uid so that the correct property name is used.
Fixed a bug which was preventing invoices from being included in booking emails.
Changed the way that the daterangestring in blackbookings is determined to resolve an issue on some servers where just the odd date is missed out.
Changed headers to indicate Jomres' new GPL license & removed licensing code.


Jomres 4.2.2

Modified create property functionality so that the property type is selected on the first page, allowing us to use a property type language file in the "edit property" section (so now eg you can use yacht/boat specific language instead of the generic property language when creating a new boat)
Improved searching on price ranges when realestate properties used, and fixed bug where searching on Any price range wouldn't produce a result.
Various further improvements for realestate propertys (ie boats)and new feature to associate property features with property types.
Fixed bug where property maker was using the wrong id (manager id, not cms user id) when cross referencing new propertys with managers.
Fixed a bug introduced in 4.2 which broke caching.
Improved invoice views, added line items to invoice list and guest name, added mark invoice paid button.
Added codemirror javascript for template editing, and various index.html files for obscuring directory contents.
Renamed google maps variable to prevent collisions with map div id.
Added custom paths to showtime class, and the ability to Jomres.phptools/patTemplate/Reader/Jomres.php to pick up this custom path and use it instead of the default path.
Added api key output in show profiles and added a button to allow us to change the manager's api key. Similar has been added to API plugin to show the manager's API key in the frontend.



Jomres 4.2.1

Removed a useless (?) close session that was causing much disk activity.
Fixed language switching not working in SA
Added a clause to dobooking to resolve an issue where amend booking multiplies the number of guests in the booking.
Disabled new invoice icon in view users invoices as that functionality doesn't exist.
Added a parseFloat function to ensure that lat/long elements passed to property details are true floats without commas.
Fixed bug where from address in emails was wrong.
Add property maker class
Improved pathway handling
Modified tooltips to resolve mootools conflict in popups


Jomres 4.2stable

Modified edit invoice to fix bug with javascript not updating totals, and made inputs shorter to fit nicer on page.
Fixed bug where list invoices not using correct url (showed up in SA)
SA fixed bug where ajax calls were still producing headers
SA modified login for admin so that they get taken to control panel, not front page
SA Fixed path to property feature images missing in tooltips
Added no_html to edit profiles
Commented out defunct rooms header in property description tab
SA Added piranhas beta2 templates
Added no_html to grant access link in show profiles
SA Fixed path to images in pathway
Added variable deposit feature to Tariffs and Currencies tab
Added option to allow site admin to direct all Contact Owner emails to an alternative address, and hardened contact owner to ensure that the property is published before the feature can be used.
Added max people input for SRP edit room/property type functionality as due to the way some folks were changing property types, the rooms/bookings were being limited to too few guests.
Added another file to obsolete file handler
Fixed bug where custom text constact was getting set to upper, so plugin names would not translate.
Added ability to use touch templating to translate property types.
Fix invoice changes not saving in administrator area.
Fixed add service to bill not updating invoice total.
Modified edit booking to show the extras with tax added if applicable.
Added email sent message to confirmation form output.
Modified rooms listing so that rooms are listed according to the associated tariff uid, instead of the room uid.
Added feature whereby a listing can be a "realestate" listing only, which offers far fewer settings and removes the need to use Jomres alongside another real estate listing applicaton.
Reduced the number of people in room and booking in Normal mode tariff editing. Should resolve the out of memory problems that some folks were getting on Property Admin page.
Edit to allow 7 star propertys
Made the jomresbutton class a little narrower, fits better on the page.

Jomres 4.2beta2

Adding first draft of Jomres SA to v4.2

Fixed missing td in edit property and shortened edit property columns from 90 to 70.
Undid change that reconverts ', will compromise security. Instead modified basic_property_details.class.php to do the reconversion when showing the property name.
Modified addservice to add line item to invoice
Fixed bug where listoldbookings was pulling all data from db, not just bookedout/cancelled bookings
Added note to license failure warning to remind users to click Save after changing license binding on the license server.
added print invoice define to lang files
Fixed bug where new hotel details output wasn't showing telephone number
Modified positioning of beautytips features and room types popups. Seems the mickey mouse browser doesn't like the "bottom" position. Probably thinks the code's being rude or something and we can't have that. Oh no.
Modified add your property link in guest's toolbar to only show if allow users to register option and subscriptions option, are both enabled.
Added caveats to trigger an error if user has no propertys only if we're not in admin area. SA specific.
Tweaked backend button layout a little
Modified pathway to not show if not in Joomla
Fixed pathway not showing issue
Fixed parse error in j02202a_update_invoice.class.php
Added gross price calculation to basic_property_details.class.php 
Modified config so that if property is Micromanage then prices stored weekly option is no longer available, as Micromanage is purely for day to day pricing.
Modifed show tariffs to calc gross prices
Removed reference to i hover image in booking information note in English language files.
Fixed bug in pathway that appears in non-joomla installation
Updated mailer class
Restored property country to header
Added editing mode to custom fields
commented out line that was setting Itemid on the fly
Added star icon to dashboard to indicate start days of bookings.
Fixed some issues where QBA subscriptions weren't being set up in paypal.
Added fix for missing class import in admin edit_invoice
Additional changes to show tax details in booking form.
SA bug fixes and tweaks to allow dynamic calling of templates and css
Modified paths in updates feature
Fixed mailer function to differentiate between smtp and mail options.
Corrected init define check in preview email, was using the old v3 defines, now it's using v4.
Fixed bug where having one "required" custom field made all custom fields required.
Changed distribution location of com_jomres.php for sh404sef to it's own folder in the joomla15 directory.
Changed location of dobooking.php and handlereq.php to the /libraries/jomres/functions directory.
changed default location of Jomres SA jomres_standalone_config.php, index.php and administrator.php to be within the jomres folder. Means we can sit inside the root of another CMS's installation and still run as SA.
Added some debugging to PHPMailer_v2.0.0/class.smtp.php to improve debugging of smtp mailing (duh).
Modified SA to run purely within /jomres instead of having index.php and admin.php in the root and removed admin.php altogether, enabling everything to run through index.php.
SA Added admin password warning
SA Added iswrapped functionality
Modified file uploading functionality to replace a " " with a "_" when the slideshow image is renamed.
Changed booking form output to remove the optional extras popup and instead just the the text that was in that popup, above the optional extras.
Modified slideshow to change _ to " " in slideshow captions
SA Modified menus to show link to front page while on login/registration page
SA removed a stray " in the registration page
Added fixed arrival day dropdown to Micromanage tariff editing.


Jomres 4.2beta1


Major rewrite to largely eliminate the use of globals within the system, switching over to using mainly singletons for maintaining and manipulating data between classes. Some globals remain in place to aid backward compatability with pre-v4.2 plugins.
Reworked email handling to show invoices in emails.
Renamed many class files to allow autoloading of classes, introduced jr_import function for importing class files. Classes by default are in /jomres/libraries/jomres/classes, however they can also be autoloaded from /jomres/remote_plugins/custom_code.
Added performance monitoring class (you need to enable minicomponent logging in Site Config to see the output).
Modfied and simplified black bookings, giving SRPs their own template and preventing the Save button from showing until the dates have been selected and the Apply button clicked.
Added view invoices page to Receptionist's menu, and if subscriptions are enabled then Property Managers can see an invoices page in their toolbar.

Fixed urls in property list to search via town/region/coutry
Modified positions of { in jomres.js
Modified dobooking class to not show book now text
Modified list propertys to change how jomresURL is called
Modifed addplugin to rename XYZ-plugin_name.php to plugin_name.php
Updated graphs.js to resolve IE error.
Fixed IE error in view property stats page.
Added code to installer to ensure that if files aren't copied over, then this is output to screen.
Removed url encode from list propertys search by town/region/country as searches on elements with ' were returning no results.
Modified search function so that special chars are rendered correctly in metatitle.
Added code to strip out non-latin chars from user names and set it to lowercase on create new users on booking feature.
Fixed smtp handling in jomres mailer function.
Added ob_start and end for Jomres SA handling to admin.php
Added detection of Jomres SA to detect_cms
Added editing mode option so that property names can be translated via frontend editing mode 
Added modules folder to Jomres writability check in control panel.
Fixed bug where incorrect date showing in audit log list
First phase of rewriting Jomres v4.2 done, classes and files renamed, autoloaders and singleon handler in place, and added obsolete file checking class.
Added improved handling of curl in plugin installation
Added option for customisable path to the css file
Rejigged custom text handling so that it's all done in the custom_text object. Created new function file for jr_gettext
Added current_property_details class to help minimise query numbers
Added new version of beauty tips, modified mustregister to point the user to the registration form, 
Removed a few out of date .js files
Fixed width issue in tooltips, thx Terago.
Added view invoice handling to Jomres property manager area.
Added show invoice option to receptionist's menu
Added a pre-installation check for Joomla to prevent users getting 404 error after installing Joomla after they've had to make certain folders writable by the web server.
Added tax option to optional extras and quantity multipliers to booking engine so that these are added to invoices.
Added jomres lifetime jrConfig variable
Added an activity to paypal to mark depositpaidsuccessfully. Not really needed for the paypal gateway, instead it's expected to be used by other gateways.
Added rel="nofollow" to Google currency links
Added check for depositpaidsuccessfully flag so that invoice has deposit amount added to line items.
Added sanity check classes/jomres_sanity_check.class.php  Currently only checks that if the property is configured to pppn, then recommends that you create at least one guest type
Added new property details singleton basic_property_details.class.php
Modified installer to add package_id to subscriptions table
Enhanced the subscription handling. Allows the admin to offer one free subscription package (if both the trial and the full amount =0), added a menu button where managers can see their existing subscriptions, available subscriptions and current propertys.
Added new button to users toolbar inviting them to add their own property, fixed favourite handling as existing favourites weren't being found.
Added some site config settings so that site admin can provide their business details in invoices. Improved invoices so that site managers can see and print invoices from the subscriptions info page.
j03200insertbooking_invoice.class.php renumbered to 03025 because we need to ensure that it's called before the emails are sent so that we can generate the invoice details in the guest and hotel emails.
Fixed bug where extra quantity wasn't modifying price in confirmation page
Improved blackbooking functionality by switching off Save button until apply button has been clicked once, gave SRPs new template and customised output for SRPs making black bookings.
Security enhancements to several j06000 minicomponents, and introduction of j06001, j06002 & j06005 minicomponent tasks
Removed admin's first login warning
Added new columns to installer phase of table generation.
Added rate number check to sanity checking
Added translated property names to search options,tweaked reconvert function to reset '
Improved paths for finding integration.php
Added delete subscription feature to admin area
Language files updated, removing BOM from several.
Minor tweak to list propertys template to ensure image and button layout works in Chrome
Modified jomres css to provide a more neutral grey by default. It seems that nobody liked my happy, cheerful harvest yellow scheme. Boo hoo.
Room type icon colours rejigged to differentiate them from property feature icons
Room/feature info popup shows now below the icon
Layout modified, room features/property features are now shown in the property header. The old code for showing the features in the tabs is still available, but commented out. 
Modified editing mode, made it switchable via a dropdown next to the language dropdown, and is particular to the user, rather than the property. 
Fixed bug where in editing guests, house is saved as street, and street is saved as house. Template issue where wrong names were used on inputs. Amazingly, this issue must have been in the system for at least a couple of years but I can't remember anybody mentioning it.
Added note to license failure warning to remind users to click Save after changing license binding on the license server.


Jomres 4.1.4

Added option to output Jomres javascript headers within the body of the page instead of the head, which seems to resolve the mootools conflict issues in some templates.
Fixed bug where invoicehandler was setting currency_code to (int) before inserting it into the invoice's details.
Fixed bug where the currency code wasn't being correctly selected before the invoice was inserted.
Fixed bug where sendBug was using old functionality to send an email, now uses jomres email handling.
Added remote_plugins/code_changes check so that countries.php can be in the code_changes folder and hence not overwritten during upgrades.
Fixed bug where Add property button would show if license is Solo
Coupons Fixed bug where valid to from dates were not saved if the date config settings weren't set to dd/mm/yyyy
Modified add plugin handling to get around pclzip library that has a bug on 64 bit servers, using the older zip library for unzipping from the plugin server, and pclzip if the installed file is from a file upload.
Fixed bug where wrong javascript calendar language file was being used.
Added urlencode for search links in list propertys
Ensured that sitepageurl define is sent to template in editnote
German language has been updated. Many thanks Roger.
Inserted two blank rows to show confirmation template to resolve issues that some folks have been getting with some templates and jquery corner not playing nicely together.
Added task = confirmbooking to booking form templates as some servers fail to pass the "task" variable in javascript.
Fixed bug where 27/28/29 Dec were showing in Jan 2010 availability calendar
Fixed a bug where normal mode tariffs were being saved as integer, not floats (eg 19 instead of 19.99)
Added "desktop" icon to administrator area
Select combo country name list now nat sorted by country name.



Jomres 4.1.3

Improved editing mode translation of room names. Tried to improve translation of tariff names but in micromanage this is much harder to achieve.
Switched off tariff title in booking form when in Normal tariff editing mode
Changed class for manager's icon to prevent overlapping icons on some joomla templates.
Added / path to cookies for message class
Tweaked slideshow functionality to show captions above the image's popup
Added a couple of missing elements to touch template function in booking completed minicomp.
Added check for webinstall in /administrator/components/com_jomres.
Enabled automatic redirect to the booking form in searching if Solo.
Added {LINK} to guest confirmation email
Fixed a bug where icons for third party toolbar items in front end weren't having the correct paths in windows.
Removed some hardcoded / and replaced with JRDS
Changed unzip library to pclzip
Moved define for jomres installer, and added no_html to showplugins for third party plugins
Removed a redundant message saying plugin has been removed
Tweaked edit template functionality to add <x> to textareas
Set default language to null in temp booking handler

Jomres 4.1.2

Fixed google maps templates and improved notes for entering latitude and longitude in Edit Property.

Jomres 4.1.1

Rewrote sections of code that saved language and search dates to cookies. As this was giving inconsistent results (eg the wrong language) the data is instead now saved to the Jomres temp booking handler's data.
Added "var" fix to google maps
Preliminary inclusion of cms specific files for miaCMS
Added captions to slideshow images
Added property type and per day/week label for "prices from" to property list.
Modified confirmation form popup to not show module positions etc
Removed old hidden divs from SRP booking form and fixed number icons to go 1-2-3 instead of 1-2-4.
Fixed bug where if several days were chosen as weekend days and a tariff was made for, say, 2 weekend days, then the tariff wouldn't be found when building the rooms list. Now the method that handles that checks that all days in the date range are weekend days, not that all days in the range and the weekend days range are the same.
Small modification that causes curl to be used first for connecting to the license server.
Fixed bug where contact owner (captcha) wasn't deleting old captcha images in /jomres/temp.
Added two new url options to remote availability calendars. By default, remote availability calendar will show links and when the link is clicked the booking form will be opened in a new window. New option "tar=0" disables the blank target, and new option sl=0 will switch off the links to the booking form altogether.
Fixed bug where editing a customer type creates a new one
Created a wrapper function for div population in the booking form. The purpose being to enable site admins to remove elements in the booking form without the missing divs causing an error.
Added hidden jomresitemid to search module templates
Corrected the NZ regions.
Added smoking option to booking form for MRPs.
Fixed multiroom booking prices calculating incorrectly in micromananage mode
Fixed unable to amend booking if the guest type has been removed since the booking was created.
Switched off property header in tariffs and rooms list
Tweaked path in cpanel to ensure it pulls in the correct setting for the current version of Jomres.
Changed the opacity to .9 in beautytips
Fixed bug where subscription packages couldn't be deleted.
Disabled room link output in SRPs
Added space between region and country in property header template
Fixed tax rate labels missing when editing tax rates.
Added current version info to updates page.
Fix so that property header doesn't show twice on show tariffs popup
reset tmpl to '' if not wrapped
Tweaked Jomres main menu option handling to ensure plugins can insert their own images
Tweaked url handling in joomla to ensure tmpl=component sets the jomres site url to same
Fixed hover image popup going too far left by disabling jquery.corner application to the propertylist_right td.



Jomres 4.1

Fixed bug where you are unable to change the property type (1 bedroom/2 bedroom etc) in an SRP once it has been created.
Fixed parsebybots handling.
General code changes to resolve some validation issues
Fixed a bug where new, non-registered users weren't having their details recorded against a booking.
Slight modification of instructions for setting Session handling in Global Config
Modified slideshow to output no images message within slideshow tab
Fixed issue where some Joomla templates are showing bullet image in tabs on property details
Modified paths to com_jomres.php for 404sef message in site config
Added subscription handling to v4, integrated old subscriptions plugin.
Added option to enable/disable automatic creation of new users on booking if user is not registered.
Fixed bug where /templates/jomres/frontend/srch.html was being called by all search modules.
Reworked all of the code that uses the room types and property features to ensure that calls are passed through jr_gettext thereby allowing users to translate both with confidence.
Fixed a minor issue where the room type wasn't remembered in the room type dropdown in the micromanage edit tariff page.
Replaced makefeatureimages call in administrator register property area to use new beauty tips.
Added croatian lang file to lang library. Many thanks Natalija.
Added miscdefinesfortouchtemplating minicomp
Added language definition for self registration module
Tweaked template editing so that javascript doesn't cause an error in mysql.
Switched off pathway when on dashboard.
Added list subscriptions feature to admin area
Tweaked how subscription/property list is shown in dashboard.
Added missing define for new user creation email subject
Fixed call to __jomresportal_c_rates in installer
Added absolute's fix for white on white rooms list headers. Many thanks.
Stopped sms script from trying to send and sms if the feature is disabled, no biggie, it was causing a message in the error log. This fix will stop that.
Rejigged new user handling to ensure all emails are sent correctly.

Jomres main guest facing templates have been overhauled. Added jquery.corner.js to soften the corners of many panels, updated the css file to match and many of the templates.
Fixed a bug in Beez template where reception and manager's menus were seperated by a large degree by adding some css to the receptionist's toolbar to emulate valign.
Found a broken td in the booking form, which may have caused some people to experience the availability calendar wandering off to the right.
Added new links to property list, town region and country now go to search module_m0.
Booking form modified so that if optional extras haven't been created, the appropriate panel will not be shown.
Found cause of insertion of several lines into source output. Trival, but irritating.
Fixed issue where saving guest type order feature results in 500 error/blank page.
Added sorting to language dropdown.


Jomres 4.0.1

Added ability for Jomres to detect when a template on disk is newer than the last time the template in the db was edited and warn that it may have been updated.
Added code to detect usage of coupon codes. If there are no codes for the property, then the coupon input isn't shown in the booking form. Note that the booking form templates (dobooking.html and dobooking_srp.html have changed as a result).
Modified site config to remove key file on save, previous path was incorrect.
Tweaks to multilanguage handling to correctly pull and use the language file appropriate when calling a module but not showing Jomres proper.
Removed default date settings from list propertys book now link as no longer required as validto and from timestamps no longer used in booking engine.
Fixed issue in paypal gateway where settings overridden weren't being pulled from the db correctly.



Jomres 4stable

Fixed google map bug
Added more options to allow greater configuration of the rooms list in the booking form.
Switched off debugging in updater
Modified check for jomres_availability cookie before setting the arrival date to 01-01-2009
Added missing declarations to spanish lang file
Fixed ie7 js error bug


Jomres 4beta3

Added the Jomres -> Clickatell plugin to the core code.
Changed many files to add Jomres messaging on updates/inserts etc
fixed broken paths in 404sef com_jomres.php since update to v4.
Modified list propertys so that tooltips are used for property images, and the thumbnails are displayed respecting the aspect ratios of the images.
Added Growl messaging to Jomres library, and added sticky messages.
Added resizing option to show property image thumbnail with aspect ratio preserved.
Fixed room image uploading not working.
Using defined constants for image abs and rel paths.
Minicomponentised slideshows.
Deleted old plugins folder.
Moved slideshow.html to frontend/slideshow.html.
Added admin option to define thumbnail sizes.
Modified image output of thumbs to show correct aspect ratios.
Fixed jquery/mootools conflict issue.
Fixed issue in horiz rooms list where room price not calculated if you're not using micromanage mode.
Added check for task in language selector, if it's set to touch_templates, then the lang selector is always shown, allows for easier changing of languages when translating.
Added a check for contract_uid col in installer
Fixed infinate recursion problem on emailing.
Removed redundant call to jquery.bt.css
Fixed issue where uploaded image wasn't showing in edit property page
Fixed bug where current language not being detected properly so custom text wasn't being used.
Fixed bug created in v4 preventing paging from working, caused by renaming "page" to "plistpage".
Added htmlspecialchars to jr_gettext to try to prevent ' etc in strings from breaking the editinplace javascript.
Added get_shortcode_to_longcode method to jomres lang class to try to associate shortcodes with long codes when detecting the current language.
Modified the booking engine to remove the reliance on validto_ts and validfrom_ts as on first initialisation the arrival and departure dates aren't set, therefore you always get the message that the arrival date is incorrect, even if it's not. I'll revisit this again at a later date.
Minor fix to the french lang file.
Removed some &amp; s that broke the register property page

Jomres 4beta2


Removed an element from the amend booking functionality that updates the deposit paid status.
Fixed the javascript in the register property page as &amp; wasn't being parsed properly by the js and so countries couldn't be selected during backend add a property.
Added a simple check for j00001start.class.php to try to resolve the file move/no cpanel or any other scripts running issue.
Added migration handling to install_jomres.php
Added isInIframe check to cms_specific_urls.php to change the call from index.php to index2.php.
Extracted jomres_database to it's own class file.
Modified language detection in Joomla so that the current language can be detected from Joomla if Joomfish isn't used.
Solved the case of the mysteriously disappearing admin menu (renamed Itemid to jomresItemid in cms_specific url handling script.
Modified how imageonly image beautytip popup is called, allows the image to go left, right, top, bottom then "most". Stops some flickering when showing the slideshow.
Licenses updated for clarity
Changed the include to the languages array file from "include" to "require_once".
Disabled the site config for the default language file, I don't think we need this any more.
Fixed incorrect redirect to listproperties in administrator if commission rates are saved.
Added a default commission rate to installation sample data.
Changed default trigger of orphaned commission line items from every minute to every day.
Added commission line item addition script to core.
Improved v4 functionality to correctly show link to allow admins to view a user's invoices in backend.
Modified list own bookings to not show the booking info in a popup any more, instead we go to a new page.
Minicomponentised non-manager's options inc show bookings/favorites etc, removed a bunch of files that have been made redundant as a result.
Fixed searching, stopped search results from showing in module area.
Updated blockui, added css to jomrescss.css so fixed bug in IE8 (wouldn't ya know it?)
Finally got excanvas to work so that beautytips have a background in IE8.
Fine tuning styles on property details page.
Added hover intent to slow popup of ajaxurls.
Changed tabber's background tab colour to grey.
Modified info image text to yellow
Modified report bug message to provide full path to the Jomres page.
Reverting to older jomres version of captcha class to fix a bug.
Fixed search feature icons to show as tooltips, not overlib.
Reordered language detection.
General code tidy up to remove remaining $tr references and other assorted warnings.
Tweak to jomres_language.class.php to ensure that jomreslang cookie is always set.
Added feature to set popup=1 on all links if $_GET['tmpl'] = 1, effectively forces into wrapped mode even if it's not explicitely set in site config.
Added a check for $_GET['srchOnly'] to j00030search.class.php, if this option is set, Jomres will not show search results. Instead, it'll just show the search module's options. In short, it will allow us to call Jomres within an iframe and show a search module.
Enabled editinplace for internet explorer
Integrated new user handling into v4.


Jomres 4beta1

Late addition of Piranha's image/input click js for date inputs.
Small change to functions.php to enable installation of mambots.
Improved chooseLanguages feature by setting previously selected lang files checkboxes to checked.
Improved javascript & css inclusion by calling Joomla's own head setting functions where applicable.
Minor tweaks to ensure that calling modules works ok.
Fixed property image not showing in property list.
Fixed bug where room type icon not showing in room type list.
Tweaked joomla specific code to find Itemid from menus table if Itemid = 0
Added display booked out and cancelled bookings feature.
Added jomrescss.css to template editing feature.
Fixed bug where stats weren't showing in admin area
Fixed bug where list bookings wasn't showing results in admin area
Fixed bug when saving blackbooking, audit function has been renamed. 

Jomres 4alpha3


Added mysql_query("SET NAMES 'UTF8'"); to integration.php to tell mysql that all incoming data is in utf8 format.
Fixed redirect in save register property to redirect to the new listpropertys link
Fixed template name in list propertys for administrator list propertys feature.
Fixed bug in addplugin (and on plugins server) so plugins weren't being installed.
Adopted tabber for property details tabs
Reworked Property Config options to put all options for what to show in their own tab.
Undid mininterval changes as they're naffing up init departure dates for managers. I'll revisit this issue at a later point.
Swapped published and unpublished images around.
Corrected link in receptionist menu to dobooking page.
Fixed incorrect call to jomres_audit in edit creditcard.
Fixed editbooking link after completion as with paypal fix for A2 the contract uid wasn't being passed to the calling function.

Jomres 4alpha2

Fixed issue where Jomres reported that the paypal booking hadn't been inserted when it had.
Added auto update of log files so that they're refreshed virtually in realtime.
Improved minimum interval handling in the booking engine.
Added option to show or not show the language switcher
Modified viewproperty so that booking a room link deliberately points to an invalid date when no date selected, this forces the booking engine to set the arrival date to today's date. Fixed period and fixed arrival dates propertys will see the benefit of this.
Modified admin area urls to use index.php instead of index2.php in Joomla.
Fixed logfile deletion functionality
Fixed filterform not working
Fixed bug where multiple room types weren't showing in property details.
Added caching feature, and Hazel's ssl tweak.
Added option to disable caching feature.
Added Hazel's checkbox borders.
Added jomres_cmsspecific_getTextEditor function to handle text editors
Fixed backend typo listproperties/listpropertys
Fixed image upload issue
Disabled a clause in the booking engine where if charge deposit is set to No, then the deposit wasn't being calculated. This is because a few folks are setting the show deposit to No, but still sending the deposit value to paypal/gateway. Commenting out this if out will mean that the deposit is still calculated, but not shown.
Added code to create/edit/delete coupons
General config renamed to property config
Minicomponentised the reception and manager options, and added the ability to have a user's minicomponent bar as well (needs testing).
Added extra checking to jomres_parseRequest for php://
Removed no_html from links to rooms, tariffs etc.
Added Hazel's changes to beauty tips
Improved the installer to create admin as a super property manager, and the drop tables feature to drop from the joomla components folder.
Moved exit if current cms not detected from integration.php to detect_cms.php, this will help when developing solutions for new cms.
Renamed admin's list_propertys to admin_list_properties.html as there's a conflict in the patTemplate jomres reader, the frontend template was being called because it has the same name.
Fixed (both Joomla and CMSMS) cms_specific handling, the users list wasn't returning the complete array but just the last person in the table.
Modified how the jomresConfig_absolute_path is detected.
Modified site config so that if detected cms = joomla then show the 404sef config panel.
Added a width element to imageonly popups to prevent flashing.
Upgraded blockui to resolve ie8 problem with the booking form.


Jomres 4alpha1


Major restructuring of Jomres to allow it to reference CMS Specific functions, which are included on start and are different depending on the CMS detected. Allows Jomres to be used in more than just Joomla. Jomres v4 is not backwardly compatible with previous installations of Jomres v3.
Replaced overlib calls. We'll now use jquery's beauty tips library instead.
Added custom fields for the booking form.
Added administrator area template editing, details are saved to the DB instead of to a file, so there shouldn't be problems with upgrading.
Added quantity selection for optional extras.
Added invoice plugin to core minicomponents
Added cronjobs and optimise plugin to core minicomponents
Added jomres language switching feature. 
Added on hover to property details page so that slideshow, rooms list and tariffs list don't need to be clicked to see them.
Added integrated search feature for non-Joomla users so that they've got a search function until such time as modules can be written for them. Joomla users can also use this feature.
Added Third party plugin installer to the Jomres plugin manager. Dummy plugin example to follow.

Deleted old php4 captcha file. PHP4 no longer supported by jomres.
Disabled show only availability calendar option as it's N/A for v4.
Added check for a define JOMRES_RETURNDATA. If defined, we'll add the contents of the output buffer to JOMRES_RETURNDATA_CONTENT instead of just flushing (echoing) what Jomres has generated.
Modified property list page variable to plistpage because "page" was interfering with CMSMSs default "page" and not showing the dashboard.
Fixed an issue where manager names weren't being correctly listed in edit profile associated with their property. The managers were correctly associated, just not listed correctly in the page.
Tweaked save normal mode tariffs so that single digit rooms are renumbered to 01, 02 etc.
Modified reg prop handling as using web dev toolbar to auto populate fields resulted in SRP always being selected as property type.
Tidied up some css (switched off that jomres_button)
Tidied up some code in the cms_specific_functions.php files
Removed the "loading" word from jquery beauty tips.
Added list limit config option to site config, and added a random search limit description to the language file.
Removed mapping link code from various scripts. 
Tweaked layout of property details a little. 
Removed old property_details html file.
Modified captcha minicomponent to remove old captcha images after session timeout.
Moved slideshow to top in composite property details.
Removed size limiting on popup images in tooltops
Changed thumbnail image size in slideshow.php
Changed wording in lang file to indicate that uploaded images are resized.
Removed some slideshow options as they no longer apply
Removed Itemid option, from now on we'll get that from the url
$mrConfig['returnRoomsLimit'] changed from the default of 0 to 1. Will make the default rooms list look nicer as only one room will be offered at a time. Old 0 for no limit still applies.
Rejigged both the booking form (added number images to guide users better) and reformatted the booking forms a bit.
Removed the booking rooms 2 tab complately. As we're using the horizontal rooms list now there's no need to have the overlib selection options. Room image and type image options moved to booking rooms 1 tab.
Added hazel's changes to remove dl/dt
Gallery link renamed to website link in lang files
Hazel's timestamp col changes for dobooking.
Images optimised for size, Jomres zip is roughly 1Mb smaller now.
Removed old tabbed composite property details. Whilst it was ok, it didn't work in IE.
Added detected CMS to showplugins script for when it calls the updates server.
Added horizontal rooms to booking form, doing away with the old "rooms list on the righthandside" of Jomres v2 & v3. 


<hr>

Jomres 3.4.5

Added Wellington to NZ Regions
Added code to switch to ssl when editing guest so that ccard popup done in ssl.
Added single person suppliment html to srp booking form.
Added Hazel's upgraded com_jomres.php
Added code to paypal submission script that uses they guest's country to guess the language that paypal should be presented in.
Modified showtariffs so that they'll show in a popup. Fixes bug introduced due to composite property details changes.
Modified elements shown in gateways tab so that they'll always be edited/renamed in touch templates, not gateways tab in General Config.
Added optimiation of save blackbooking data. Thanks Netized.
Disabled editing mode for one element in contact owner that prevents form from submitting if editing mode left on.
Modified booking engine. Fixed creation of departure dropdown when "Bookings are for a fixed period" = No so that the "Booking period" option is used (previously was hard coded to 7).
Fixed issue where price was being calculated incorrectly when MRP used Micromanage and several diff room types were selected. 
Removed engine=innodb declarations from install_jomres.php


Jomres 3.4.4

Fixed bug in 3.4.3 where property details wasn't being pulled properly from property description and associated fields.

Jomres 3.4.3 

Modified edit & save property so that entered property description and associated fields are saved to custom_text as per the current language.
Modified jomresGetParam so that functions.php jomres_reconvertString function allows us to reconvert some sanitised data back to a appropriate html string.
Tweak to fix Joomla pathway when showing the pathway module.

Jomres 3.4.2

Modified blackbooking handling to allow selectall checkbox.
Tweaked functions.php to ensure various conversion features only use jrConfig calendar input format for javascript calendars.
Added lang definitions for "Your enquiry" to contact booking form and lang files, removed hard coding.
Modified front and backend addproperty features to set default country and regions.
Added delete proprty link to super property manager's toolbar.
Fixed issue where custom property description not translating in list propertys/property details.
Modified avl cals so that they show in booking form when composite calendar is not enabled.
Modified ids of search dropdown country/region/town as old id="town" was causing the town input to not show in the booking form.
Modified search for Itemid so that it doesn't complain just because there are more than one reference to Jomres in the menus.
Added more debugging data to dobooking engine and added a check for fixed period bookings shortbreaks so that they only kick in if fixed period bookings option is enabled.

Jomres 3.4.1

Restored two elements (mrConfig['errorChecking'] & mrConfig['errorCheckingShowSQL']) to jomres_config.php because they were incorrectly removed in 3.4 but they are still being used by the redirect functionality. On upgrades this isn't noticable as these values had already been saved to the db, but on new installations it caused the redirect functionality to stop working, making Jomres more difficult to use.
Removed Jomres metadata handling. To the best of my knowledge it wasn't being used.
Minor tweak to integration handling so that new installations aren't producing errors because Jomres was attempting to insert settings to site_settings table before it had actually been created. Not a major issue in itself but could lead to some questioning of the functionality. 

Jomres 3.4

Added jquerycombo feature so that geographic searching can be performed via dropdowns that autopopulate. mod_jomsearch_m1 has been tweaked to be more appropriate to a banner/syndicate type module position.
Moved enabling of logging from jomres.php into Site Config.

Moved javascript calls into functions.php so that we can ensure that both jomres.php or j00030search.class.php are calling the same javascript files if needed.
Improved myuser's handling for listing bookings
Fixed issue in genericOr function which wasn't allowing all propertys configured to show after a search.
Added @ before any ini_set calls within Jomres. Some hosts are now disabling the ini_set feature of PHP, which is triggering fatal errors in PHP, the @ will supress this fatal error but Jomres might not then run as expected.
Small changes to db handling to ensure that results are unset after handing back.
Commented out some $mrConfig options in jomres_config.php that are no longer used.
Added contacthotel text to touch template handling in view property minicomp
Modified property header so that if the property's meta details are empty, then the property name is used to create the page title.
Removed blank option from room type dropdown in edit advanced tariffs page.
Modified touch template handling to output room type and room feature texts in touch templates. Removed same feature from property manager's Preview
Modified how post tariffinput is access to ensure that values are set to float when saving Advanced tariffs.

Jomres 3.3stable

Single person suppliment added to booking form. MRPs only.
Removed very old version notes from readme file and supplied link to the manual.
Modified how single person suppliments are applied when the sps is defined in an individual room, previously the sps was only applied once, now it's applied for every day of the booking.
Added optional switch email_when_done to componentArgs in guest and hotel email. Allows the email form to be called directly without actually sending it. Useful for previewing emails. See here for more info http://forum.jomres.net/index.php?topic=1087.msg4870#msg4870
Added new optional trigger 03500 to contact owner plugin which can be called when the contact email is sent so that admins wishing to use pay per lead can have a plugin (not available from Jomres.net but the framework is here if you want it http://forum.jomres.net/index.php?topic=1099.msg4864#msg4864)
Modified General Config so if the user is on Solo, then they're able to swap property types.
Changed logging task to $task, instead of the called url.
Added set memory limit to admin.jomres.php 
Changed jomresGetParams to use filter_var if the function is available

Jomres 3.3rc2

Rewrote a large section of code to make rooms transparent to SRP users. Means that they no longer see rooms when in property admin, and importantly, cannot swap from SRP to MRP in General Config.
Fixed issue where ; missing from an &nbsp; in showing room types in the property. Thanks Piranha
Switched on display of API key in front end property admin area
Room features tab in property admin switched off if SRP
Renamed SRP property types in room classes table on install from 1B to 1 Bedroom etc


Jomres 3.3rc1

Added ability for guests to cancel their own bookings.
Added an access check so that new users are prompted to log into the front end as admin. 
Added new temp folder in /components/com_jomres. Hard coded system log path to go to /components/com_jomres/temp as input filtering was messing around with paths on Windows based servers. 
Fixed bug in register property where it wouldn't submit if you left editing mode on.
Small change to registered user's menu so that the menu area is shorter.
Small improvement to new Profiles handling to list Super property managers correctly.
Removed ref to jomresConfig_lang when payment specific stuff being found as lang no longer stored against booking info.
Replaced / in installer with JRDS.
Changed description in ptypes table on install from "Hotel" to Hotel/Villa/Apartment.
Added back link to top.html
Added note advising no bookings exist if *gasp* the registered user hasn't created any bookings yet.
Fixed bug in upgrader.

Jomres 3.3beta1

By default new installations of Jomres have the minimised configuration option set to Yes. 
Reworded black bookings instructions to make a bit more sense
Added Joomla user name to booking details.
Added JOMRES_PHRASE_PROCESSING to gatewaypostage function
Fixed small issue with a css declaration in srp booking form referencing the wrong div, thereby allowing the "We have vacancies" to be come visible. Thanks Piranha
Removed erroneous delete of images from no longer existing images tables.
Completely rewrote the profiles handling functionality to make it simpler and more logical.
Modified settings handling for both mrConfig and jrConfig. All mrConfig settings should now by default be saved to the database under property_uid 0 on install/upgrade. Ditto for jrConfig and both jomres_config.php and site_config.php should only be referenced during install/upgrade.
Added new functionality to show all property details in one page (composite_property_details.html). As this is new functionality it is switched off by default, to enable it switch the site config option "Use Composite Property details" to Yes.
Added HDEPOSIT and DEPOSIT variables to hotel and guest emails. Not changed templates.
Fixed dodgy link for registration in J1.5.
Added new class custom_text. Fixed bug where constant DESCRIPTION was being input filtered to DEscr<x>iptION.
Fixed bug where the name of the default language file wasn't being found correctly in admin area.
Added some more tweaks to remove some options if we're an SRP because those options will just confuse an SRP property manager.
Bypassed a bug in IE where the editinplace input cannot be seen. Now IE users are stuck with using the popup input boxes, whereas firefox users will have it as editinplace.
Modified a couple of templates so that when Jomres tries to automatically close a popup IE no longer asks the user if this is ok. When Microsoft closes that loophole, we'll find another way around it.
Removed a stray echo from search functionality.
Fixed bug where property features aren't saved when a new property is created.
Set path in jomres.php for finding files to JRDS instead of /.

Jomres 3.2.3stable

Added check for userIsManager in feature icon generating option so that if user viewing property while manager has editing mode on, the captions and description of the features aren't listed and echoed after the icon.
Added check for euro symbol while saving. Input filter messes around with it otherwise.
Added simple email feature to savecancellation to advise that the booking has been cancelled.
Added check for "script" to add installer.
Added new word to lang file (Saving) and upgraded rc1 new editinplace functionality so that administrator no longer needs to be logged into the front end to use the editing functionality. If you're editing via touch_templates you also don't need to switch global editing on, or editing mode in one of the front end properties, it immediately assumes that you're global editing text.
Clarified wording in plugin exception message.
Fixed issue in unzip library where module xml files weren't getting installed on windows boxes.
Added tweaks to save feature settings as euro symbol was getting mangled by the input filter.

Jomres 3.2.3rc1

Added new editinplace functionality, switch back to the old style by editing site_config.php and set $jrConfig['editinplace']="0";
Removed an old js file that's not been used for yonks.
Added rebuild registry to installer to ensure new minicomponents are picked up straight away.
Fixed bug where contact form wouldn't work in IE7
Fixed bug where EMPTY showing in modules.
Removed a few unneeded styles in dropdowns now that jomres shadow background style has been dropped.
Resolved one final issue in booking engine where non-registered users we being recreated if their bookings were amended.
More small changes to delete guest functionality.
Modified integerSelect list to show 0 before numbers < 10
Fixed bug where wrong title for max rooms selected showing in Advanced tariff editing mode

Jomres 3.2.3beta1

Fixed path to BookGuestIn.png
Fixed a critical error where property managers reusing guest details were renaming all existing users to the new user's details. You are advised to upgrade as soon as possible.
Moved blackbooking functionality to Receptionist's menu. 

Jomres 3.2.2 - Nee 3.2.1

Improved deleteguest functionality to ensure room bookings are removed.
Wrapped single person suppliment output in confirmation within an if statement to prevent it from showing if value = 0
More admend booking tweaks. Edited checkDepartureDate function.

Jomres 3.2.1

Updated nl-NL lang file, thanks Ruud
Added search by price range functionality
Removed redundant property title output in reception bar
Modified MRPavailability calendar so that only when all rooms are booked then the calendar shows them as booked.
Modified search minicomponent so that title of page is changed only when option=com_jomres (eg, when a search has been performed)
Modified search minicomponent so that room and property types can be translated via touch template functionality
Modified deleteGuest so that all bookings are deleted if the guest's only open bookings are with the current property. If not, then the bookings will need to be cancelled for the other properties first.
Added some defaults to edit tariffs for min and max rooms already selected functionality.
Small modification to integration so that toolbars aren't shown on edit language popup
Updated booking engine with Hazel's tweaks to booking amendment functionality
Fixed bug where deposit couldn't be edited.
Tweaked title setting in search class so that titles are only changed with country, region, town etc are part of the search criteria.
Added check to jomresURL so if sefRelToAbs doesn't exist as a function, then to include the file that sets the function.

Jomres 3.2Stable

Added funky new icons.
Date picker now popups up the calendar on click of the input, rather than the calendar icon. To restore the old "click on the calendar image" functionality please edit functions.php and dobooking.class.php and search for the functions generateDateInput. In those functions you'll see instructions on what to comment out to restore the old calendar handling.
Removed jscalendar configuration options from front end, now only admin can change the settings.
Added "book guest in" option from view booking page.
Tweaked updates feature so that you only need to go offline when actually updating.
Added fix for SSL setting switching off booking form links, and support for ssl in J1.5

Jomres 3.2Beta2

Renamed language files to follow xx-XX language format.
Added functionality to autodetect the javascript language file for the javascript calendars. This is enabled by default, so if you don't want this to work in your existing installation please remember to edit the JS calendar option in Site Config and disable it.
Created plugin registration handling to reduce startup time for Jomres, relieves need for automatic discovery of mini-components and added a manual registry rebuild icon.
Added folder writability checks to Jomres control panel.
Added nocurl task so that users get a message advising that CURL is not available to the server.
Modified showplugins and updates so that the stop icon is shown if curl not available

Jomres 3.2Beta1

Added Plugins to new installs Joomla components dropdown menu options
Applied Hazel's tweak to amend booking.
Fixed j00017SRPavailabilitycalendar.class.php so that availability shown in calendar when task = remoteavailability
Modified j00018MRPavailabilitycalendar.class.php so that definitions from language file are used instead of custom text strings.
Modified j04910deleteproperty.class.php so that property images are deleted on property delete.
Fixed issue where slideshow images were not being deleted
Added error logging to drop image to log if unable to delete the image in the error log
Modified jomres.xml file to correctly show that the script runs natively in j1.5.5.
Added cancelled_reason to installer on installation.
Added check for session folder being writable in tempbookinghandler.class.php
Modified live site detection in integration (again) to get around some servers with sef enabled not finding the correct live site.
Fixed bug in dobooking where discounts for srps not recorded correctly
Modified list properties so that $maximumProperties is used when checking the limit of the number of properties, rather than just "100"
Renamed jquery.cookie.js to jquery.cookee.js to get around mod_security's false positives.

Jomres 3.1.15Stable

Added metatitle and metadescription (change these through Edit Property in Property Admin). Whereever property header is shown, these details will be added to the page.
Added code supplied by Hazel to correct buttons in administrator, allows them to wrap correctly.
Changed default of maxrooms_alreadyselected from 10 in 3.1.15beta3 to 3.1.15beta4 to 100.
Fixed issue in show_rooms.html where overlib wouldn't show room image popup.
Added missing marker in geocoder latlong template.
Modified number format output of total in guest email.
Modified captcha library to improve path finding for captcha images.
Fixed bug in Normal mode where you were unable to reduce the number of rooms of a give type.

Jomres 3.1.15beta3

Added Contact form link to property details template so even those properties that allow online bookings can receive emails from guests.
Added new feature to room details. Specific rooms can have different single person suppliments, which can come into play if the General Configuration Single Person Suppliments option is not set to Yes.
Added new feature to Advanced tariff editing mode to allow different tariffs to be offered depending on the number of rooms already selected.
Fixed room image output in rooms list 
Added missing define to german.php
Fixed dropimage function that calls db query where no longer required.


Jomres 3.1.15beta2

Modified the define used in the general configuration tabs title to use a define that actually says "general configuration"
Added mailto link for guest's email address in edit booking page.
Added new function getImageForProperty to make calling header and room images simpler.
Modified performance tracking in jomres.php, no longer governed by Joomla/Mambo debugging settings
Reworked integration's db and miniComponent handling to provide more accurate tracking of queries and their calling sources
Dashboard reworked to reduce the number of queries it performs
classes and functions reworked to remove unwanted globals and non-used variables
General code tidy up of integration, mainly replaced jomresConfig_absolute_path with JOMRESCONFIG_ABSOLUTE_PATH and other superfluous variables removed
General code tidy up of minicomponents replaced jomresConfig_absolute_path with JOMRESCONFIG_ABSOLUTE_PATH & removed references to  jomresAdminPath as it's no longer used.
Added email site manager on property delete
Added switch in booking engine, if booker is a receptionist/manager then they will see the full list of rooms in the booking form, whereas guests will see the rooms list limited as per the booking rooms tab option "Available rooms/tariff limit".
Enabled commented out code in list_guests.html to show link to edit creditcards.
Added captcha protected contact form for properties that do not allow bookings online.
Fixed bug introduced in 3.1.15beta1 where booking wouldn't complete because of a save guest error.
Added tariff title to rooms info in Edit booking.
Fixed bug in installer where rates table not being created.
Finally got around to removing the echo of an integer in the dashboard
Fixed bug introduced in beta1 where guests could not be inserted
Added a variable to the temp booking handler to record the type and values of the discounts. Modified contracts table to add same column (discount_details)
Tweaked property header to correctly show single and double quotes, modified getEscaped to adapt to magic quotes on and off
Modified jomres.js to correctly show text when in IE

Jomres 3.1.15beta


Modified integration.php. Added check in language selection for file_exists($jomresConfig_absolute_path.JRDS."components".JRDS."com_joomfish".JRDS."joomfish.php") when querying state of $_COOKIE['jfcookie']. We will only use $_COOKIE['jfcookie'] if joomfish actually exists on the server because if joomfish doesn't (eg it was uninstalled) then you're stuck with whatever language was last selected via Joomfish.
Tweaked mustregister plugin to offer Joomla 1.5 registration url
Fixed issue in SRP calendar where _JOMRES_COM_AVLCAL_OCCUPIEDCOLOUR_KEY text was output where it should have been _JOMRES_COM_AVLCAL_PROVISIONALCOLOUR_KEY
Added special requirements to booking advisory emails
Added createJomresPortalBookingsTable function to install phase.
Modified contracts table. Now contracts are not deleted when they're removed, instead they're marked as cancelled so that in the future we'll be able to pull cancellation data direct from this table for statistical purposes.
Modified Advanced mode tariffs. You can now set a specific arrival day that the tariff is valid for. 
Modified guest handling. Jomres.php should now detect if we have an existing guest and discern the correct address details. Fixes issue where guests weren't able to list their bookings (fix applies to new bookings, not existing ones)
Added some commented out code to list properties so that if you want to redirect to the booking form in the event that only one property is returned be a search you can uncomment the lines.
Fixed an issue where micromanage tariffs first tariff's "valid from" was being set to 1.1.1970
Upgraded user management so that super property managers automatically have access to all properties. If this is contrary to your existing working practices you can edit j00002usermanagement.class.php and change the line var $superPropertyManagersAreGods = TRUE;  to FALSE;



Jomres 3.1.14
Modified installer so that if com_jomres is in components table it's not reinstalled.
Modified integration script so that new propertty buttons appear for Unlimited users


Jomres 3.1.13

Changed integration and installer to recognise IIS when figuring OS
Added check for jfcookie & mbfcookie lang option
Corrected check for security defines in dutch.php so that it'll work on J1.5
Added PHP and NIS currency codes to function that edits commission rates
Removed extraneous check for mos id in get guest query
Fixed remote availability, brought it up to date
Added new function to pull month name to get around strftime not handling utf8 properly. Affects MRP and SRP calendars and dashboard month names dropdown.
Added defines for paging if j1.5
More tweaking to "guess the absolute path" code

Jomres 3.1.12

Fixed installer/integration error. Fired the person responsible but then nobody was available to make coffee so I had to rehire myself. Nuts.

Jomres 3.1.11

Replaced some left over sefRelToAbs calls in paging with jomresURL
Refactored the te_setAverageRate method to resolve an issue in micromanage mode where prices were being calculated incorrectly when bookings were being made and only one room type was selected.
Changed how absolute path is detected
Removed 00002 from the non-overridable minicomponents list, so that a plugin can be developed that allows Super Property Managers to access all properties even if they're not assigned to them.
Fixed a typo in the english lang files
Modified dobooking.php so that property managers aren't kicked into a redirect if then come into the booking form via one of the calendar links in dashboard or property details.
Fixed issue where new managers were not being added to the database on creation of a new property.
In plugin manager, replaced removeXSS with add_slashes for data passed back from upgrades server.
Added rel="nofollow" to calendars to prevent google from following the links into the booking form.
Added config option to misc site config tab for full path to the available logs folder
Added option to change path to logs
Modified MRP calendar so fixed arrival day option works in MRP calendar
Set emailing errors off by default
Modified logic so that if the jomres calendar scripts have already been called, they're not called again by jomres.php
Fixed issue caused by a previous fix that preventing pending book-ins from listing.
Modified how key.php is found. Removed preceeding slash
Tweaked book guest in functionality
Modified dobooking.php so that calls to domain.com and www.domain.com can be used interchangeably and should not cause an error in the browser.

Jomres 3.1.10

Changed how language selection is done. New option in site config to choose the language file to use, if $_REQUEST lang is set then it'll use that instead, else it'll use the lang file selected in site config
Updated lang files for lang selection in backend and updated french.php (thanks Marc)
Updated search.class with getSiteSettings
Updated listproperties with getSiteSettings
Tweaked bookguestin to not show blackbookings
Updated favourites functionality to not show blackbookings
Fixed dobooking.class.php so that all room features should show in booking form popup (thanks Hazel)
Updated plugin installer so that if module/bot etc don't install, it's recorded in the error log why, although an error isn't specifically triggered because that'll throw the user out of joomla altogether.
Fixed bug where paypal users aren't given booking completed message after booking made.
Tweaked installer to improve creation of image folders in /images/stories/jomres
renamed code2utf to jomres_code2utf to remove conflict with mosets tree
Modified date input function for validation
Modified booking form to show avl calendar underneath the form. Modified both avl calendar scripts to not show links when on booking form.
Modified guest email to put commas after each room name/number
Modified plugin installation functionality to perform dependencies checks if available.
Modified updates script to show if site not offline in J1.5


Jomres 3.1.9

Modified minimised config feature so that Super Property Managers still see the full options.
Added Edit Language manager's option to minimised config exclusion
Added tweak for Joomla 1.5 joomfish so that if Short Code in Joomfish's language selection is set to the appropriate language, eg "english", "german" etc then Jomres will switch languages.
Fixed jr_gettext call in languages for month translation
Fixed a few calls to jr_gettext in confirmation script so that if editing mode is on then that doesn't break the form.
Tweaked editbooking to show amend booking icon
Removed some hard coded text from booking confirmation form.


Jomres 3.1.8

Upgraded plugin handling, allowing us to supply modules/mambots/minicomponents directly from the Jomres backend.
Replaced removeXSS with add slashes, resolves issue where some site settings not saving correctly.
Tweaked MRPavailability calendar so that link to booking room shows when half full.
Changed number filtering in 610paypal to number_format
Added code to detect plugin types to allow us to not show uninstall link for external plugins
Added code to booking engine so that if the filtered Id of the extra has a number as the first char then an X is added to the beginning, and if the string is empty, then a random string is generated.
Fixed issue in checkin times where checkin details were not showing correctly.


Jomres 3.1.7

Fixed bug where paypal tmpbooking object not available
Improved micromanage -> averages calulation when multiple room types selected
Now setting jomressystemlog path in jomres.php
Fixed minor bug in j01010listpropertys.class.php where multiple SDI inserts weren't being added correctly to property list template
Modifed j06000save_normalmode_tariffs.class.php so that in normal mode tariffs are not created when there are no rooms for that tariff
Added strip slashes to show plugins description output
Added check in booking insert functionality to check if a room wasn't double booked while the customer was paying. If it was, then this should trigger an error.


Jomres v3.1.6

Tweaked wording in installer to refer to Mambo/Joomla
Returned the magical disappearing minicomponent calls to j01050 (google maps)
Removed erroneous call to sefreltoabs from search functionaity, replaced with jomresURL
Reset testing download variable in update script to false
Modified functions.php dirmv function, set overwrite to be true by default
Returned the magical disappearing lat and long inputs to the edit property template
Added use Jomres email check to site_config
Commented out tmpBookingHandler->tmpbooking["property_uid"]=$property_uid; which was causing incorrect guest uid report in booking form
Modified the content tabs class so that if anchor is found to be empty after stripping out non-alphabetical text, then it uses the random string generator to create a random anchor.
Added mysql error reporting on event of unsuccessful doInsertSql
Added Hazel's tweak for next day property free in booking engine
Replaced calls to mosHTML with jomresHTML in cheque gateway
Changed session_start in list properties script
Restored handling of zips to add plugin so that we can manage directories within plugins
Disabled directory emptying in show plugins
Added check to ensure that the server's offline before running the upgrade process. Because jomres.php can now remove install_jomres.php we need to tell the admin that they need to run it, if the server's online then there's a chance that a site visitor will inadvertently remove it before admin's had a chance to run it.
Tweaked dobooking to remove property uid discovery
fixed table errors in email templates

Jomres v3.1.5

Changed default chmod to 755 in the dirmv function
Tweak license checking for IIS users 
Changed method of selecting value of country dropdown in register property template
Added updates folder to installer check
Added file_get_contents to functions.php
Updated plugin handling functionality for greater reliability
Updated lang files with new per person per night define
Fixed booking handler so that saveGuest works after resetting the guest details
Added test for plugin_unisntall.php to dropplugin function
Changed how the tmp booking hander's property uid and selectedProperty's id are compared, changed so that both are typed to an Integer during the test.
Tweaked jomres.php so that if possible it'll try to remove out of date/installer scripts on the server if possible.
Removed extra , in showRoomDetails check when discovering property uid
Added processpayment to discovery of property uid from tmp booking handler 


Jomres v3.1.4

Changed method of selecting value of country dropdown in register property step 1.
Re-enabled session method warning for Joomla 1.5
Inserted checks for function exists curl_init to disable remote plugins and updates if curl not available
Added section to test if task = showroomdetails then find the property uid by querying the roomuid

Jomres v3.1.4beta

Added extra notes to installer, enabled prefill of license key on existing installations, added installation of site_settings table
Suppressed error notice when trying to create sessions directory
Site config now saved to database
Added prototype remote plugin handling
Changed timeout (again) in session handler for J1.5
Reformated most of lang files so that they're not recorded with BOM
Added BOM stripper to jomres.php
Fixed misalignment issue in dobooking.html (thx Hazel)
Changed mailer class so that default output is utf-8
Added webinstall script existance warning to jomres.php
Tidied up backend Control panel, changed license server query so instead version data is pulled from updates.jomres.net
Fixed issue in jomres.php where globals for logging settings were not properly declared.
Added check to ensure that license key isn't being changed from the front end


Jomres v3.1.3

Added upgrade feature
Fixed bug in srp dobooking showing noscript warning
Moved location of setting success subject in paypal plugin
Fixed path to noimage in room details
Modified session_start in case server cannot start sessions without session being set to file
Changed paidAmount in paypal to float by default.
Fixed installer not creating data in components table

Jomres v3.1.2

Fixed unable to delete guests bug
Added check for joomla 1.5, if so then minutes setting is recalculated to seconds for session file timeout
Added Itemid to link to booking in hotel email
Reworked logging so that path to change how path to log files is found. If you are upgrading and intend to reuse your existing site_config.php, ensure that the $jrConfig['jomres_systemLog_path'] variable in site_config.php includes the full path to your system log, eg /var/www/html/media/, not just /media/


Jomres v3.1.1

Added fix for paypal IPN not working, involved creating whole new pseudo-session management code for tmp booking handler

Jomres v3.1 Northendnairn Edition

Added hazel's Northennairn Edition templates and css file and tweaked minicomponents
Added createJomresPortalBookingsTable check which resolves issues with users upgrading from pre-2.7 versions not having correct tables installed re portal
Moved slideshow default location to show below property header. Added switch to backend site config to offer option of above or below property details.
Enabled creation of subfolders for new property types and copying of default lang file to same folder automatically
Modified to allow switching off of cookies in content tabs (useful if SEF or other module functionality breaks handling of the config tabs)
Fix Added code for fading in extras 
Fixed bug where room types named incorrectly when set to links in search modules
Added extra code to check that lat/long isn't empty 


Jomres v3.0.6

Renamed availability calendar scripts, renumbered composite calendar call to 18 in viewproperty 
Added detection to change JOMRESPATH_BASE so that any trailing slash is removed. 
Removed indicator from overlib alt
Fixed output of discount so that room type description added to text about room type being discounted 
Tweaked some output of english.php regarding discounting in the booking form. 
Added extras container to fade out 
reverted to old star as it has transparent background 
Modified for Hazel's additions to viewproperty, puts outputted data into variables for conditional output. 
Added Center tags for SRP availability calendar
Added calls to language files for modules
Added strip slashes for dropdown/link outputs
Added center tags for MRP availability calendar 
Added hazel's conditional output so that links can show in property header 
Changed variance from jomresGetParam so that variance can be float 
Changed bookout extra services extraction so that they are not number formatted 
Changed path to edit item image for amend booking 
Minicomponentised slideshows 
Edited geocoder_latlong.html to fix output 
Made show smoking option No by default


Jomres v3.0.5

Fixed bug where room image isn't showing
Removed unneeded task=
Removed /administrator/ from path to site_config
Enabled output of reg instructions as button so that it doesn't cause a js error if editing mode is on. 
Added check for singleproperty so that solo users cannot create a new property 
Added extra checks to try to detect if user is custom editing and entering nothing. 
Modified paypal to set deposit required to float
Modified search to resolve issues with 1.5
Modified view property to show google maps
Modified jomres.php to minicomponentise self registration and being inline registration. 
Added lat and long to edit property inputs, table and geocoder output 
Added touch template functionality 


Jomres v3

Modified how a new property is created. Functionality now uses frontend register property steps which allows use the ability to set the SRP flag from the outset.
Encryption option in General Config removed, encryption key replaced with jomresConfig_secret (aka mosconfig_secret). If you have previously stored any creditcard data in the database it will no longer be accessible unless your mosConfig_secret is the same as that used in the old encryption option field. For this reason, you are advised to manually copy/print out any saved creditcard details that you want to retain and re-enter them manually after upgrading. If you do not, you will NOT be able to retrieve previously stored creditcard data.
Added property specific stats to front end manager's bar
Added email checking facility so that guest and hotel emails do not cause 500 error if one of said email addresses is invalid
Added option to jr_gettext "2". If $jrConfig['utfHTMLdecode']='2' then text is passed back as is pulled from the db, without it being modified by either the html_entity_decode or jomres_html_entity_decode_utf8 functions
Added feature to email errorlogs to bugs@jomres.net
Added check in editproperty script so that if user only has one property then they are unable to delete this property. 
Added more icons to installion process so that SRP and non-SRP specific room types are added by default. Added many more property features that are inserted on install
Fix booking out form, added pricing for rooms, replaced invoiceform script with reuse of book guest out script, as that already has the relevant calculations in it.
Added button in edit guest to enable emailing of confirmation form to guest (backup sent back to hotel, in case the hotel's email is different to the receptionist's)
Added guest numbers to confirmation form and initial emails.
Added html emails. To revert back to the old email settings uncomment the currently commented out text in the hotel and guest scripts, comment out the new code for calling the template, and set $mode=0
Added translation of room type for super property managers
Changed output so if no rooms available, you get a meaningful message, not just the empty list.
Added framework for remote access (to be implemented at a later date)
Huge rejig of file locations moving nearly all of them into the front end. Allows administrators to use .htaccess protection of administrator folder if required. All previous minicomponents no longer applicable.
Implement new defines for template paths, use a j00001 minicomponent to over-ride the defaults.
Minor tweaks to make Jomres work on Joomla 1.5RC4 Nightly 7th Jan
Removed hard coded links to administrator, replaced with JOMRES_ADMINISTRATORDIRECTORY
Added j00001start, which defines paths to templates and administrator folder, so the name of the directory can be changed and links should still ref once this file is modified


Jomres 2.7.5.1

Renamed internal function html_entity_decode_utf8 to jomres_html_entity_decode_utf8

Jomres 2.7.5

Integrated portal functionality into backend. Supplies some stat information on individual properties, plus overall information. Allows setting of commission and integration with forgeign account systems (currently, only nbill).
Added jomrestoken to many areas of code to defend against CSRF (See here for more information http://forum.joomla.org/index.php/topic,248109.0.html)
Added alternative gregoriantojd function
Modified search functions to pull Super Property set code modified in Edit Language task 
Fixed issue with deposits set to 3 decimal places failing paypal confirmation
Added Itemid to hidden output of modules
Some performance tweaks, uses thisJomresProperty instead of making independant queries 
Commented out not logged in message 
Added property uid to test property details function, fixes issue where property name not shown correctly 
Switch off echoing of setting changes 
searchAll added to countries list 
Fixed bug with edit room feature not working 

Jomres 2.7 Stable

Switched off SSL in joomla. Joomla forgets the user when switching from http to https, therefore managers are unable to switch without their details being lost. Unable to perform manager bookings.
Added more options to weekend days.
Un-included configuration.php again.
Fixed customer type order not being saved.
Changed query to order guest types by Order.
Removed duplicate define
Added some simple debugging info .
Tweaked amend booking functionality.
Added note to upgradeWarning: Also note that due to the addition of the Extras models into the core code, if you are upgrading from below 2.7 you'll need to edit your optional extras to normalise them against the new tables (just go into each extra and click Save).
Fixed favourites couldn't be added if someobody else already had a property marked as a favourite. 
Changed buttons options so that if in popup the cancel booking button is available (so that booking can be cancelled from blackbooking)
Changed format of jrgettext for view black booking link so that link is clickable if editing mode on. 
Fixed genericOr call not passing "false", was stopping occupation showing in composite calendar. 
Updated getAllBookings, fixedDaysArrivaldateDropdown, calcPeriods etc with Hazel's contributions. Modified code allows us to select historic as well as future dates in fixed arrival dates dropdown in booking form.



Jomres 2.7 RC 1

Added booking editing functionality. Well played Hazel!
Added remote availability plugin to Jomres Core
Commented out Global Features and Global Room types options in backend site config. So many features in Jomres rely on these options being set to Yes that it's best to remove the option to set them to No.
Added option "Minimise configuration options" in site config. Allows the site manager to present a minimised set of options in the General Configuration. Means that there are less options for Property managers to play around with, and the Gen Config page renders faster in the browser.
Integrated last minute plugin into Core code. This plugin is only available to SRPs, whilst Wiseprice is now only available to MRPs.
Added code to output discount information to property list and view property pages
Added option in general configuration which allows output of Verbose tariff info or a simpler list of tariffs
Changed the conversion link from google to xe.com. xe.com offers conversion options to many more currencies and is a better interface.
Integrated enhanced tariffs into core system as "Micromanage" tariff editing mode.
Added warning to install_jomres.php if upgrading RE the new tariff modes.
Change "room" types are reworded in the language file to "room/property" types.
Change css file to show black on grey instead of white on grey.
Change link in property details to show rooms list instead of calendar in popup.
Change jomres.php to show full room details when room availability link clicked.
Fixed some issues with displaying audit table
Removed jquery interface functionality as not compatible with jQuery 1.2. Booking form rooms list behaves slightly differently, but not much.
Added code to remove guest data from session if user is manager when going to dobooking again, add resetTempGuestData to session handler.
Integrated cheque/payoffline plugin into the core build.
Fixed Resolved issue with occasionally temp guest data not being passed to booking confirmation page. 
Fixed duplicate bookings when form used in IE issue.
Added bolds for tariffs not passing in booking form logging.
Added file detection for three files that need to be removed after upgrade.
Added flag to genericOr to disable (int) option if the data passed to it isn't an array of integers.
Modified availability calendar so that the dates passed to genericOr function aren't set to integers. 

Jomres 2.6.3 RC 1

Added SSL switching for booking form
Debugged installer on new install checking the license key before it has been created
Modified default templates so that they're all set to Basic. We'll let the template override take over from now on.

Jomres 2.6.3 Beta 1

Added code for flash area. This is a less featured but more robust alternative to the sometimes buggy javascript editors
Added code to enable switching manager's menus to text mode
Added new functionality whereby default room/tariff administration is the new "Normal" mode. Provides a simpler way of administering tariffs for new users. Experienced users can switch to Advanced mode (General Config -> Tariffs and Currencies tab) to edit rooms and tariffs and create room features.
Added option so that Room types can be designated for SRPs or not.
Added room details list to Property details page.
Converted booking notes functionality to work as part of Jomres Core
Converted my user plugin to work as part of Jomres Core
Converted Extras Models to work as part of Jomres Core
Converted Wise Price to work as part of Jomres Core


Added lang definition for sort order.
Added country to property details.
Removed incorrect description of icon sizes.
Modified composite calendar. Changed getParam for task from "" to 0. Should stop calendars from opening the booking form in new windows.
Modified integration.php to force inclusion of configuration.php so if Joomla's globals emulation off fails then Jomres will STILL use the local configuration.php to find various settings.
Fixed issue where existing guest's region data wasn't being pulled from system by the manager's select guest dropdown in the booking form.
Curl fixes.
added image sorting.
Fixed issue where room features not showing in room details on booking form.
Added option to rooms config to enable translation of room features, and added same to booking engine to show changes.
Fixed added line to allow change of the registered language when the booking form is reloaded. If users switched from lang A to lang B the overlib would continue to use the data as per lang A.
Fixed issue with non-editor custom code only saving 1 and not the string.
updated slovak.php Many thanks to mojeslovensko for your hard work.
updated danish.php Many thanks to Ronny Buelund for your hard work.
Removed reference to jrConfig Itemid in pathway minicomp as it was causing Mambo to lose the Itemid.
Booking engine re-enable error logging.
Removed hard coded currency format, replaced with new definition in language file.
Corrected notes for paypal integration.
Added code to refuse deletion if only one property on system
Modified installer to check for NULL tables in SHOW TABLES
Added code to pull today's date from cookie/request if possible when listing properties. Should allow us to output prices from the search dates if available.
Added thursday/friday and thursday/friday/saturday as weekend options
Moved some files into /components/com_jomres directory
Converted more hardcoded elements in backend to language defines
Moved patTemplate dump option to backend
Removed css tab completely as dump template vars option is now in backend, and diff templates feature is replaced with template override feature. If you are upgrading it is advised that you physically remove the file j00501css.class.php as it cannot be removed by the installer. If you do not remove it you will simply find that it's settings no longer have any affect.
Forced $mrConfig['templatePack']="basic"; in jomres.php
Clicking Submit/Save in Edit Property page now takes you back to the edit property page so that you can continue editing.

* RE flasharea: Jomres uses the file jomres.xml in components\com_jomres\libraries\flash_area\resources\FlashArea\options Documentation can be found here: http://www.tufat.com/docs/flasharea/index.html

Jomres 2.6.2 Stable

Added fix for bug reporter
Added code to query number of properties to enable Single Property version
Removed engine type from table create routines
Removed Itemid from booking forms
Fixed bug in BlockUI code
Added new jquery.js 1.1.4 for improved performance

Jomres 2.6.2 Beta2

General tweaking of new temp booking handling.

Jomres 2.6.2 Beta1

Added noscript Meta tag to booking form to redirect on user having javascript disabled
Added jQuery blockUI functionality for better feedback
Added session handling for temp bookings plus other booking engine tweaks for performance
Added pathway minicomponent
Removed HTMLPurifier
Removed AjaxRequest, replaced with jQuery's ajax handling. Much faster.
Modified booking form. Address details are not added during the input filling stage. Instead they're added on submit.
Modified input filtering. 
Modified converted some of the javascript files so that they are compressed. Fullsize versions are still available.
Modified publish function moved out into minicomponent
Modified changed permissions so that Super Property managers can create new properties, even when backend config disallows managers from creating properties
Two new flags in site_config: $jrConfig['disableAudit']="0"; $jrConfig['dynamicMinIntervalRecalculation']="0";


Jomres 2.6.1 Stable

Modified Numerous changes to improve validation
Modified Numerous changes to allow functionality within Mambo 4.6.2

Jomres 2.6.1beta2.1

Modified Upgraded self registration functionality to work with this version of Jomres
Modified Disabled sample data install in Cpanel. Sample data is created on install so no need for this now
Modified Added slashes to specialReqs

Jomres 2.6.1beta2

Added Hazel's property list sort ordering
Added New weekends only flag for tariffs
Added setini memory limit to jomres.php
Added searchAll variable to all lang files and search funcs
Modified colour picker, was causing problems in Ie and causing the General Config panel to load slowly.
Modified disabled requirement to enter license key when on localhost
Modified tweaked various froms in an effort to make it so that you only need to edit the css declaration .innerwrapper to modify the overall width
Modified added logManager functionality to core Jomres build
Modified changed rooms list for composite availability display. To revert to the rooms list for those users who wish to keep it, remove the existing j01050showroomdetails.class.php and rename xj01050showroomdetails.class.php to j01050showroomdetails.class.php
Modified Upgraded backend CSS handling to that contributed by Jaap.
Modified Property header script. Now property name is added to title of page whenever property header is shown
Modified Moved recording of error out into own func and added recording on E_ERROR_USER
Modified license handling. If license not valid only backend functionality is affected.
Modified Improved how all Property Managers are updated to new manager->property xref tables
Modified added quotesmart to special requirements
Modified Added number of guests to cpanel
Modified Itemid selection. Now the Itemid should be pulled correctly from $_REQUEST
Modified added Selected option to filterForm
Modified Moved the rooms list fields to top for SRPs
Fixed issue where super property manager dropdown wasn't offered
Fixed issue where dates weren't filtering in audit log
Fixed issue where some audit logs were not being moved to audit archive
Fixed Resolved bug where both vacancies and no vacancies were showing for SRPs



Jomres 2.6.1beta

Added new optional event trigger 01009. This is parsed in the property list minicomponent, allows us to create minicomponents that can re-jig the property uids list order before the properties are output.
Added bug reporting for super property managers to core of Jomres
Added selective property manager handling. Property managers can now be specifically assigned to different properties, rather than the all or nothing method that used to happen. Admins need to edit the user's default property to set them to a Super Property Manager (new dropdown at top of page).
Added utf-8 encode to month name output in availability calendar. Resolves issue where the wrapped function outputs in an incompatible charset. 
Modified manager & receptionists images upgraded. Thanks to Jaap (http://www.ohmprint.nl/) for this contribution.
Modified control panel in backend. Thanks to Jaap (http://www.ohmprint.nl/) for this contribution.
Modified tab object so that tabs are run by jQuery. 
Modified Moved noConflict setting for jQuery into jomres.php.
Modified moved email to below telephone number inputs
Modified Many changes to booking object to allow for faster querying properties with multiple rooms and tariffs
Modified if defined statements to allow for JBASE_PATH already being defined and current framework is not J1.5
Modified gateway handling to allow for renaming of gateway name in config tabs
Fixed dutch javascript calendar
Fixed description search

Note, if you are using a custom/template override and upgrade to this version of Jomres you need to modify your dobooking.html & dobooking_srp.html files and add
var ajaxurl	= "{AJAXURL}";
under where livesite is defined. Failure to do this will result in your booking form stopping working.

Jomres 2.6.0.2

Added jQuery to booking form, rooms list slides up and down while changing, and guest details input hides when room needs to be selected
Added test for pid from tmpbooking so that correct property type specific language file is called when doing bookings
Modified rooms list, changed position of room details overlib popup from below right to above left
Modified Added license key check to installer
Modified added ability to edit custom text one tariffs title and description
Modified added ability to edit rooms config: room names custom text enabled
Modified added ability to edit guest types, custom text for name and notes
Modified custom text editing. Edit in place removed, links now open in _blank, and custom text is identifiable by class, click on text to edit it.
Fixed implode variances issue. More than 2 variances was causing prices to calculate incorrectly, so commented out meaningless check that was causing this.
Fixed custom text not showing in property list when not logged in
Fixed issue where when allowing short bookings, 7 was in dropdown but staydays was set to 4
Fixed issue where users unable to delete properties


Jomres 2.6.0.1

Added Added align="top" to td to dobooking.html
Added Property type language file selection.
Added detection of the function JRHPbot. Allows to switch off certain buttons if the Jomres/Hot Property synchronisation bot is detected
Added more property types to install script.
Added connectivity test to integration.php and improved feedback from same in the event of license key failure
Modified edit-in-place so that large strings of text are inserted into textareas, rather than input fields
Modified Edit & save properties minicomp triggers moved to jomres.php
Modified Moved language file selection into jomres.php
Modified makefeatureimages to allow translation of property features. 
Modified Reversed if defined check for JPATH_BASE
Fixed install script not dropping tables
Fixed property description not showing in property list


Jomres v2.6 Stable

Added mambot handling to property details (all textbox inputs) and list properties, property description
Added option to make target blank if in popup for Availability calendar 
Added property delete button to property admin, property tab 
Added room images to booking form overlib buttons
Added creditcard type handling to Form component
Added index.php?option=com_jomres to various backend template files
Added russian.php
Added translation functionality to listproperties for property description.
Added 05020 mcOutput functionality for adding customOutput_XXXXX to the booking form
Added limit 1 to property details query 
Changed the event trigger for form insert data to 05019 
Changed the availability cookies, added / and jomresConfig_live_site to path
Fixed inability to save black bookings (again)
Fixed issue in form component where unregistered users were causing a fatal error
Fixed issue where prices greater than 1000 resaved as 1 in Extras

Jomres v2.6 RC4
Added code to allow new license types
Added html editors to edit property fields
Disabled clone option for rooms showing when SRP
Resolved issue where guest's details were not being stored until their second booking
Created new trigger point 05020, which in the base install includes dobooking.php (which initially constructs the booking form).
Created new trigger point 05010, which in the base install includes handlereq.php (which receives the ajax calls from the booking form).


Jomres v2.6 RC3.2
Added connectivity testing to install_jomres.php. Allows us to test connectivity to the license server and identify any possible firewall issues right at the beginning.


Jomres v2.6 RC3.1
Resolved date in search form/booking form sometimes vastly in the future.
Resolved encryption key being saved but <?php not being saved to the encryption key file


Jomres v2.6 RC3
Modified booking form. Restored function that resets the selected rooms list as tariffs were not being reset properly when another date with a different tariff is selected

Jomres v2.6 RC3

Modified the mininterval functionality. Properties using flat rates will find the min interval set to the lowest min days found, average rate the opposite.
Tweaked the jomres hint menu output to resolve issues with ' (apostrophes, eg in french lang).
Added room_total, discount & currency code columns to contracts table, this info is now passed from the temp booking to the contracts table.
Added 00050 event trigger for non-authorised, registered users so that they can see menu options.
Added extended indexs for Jomres tables.
Added global currency code & symbol. Preperation for portal functionality, allows for a global currency code if required.
Added metatitle to property description page.
Added isInIframe config option, allows users to use Jomres within iframes.
Fixed annoying message about mysql when changing a user's default property/access level.


Jomres v2.6 RC2
Number formatting. Added the option to choose your number formatting style, go into General Configuration -> Tariffs and Currencies to choose your number output style.
Booking form minimum-interval calculation. While searching for tariffs the booking process will remember all of the minimum days in the tariffs found and set the internal mininterval flag to the lowest figure found. This is expected to be useful for those properties that want to set the mininterval flag (IE the minimum number of days in a booking) to 1 for most of the time, but make it longer, eg over specific holiday periods by reacting to the tariffs found for a given period.
Modified the key generation code. For some reason, during keygeneration the http:// was being retained when the key is first generated for the hostname binding, but then it was being tested against the domain without the http://, consequentially installation was often failing. I've modified this by stripping out any occurances of http:// during the key gen process. 
Added code to stop already selected and still available rooms from being removed when a booking particular (eg date, guest numbers) has been changed.
Added xml logging. There are 3 types of logging: request (everything from $_REQUEST), system (various ad hoc values, as needed during dev/testing), gateway (logging for gateway calls), and booking (various booking log data is recorded). Logging files are currently written to the /media folder, this will probably be expended in the future. If you want to switch loggin on, edit jomres.php  and change $loggingEnabled to 'true';
Fixed a bug in insert booking function where jomressession wasn't always being passed to the script, therefore the booking wouldn't insert
Modifed functions.php getCurrentBookingData so that it would simply return, rather than exit, if jomressession is not set.
Fixed paging, starts on page 1 now.
Removed number_format from dobooking_functions, except from the overlib generation and extras output code.



Jomres v2.6 RC1
Fixed IPN not being confirmed correctly
Fixed unable to cancel booking
Added query to beginning of admin.jomres.net to check for the length of the license key, if it isn't set then task is set to showSiteConfig. 
Added Jomres control panel tabs object
Added departure date cookie
Major changes to allow operation in both Joomla 1.0.x & Joomla 1.5. Whilst Jomres now appears to work with Joomla 1.5Beta 1, none of the plugins do (need to create new 1.5 compatible installers)
Major changes to database query functionality to improve performance
Major changes to the basic template
Reworked dashboard calendar to improve performance
Reworked list propertys mini-component to improve performance
Reworked all of the front end templates so that their colours can be edited through a css file
Fixed users entering ' into booking form causing javascript error (Gratz Hamish)
Fixed installing sample data query bug
Fixed paging in search results
Fixed US room tax functionality
Modified search functionality: If the availability search is used in combination with the room type search then properties without an available room of requested room type are excluded from the results.
The non-basic templates aren't getting updated and the template overrides are a better method of creating your own template. They have been removed, if you want your own look for the Jomres then it is highly advised that you install the basic template override pack and edit that.
Removed the css config option introduced in v2.0. 
Room list generation output split into two to allow rooms list to be presented side by side if required (Gratz Hazel)


Jomres v2.5.0.1

Changed jr_gettext function to return data html_entity_decode'd so that html can be used in various input fields
Changed Extras ajax call from getResponse to getResponse_guest to prevent the rooms field from being hidden after an extra is selected.
Changed how special requirements are handled.
Changed booking out page. As Jomres' main focus is on the taking of bookings, rather than the hotel admin side of things, I felt it was wise to not spend too much time on something that's rarely used, so reduced the amount of information stored there.
Changed dashboard cookie expiry to 1 hour
Changed added guest numbers check to average rate method
Changed allowed super property managers to make bookings on properties different to their currently active property (switches active property then redirects them)
Ensured that booking engine uses the jr_gettext function, rather than the built in function.
Removed show_log that was appearing twice in jomres.js, causing the log output to be triggered twice in the booking form when some elements were selected
Removed a couple of information elements from certain pages as they are now covered by the Context Sensitive Help mini-component.
Fixed listproperties, wasn't finding the property image
Fixed savehotelsettings wasn't updating new settings 

Jomres 2.5

// Stable
Various bug fixes
Changed how general config is displayed and updated to speed up update time. General config still slow in IE due to IE not rendering the javascript colour pickers quickly enough.
Function to get property specific settings modified to import mrConfig 
from jomres_config.php. This is because imported properties will not 
have a complete set of settings imported. It also allows us to only 
insert settings that are pertinent to this property in the settings table, 
allowing us to set a given setting as the default in jomres_config.php.
Only applies to properties created after install of this version of Jomres.
Improved averaging model method in booking form.
Modified jomres.php so that in the event that no property data exists it will 
search for a trigger 06000 so that an import function can be used.
Added option to override "task" with "task2" if required in jomres.php. Not currently used, 
but gives us possible future extendability.



Added jomres_toolbar class - very pretty
Added phpDocumenter tags
Added lowest tariff price to listproperties
Added more property details to listproperties
Added mini-component collision detection
Added module 0 to module pack - Allows for searching within the component area
Added wildcard searching on dropdowns
Added new image uploading class - Image Fullsize image width is set in backend, as are the slideshow choice and popup sizes, gives webmaster more chance of attaining a consistent look to their site. 
Added if errorchecking on then output to text file in /media/ with logs
Added CURL to license communication routines. This is for users who don't have access to fopen to use Jomres.
Changed moved averaging and flatrate calculation methods into dobooking_functions and added config option so that property managers can choose their tariff model
Changed tariff handling so that template overrides can be provided in one file instead of seperate files. Important, see readme.
Changed Put averaging & flat rate methods into jomres_booking object, added configuration option to Tariffs config panel to choose one of these models
Changed refactored the search functionality so that it's one of the mini-components. The search modules as a result have had to be rewritten, if you use the search modules then you'll need to download and install the new m1 -> m4 modules. To get searching in the content panel install the m0 module (READ THE NOTES!) 
Changed room & tariff editing functionality to mini-components
Changed booking confirmation, insert and completion to mini-components
Change paypal insert of booking. The insert of the booking is now performed at the IPN stage, as the payment is confirmed here anyway. It saves users who navigate away from the paypal payment screen without returning to the jomres site from loosing their bookings. Now returning to the jomres site simply takes them to the booking confirmation page.
Change managers can now search while logged in. If they are a super property manager then when they click to view a property then their active property will be changed to that property
Redesigned the listpropertys template a little


Jomres 2.4
Fixed Tariffs showing tariffs stored as weekly charges if you have pre-v2 multiplier set
Fixed 1.0.10 forcing tariffs to be stored as integer

Jomres 2.3
Some changes to harden against XSS attacks
Some changes to ISO handling.
Fixed hardcoded message in booking form
Fixed core minicomponent gateway icon not showing
Fixed unable to confirm paypal payments
Optomised the availability calendar

Jomres 2.2
Fixed wrong file name in warning when saving config.
Fixed Joomla 1.0.10 bug where clicking on a date don't provide correct date in booking form.
Fixed Black booking not saving
Added livesite variable to booking confirmation template variables
Fixed list bookings showing Black bookings
fixed email not showing rooms
Fixed paypal currency code being sent incorrectly
Fixed jomres.php calling wrong javascript calendar
Improved messages from installer


Jomres v2.1
Fixed unable to view any properties when all properties unpublished
Fixed various license number issues
Moved property header into it's own mini-component
Added option to override show tariff template
Fixed Single person suppliments



Jomres v2
Added: Subversion
Added: Completely new booking process
Added: Customer/guest types
Added: Option to put rooms lists/availability in a new page/popup
Added: Css styling

Change: Guest types can be ordered

Removed: Adult/Kids numbers, replaced by Guest type functionality

Jomres v1.4i

Added: Created new functionality option: Show detailed room information? 
Added: Functionality to show available tariffs, instead of rooms.
Added: New template file: bookings_showavailability.
Added: Completely rewrote the search functionality.
Added: Google currency conversion links to tariff popup/page.

Change: Moved Tariff admin into the Property Admin tabs
Change: Reordered Property Admin tabs to make Room type relationships more logical
Change: Bolded Room types to make them more obvious


Jomres v1.4h

Added: Form input validation for booking form
Added: Bulk language modification script
Added: Default country for booking form. Setting: Misc in General configuration
Added: Code to change basic text (eg property description) to allow translation thru Jomres Editing Mode.
Added: Self registration
Added: Meta keywords generated by site content
Added: Global Room types
Added: Site help code
Added: Functionality to charge for extras by the day, as well as flat rate.
Added: Option to show calendar from beginning of year, as opposed to current month.

Change: Definitions for constants. All now preceeded with _JOMRES
Change: Various changes to allow modules easier access to some Jomres functions.
Change: Moved some stuff around and added most of the includes to the integration.php to let scripts like the portal use the already existing Jomres functionality


Fix: Overlib & mosTabs conflicting in IE 
Fix: tab javascript loading when tabs not defined, causing javascript errors. Guest numbers not showing on confirmation page in basic template. 
Fix: Extras not remaining checked in basic template.
Fix: GMT dates not handled correctly by datediff function
Fix: Availability search function

Jomres v1.4g

Fixed bug introduced in Joomla 1.0.7 where certain sections of the code incorrectly assigned manager rights to unauthorised users.
New config option: Daily rate multiplier.
Javascript calendars: Departure date is now aware of the date set in the arrival date and adjusts according
Slideshow popup width & Slideshow popup height options in config
Edited basic template to reduce screen usage
Added room names to black bookings
Added room names & tariff info to customer/staff email


Jomres v1.4f

Nice new basic template

Jomres v1.4e

Added config option: Show departure date input? Option

Jomres v1.4d

Added George Hageman's Averaging system for calculating tariff prices

Jomres v1.4c

Added country dropdown list to the booking screen.
Some templates changed to accomodate this change

Jomres v1.4b

Fixed bug where multiple tariff users of apartment renters were unable to process bookings


Jomres v1.4a 

Niced up the property configuration/booking room tab a bit. Changed the wording from "Is this a single room property" to "is this an apartment/cottage/villa.
Improved the booking process for apartments, got rid of the silly confirm radio button.
Fixed a bug where the property_uid wasn't being found when going to processpayment.

Jomres v1.4

Added: Gateway handling code
Added: warning that advises if Joomla has logged users out due to inactivity.
Added: index.html to subdirs
Added: templated most of the backend functionality
Added: to property editing funcs. When new property added some basic data is set up.
Added: error checking during install to check that all tables have been created
Added: new option in property settings page: Gallery link. Put a link to your properties photo gallery here. It will show on the main property description page when filled
Added: Encryption options for storing creditcard details
Added: creditcard popup box
Added: A popup option for the property description screen where you can popup to the gallery of your choice. I intend to make all popups optional in a future release.
Added: Link to slideshows. Switchable in property config
Added: Tariffs link is switchable
Added: Batch uploading



Changed: Virtually every admin screen has been modified in one form or another to take advantage of toolbar buttons, and particularly the edit property functionality has seen a major code tidy-up .
Change: Modified the location of the uploaded images. Now images are stored in images/stories/jomres. This solves the problem of an uninstall/reinstall trashing our image locations.
Change: Tweaked user object handling. Now first time super managers are immediately assigned to the first property in the database

Removed: Public holiday settings. To the best of my knowlege nobody is using them, and they create unnecessary complications.

Jomres v1.3

Important! If you have installed previous versions of Jomres you much check the readme.txt for updates to your tables to bring them into line with this version. This applies even if you have uninstalled a previous version of Jomres, because the uninstallation of Mosres/Jomres is non-database destructive. If you have previously installed Jomres be aware that v1.2 onwards uses different table names (xxx_jomres_xxxxxx as opposed to xxx_mosres_xxxxxx) so if you want to retain your data then you will need to rename your tables. There is a file in the docs subdir called "upgrade tables 1.1 - 1.3.txt" which should help you with this, but use it at your own risk.

If you are using the Super Manager mode the first thing you need to do is click Change Properties (which you will see if you have more than one property on the system) to properly set your user up.

Changelog for v1.3:

Added: Property switching. Previously Super Property Managers would view all the elements for all the properties. This could cause confusion, and sometimes Jomres just wouldn't work right because it didn't know which property it was working against. The first time you visit your property as property manager after upgrading to v1.3, if you have more than one property listed then click Change Property to initialise your user properly.
Added: Our tariffs link. There's a new template show_tariffs.tmpl to work with this functionality.
Added: Editing mode. See the tutorials on jomres.net for a demonstration.
Added: Property types. Configured at the back end of the system. Not configurable by Property Managers
Added: Ability to search the current country/region/property type when there are more than one property in said region/property type.
Added: Book guest out option to Display booking tabbed page (providing that they are currently booked in)
Added: "Remainder to pay" label to the display booking page. Shows the grand total minus the deposit paid, if the deposit has been paid (duh).
Added: search.tmpl. This template contains the dropdown boxes that allow a visitor to choose from a number of different properties. If there's only one property on the system, then naturally this option isn't shown.
Added: bottom.tmpl. This doesn't actually have any info presented to it from a script, it's just there in case you want a footer.
Added: Item ids.
Added: Sef.



Fixed: Guests are now unique to a property. Property managers/receptionists can only admin their own guests
Fixed: Where varying types of tariffs weren't being offered for each room. Only one tariff for each room was being offered. Bug introduced by templating func, so versions prior to 1.2 not affected. A fixed version of 1.2 is available at http://upgrades.jomres.net for license holders.
Fixed: Paypal playing up again. Thanks Graham.
Change: If "Limit advance bookings" is on, then the availability calendars no longer offer dates later than the end of the chosen period. This is not yet true for the javascript calendars.
Change: Added option to settings to change the number of months of the availability calendar is shown.
Change: Added option to Tariffs & Currencies. Amount charged at booking time. You can now select to charge the full amount or a smaller deposit
Change: Modified links on bookings/showroom details. Links now pop up. Room details are shown without the avl cal and the avl cal is shown without room details.
Change: Modified how the user is authorised to cut down on database access.
Change: Added templating functionality to booking cancellation
Change: Added code to remember active tabs. 
